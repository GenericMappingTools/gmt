#include "common_options.txt"
.TH X2SYS_DATALIST 1 MANDATE GMT_STRING "Generic Mapping Tools [x2sys supplement]"
.SH NAME
x2sys_datalist \- Extract content of track data files
.SH SYNOPSIS
BD(x2sys_datalist) IT(track(s)) OPT(T)IT(TAG) [ OPT(A) ] [ OPT(F)IT(name1),IT(name2),...) ] 
[ OPT(L)[IT(corrtable)] ] [ GMT_Rgeo_OPT ]  [ OPT(S) ] [ GMT_V_OPT ] [ GMT_bo_OPT ] [ GMT_h_OPT ]
.SH DESCRIPTION
BD(x2sys_datalist) reads one or more files and produces a single ASCII [or binary] table. 
The files can be of any format, which must be described and passed with the
OPT(T) option.  You may limit the output to a geographic region, and insist
that the output from several files be separated by a multiple segment header.
Only the named data fields will be output [Default selects all columns].
#include "explain_commonitems.txt"
.SH REQUIRED ARGUMENTS
#include "explain_track.txt"
#include "explain_tag.txt"
.SH OPTIONAL ARGUMENTS
.TP
OPT(A)
Eliminate COEs by distributing the COE between the two tracks in proportion to track weight.
These (dist, adjustment) spline knots files for each track and data column
are called IT(track.column).adj and are expected to be in the BD($X2SYS_HOME)/IT(TAG) directory.
The adjustments are only applied if the corresponding adjust file can be found [No residual adjustments]
.TP
OPT(F)IT(name1),IT(name2),...)
Give a comma-separated sub-set list of column names defined in the definition
file. [Default selects all data columns].
.TP
OPT(L)[IT(corrtable)]
Apply optimal corrections to columns where such corrections are available.  Append the correction
table to use [Default uses the correction table IT(TAG)_corrections.txt which is expected to reside
in the BD($X2SYS_HOME)/IT(TAG) directory].
For the format of this file, see CORRECTIONS below.
#include "explain_-Rgeo.txt"
For Cartesian data just give IT(xmin/xmax/ymin/ymax).  This option limits
the COEs to those that fall inside the specified domain.
.TP
OPT(S)
Suppress output records where all the data columns are NaN [Default will output all records].
#include "explain_-V.txt"
#include "explain_-bo.txt"
#include "explain_-h.txt"
.TP
OPT(m)
Output a segment header between data from each track.  Note this option does not
imply anything about the input file; that information is conveyed via the system tag (OPT(T)).
#include "explain_help.txt"
.SH EXAMPLES
To extract all data from the old-style MGG supplement file c2104.gmt, recognized by the tag GMT:
.br
.sp
BD(x2sys_datalist) c2104.gmt OPT(T)GMT > myfile
.br
.sp
To make lon,lat, and depth input for BD(blockmean) and BD(surface) using all the files
listed in the file tracks.lis and define by the tag TRK, but only the data that are inside the specified
area, and make output binary, run
.br
.sp
BD(x2sys_datalist) =tracks.lis OPT(T)TRK OPT(F)lon,lat,depth OPT(R)-40/-30/25/35 OPT(bo) > alltopo_bin.xyz
.SH CORRECTIONS
The correction table is an ASCII file with coefficients and parameters needed to carry out corrections.
This table is usually produced by BD(x2sys_solve).
Comment records beginning with # are allowed.  All correction records are of the form
.br
.sp
IT(trackID observation correction)
.br
.sp
where IT(trackID) is the track name, IT(observation) is one of the abbreviations for an observed field
contained in files under this TAG, and IT(correction) consists of one or more white-space-separated IT(term)s that will be
BD(subtracted) from the observation before output.  Each IT(term) must have this exact syntax:
.br
.sp
IT(factor)[*[IT(function)]([IT(scale)](IT(abbrev)[-IT(origin)]))[^IT(power)]]
.br
.sp
where terms in brackets are optional (the brackets themselves are not used but regular parentheses must
be used exactly as indicated).  No spaces are allowed except between IT(term)s. The IT(factor) is the amplitude
of the basis function, while the optional IT(function) can be one of sin, cos, or exp. The
optional IT(scale) and IT(origin) can be used to translate the argument (before giving it to the optional
function).  The argument IT(abbrev) is one of the abbreviations for columns known to this TAG.
However, it can also be one of the three auxiliary terms BD(dist) (for along-track distances), BD(azim) for
along-track azimuths, and BD(vel) (for along-track speed); these are all sensitive to the OPT(C) and OPT(N)
settings used when defining the TAB; furthermore, BD(vel) requires BD(time) to be present in the data.  If IT(origin) is
given as BD(T) it means that we should replace it with the value of IT(abbrev) for the very
first record in the file (this is usually only done for IT(time)).  If the first data record entry is
NaN we revert IT(origin) to zero.  Optionally, raise the entire expression to the given IT(power),
before multiplying by IT(factor).  The following is an example of fictitious corrections to the
track ABC, implying the BD(z) column should have a linear
trend removed, the field BD(obs) should be corrected by a strange dependency on latitude,
BD(weight) needs to have 1 added (hence correction is given as -1), and BD(fuel) should be
reduced by a linear distance term:
.br
.sp
ABC z	7.1	1e-4*((time-T))
.br
ABC obs	0.5*exp(-1e-3(lat))^1.5
.br
ABC weight	-1
.br
ABC fuel 0.02*((dist))
.SH "SEE ALSO"
.IR blockmean (1),
.IR GMT (1),
.IR surface (1),
.IR x2sys_init (1),
.IR x2sys_datalist (1),
.IR x2sys_get (1),
.IR x2sys_list (1),
.IR x2sys_put (1),
.IR x2sys_report (1),
.IR x2sys_solve (1)
