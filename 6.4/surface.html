
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>surface &mdash; GMT 6.4.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script>let toggleHintShow = 'Click to show example script';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ternary" href="ternary.html" />
    <link rel="prev" title="subplot" href="subplot.html" />


  <!-- Point to the *latest* version switcher. This will allow the latest versions to appear on older documentation. -->
  <script type="text/javascript" src="/latest/_static/version_switch.js"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> GMT
          </a>
              <div class="version">
                6.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Illustration Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="animations.html">Animation Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial in Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_jl.html">Tutorial in Julia</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.pygmt.org/latest/tutorials/index.html">Tutorials in PyGMT</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">Datasets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="users-contrib-scripts.html">Users Script Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="users-contrib-symbols.html">Users Symbol Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecated-defaults.html">Deprecated GMT Defaults Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="switching.html">Switching between Different Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrating.html">Migrating from an Earlier Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Classic Mode</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="std-opts-classic.html">Common Options (Classic Mode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules-classic.html">Modules (Classic Mode)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GenericMappingTools/gmt/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs/contributing.html">Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs/maintenance.html">Maintainers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs/team.html">Team Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs/rst-cheatsheet.html">reStructuredText Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs/debug.html">Debugging GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs/api.html">GMT C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs/postscriptlight.html">PostScriptLight C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs/devdocs.html">GMT Enhancement Proposals</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://www.generic-mapping-tools.org/"><i class="fa fa-home fa-fw"></i> GMT Homepage</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org/"><i class="fa fa-comment fa-fw"></i> GMT Community Forum</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt/blob/master/LICENSE.TXT"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">Modules</a> &raquo;</li>
      <li>surface</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/GenericMappingTools/gmt/edit/master/doc/rst/source/surface.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="index-0"></span><section id="surface">
<h1>surface<a class="headerlink" href="#surface" title="Permalink to this heading">¶</a></h1>
<p>Grid table data using adjustable tension continuous curvature splines</p>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this heading">¶</a></h2>
<p><strong>gmt surface</strong> [ <em>table</em> ] <a class="reference internal" href="#g"><span><strong>-G</strong></span></a></strong><em>outgrid</em>
<a class="reference internal" href="#i"><span><strong>-I</strong></span></a></strong><em>increment</em>
<a class="reference internal" href="#r"><span><strong>-R</strong></span></a></strong><em>region</em>
[ <a class="reference internal" href="#a"><span><strong>-A</strong></span></a></strong><em>aspect_ratio</em>|<strong>m</strong> ]
[ <a class="reference internal" href="#c"><span><strong>-C</strong></span></a></strong><em>convergence_limit</em>[%] ]
[ <a class="reference internal" href="#j"><span><strong>-J</strong></span></a></strong><em>parameters</em> ]
[ <a class="reference internal" href="#d"><span><strong>-D</strong></span></a></strong><em>breakline_file</em>[<strong>+z</strong>[<em>level</em>]] ]
[ <a class="reference internal" href="#l"><span><strong>-L</strong></span></a></strong><strong>l</strong><em>lower</em> ] [ <a class="reference internal" href="#l"><span><strong>-L</strong></span></a></strong><strong>u</strong><em>upper</em> ]
[ <a class="reference internal" href="#m"><span><strong>-M</strong></span></a></strong><em>max_radius</em> ]
[ <a class="reference internal" href="#n"><span><strong>-N</strong></span></a></strong><em>max_iterations</em> ]
[ <a class="reference internal" href="#q"><span><strong>-Q</strong></span></a></strong>[<strong>r</strong>] ]
[ <a class="reference internal" href="#s"><span><strong>-S</strong></span></a></strong><em>search_radius</em>[<strong>m</strong>|<strong>s</strong>] ]
[ <a class="reference internal" href="#t"><span><strong>-T</strong></span></a></strong>[<strong>b</strong>|<strong>i</strong>]<em>tension_factor</em> ]
[ <a class="reference internal" href="#v"><span><strong>-V</strong></span></a></strong>[<em>level</em>] ]
[ <a class="reference internal" href="#w"><span><strong>-W</strong></span></a></strong>[<em>logfile</em>] ]
[ <a class="reference internal" href="#z"><span><strong>-Z</strong></span></a></strong><em>over-relaxation_factor</em> ]
[ <strong>-a</strong><a class="reference internal" href="gmt.html#aspatial-full"><span class="std std-ref">flags</span></a> ]
[ <strong>-bi</strong><a class="reference internal" href="gmt.html#bi-full"><span class="std std-ref">binary</span></a> ]
[ <strong>-di</strong><a class="reference internal" href="gmt.html#di-full"><span class="std std-ref">nodata</span></a>[<strong>+c</strong><em>col</em>] ]
[ <strong>-e</strong><a class="reference internal" href="gmt.html#e-full"><span class="std std-ref">regexp</span></a> ]
[ <strong>-f</strong><a class="reference internal" href="gmt.html#f-full"><span class="std std-ref">flags</span></a> ]
[ <strong>-h</strong><a class="reference internal" href="gmt.html#h-full"><span class="std std-ref">headers</span></a> ]
[ <strong>-i</strong><a class="reference internal" href="gmt.html#icols-full"><span class="std std-ref">flags</span></a> ]
[ <strong>-qi</strong><a class="reference internal" href="gmt.html#qi-full"><span class="std std-ref">flags</span></a> ]
[ <strong>-r</strong><a class="reference internal" href="gmt.html#nodereg-full"><span class="std std-ref">reg</span></a> ]
[ <strong>-w</strong><a class="reference internal" href="gmt.html#w-full"><span class="std std-ref">flags</span></a> ]
[ <strong>-:</strong>[<strong>i</strong>|<strong>o</strong>] ]
[ <strong>--PAR</strong>=<em>value</em> ]</p>
<p><strong>Note:</strong> No space is allowed between the option flag and the associated arguments.</p>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p><strong>surface</strong> reads randomly-spaced (x,y,z) triples from standard input
[or <em>table</em>] and produces a binary file of gridded values z(x,y) by
solving the differential equation (away from data points)</p>
<div class="math notranslate nohighlight">
\[(1 - t) \nabla ^2(z) + t \nabla (z) = 0,\]</div>
<p>where <em>t</em> is a tension factor between 0 and 1, and <span class="math notranslate nohighlight">\(\nabla\)</span> indicates the
Laplacian operator. Here, <em>t</em> = 0 gives the “minimum curvature” solution.
Minimum curvature can cause undesired oscillations and false local maxima or minima
(See Smith and Wessel, 1990), and you may wish to use <em>t</em> &gt; 0 to suppress these
effects. Experience suggests <em>t</em> ~ 0.25 usually looks good for potential
field data and <em>t</em> should be larger (<em>t</em> ~ 0.35) for steep topography data.
<em>t</em> = 1 gives a harmonic surface (no maxima or minima are possible except
at control data points). It is recommended that the user preprocess the
data with <a class="reference internal" href="blockmean.html"><span class="doc">blockmean</span></a>, <a class="reference internal" href="blockmedian.html"><span class="doc">blockmedian</span></a>, or <a class="reference internal" href="blockmode.html"><span class="doc">blockmode</span></a> to avoid
spatial aliasing and eliminate redundant data. You may impose lower
and/or upper bounds on the solution. These may be entered in the form of
a fixed value, a grid with values, or simply be the minimum/maximum
input data values. Natural boundary conditions are applied at the edges,
except for geographic data with 360-degree range where we apply periodic
boundary conditions in the longitude direction.</p>
</section>
<section id="required-arguments">
<h2>Required Arguments<a class="headerlink" href="#required-arguments" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt><em>table</em></dt><dd><p>One or more ASCII (or binary, see <strong>-bi</strong>[<em>ncols</em>][<em>type</em>]) data
table file(s) holding a number of data columns. If no tables are given
then we read from standard input.  </p>
</dd>
</dl>
<span class="target" id="g"></span><p><strong>-G</strong><em>outgrid</em>[=<em>ID</em>][<strong>+d</strong><em>divisor</em>][<strong>+n</strong><em>invalid</em>][<strong>+o</strong><em>offset</em>|<strong>a</strong>][<strong>+s</strong><em>scale</em>|<strong>a</strong>][:<em>driver</em>[<em>dataType</em>][<strong>+c</strong><em>options</em>]]</p>
<blockquote>
<div><p>Give the name of the output grid file. Note that the
smallest grid dimension must be at least 4. Optionally, append =<em>ID</em> for writing a specific file format
(<a class="reference internal" href="gmt.html#grd-inout-full"><span class="std std-ref">See full description</span></a>). The following modifiers are
supported:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>+d</strong> - Divide data values by given <em>divisor</em> [Default is 1].</p></li>
<li><p><strong>+n</strong> - Replace data values matching <em>invalid</em> with a NaN.</p></li>
<li><p><strong>+o</strong> - Offset data values by the given <em>offset</em>, or append <strong>a</strong> for
automatic range offset to preserve precision for integer grids
[Default is 0].</p></li>
<li><p><strong>+s</strong> - Scale data values by the given <em>scale</em>, or append <strong>a</strong> for
automatic scaling to preserve precision for integer grids [Default
is 1].</p></li>
</ul>
</div></blockquote>
<p>Note: Any offset is added before any scaling. <strong>+sa</strong> also sets <strong>+oa</strong>
(unless overridden). To write specific formats via GDAL, use =<em>gd</em>
and supply <em>driver</em> (and optionally <em>dataType</em>) and/or one or more
concatenated GDAL <strong>-co</strong> options using <strong>+c</strong>. See
the <a class="reference internal" href="cookbook/features.html#write-grids-images"><span class="std std-ref">“Writing grids and images” cookbook section</span></a>
for more details.</p>
</div></blockquote>
<dl id="i">
<dt><strong>-I</strong><em>x_inc</em>[<strong>+e</strong>|<strong>n</strong>][/<em>y_inc</em>[<strong>+e</strong>|<strong>n</strong>]]</dt><dd><p>Set the grid spacing as <em>x_inc</em> [and optionally <em>y_inc</em>].</p>
<p><strong>Geographical (degrees) coordinates</strong>: Optionally, append an increment unit.
Choose among:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>m</strong> to indicate arc minutes</p></li>
<li><p><strong>s</strong> to indicate arc seconds</p></li>
<li><p><strong>e</strong> (meter), <strong>f</strong> (foot), <strong>k</strong> (km), <strong>M</strong> (mile), <strong>n</strong> (nautical
mile) or <strong>u</strong> (US survey foot), in which case the increment will be
converted to the equivalent degrees longitude at the middle latitude
of the region  (the conversion depends on <a class="reference internal" href="gmt.conf.html#term-PROJ_ELLIPSOID"><span class="xref std std-term">PROJ_ELLIPSOID</span></a>). If
<em>y_inc</em> is given but set to 0 it will be reset equal to <em>x_inc</em>;
otherwise it will be converted to degrees latitude.</p></li>
</ul>
</div></blockquote>
<p><strong>All coordinates</strong>: The following modifiers are supported:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>+e</strong> to slightly adjust the max <em>x</em> (<em>east</em>) or <em>y</em> (<em>north</em>) to fit
exactly the given increment if needed [Default is to slightly adjust
the increment to fit the given domain].</p></li>
<li><p><strong>+n</strong> to define the <em>number of nodes</em> rather than the increment, in
which case the increment is recalculated from the number of nodes,
the <em>registration</em> (see <a class="reference internal" href="cookbook/file-formats.html#gmt-file-formats"><span class="std std-ref">GMT File Formats</span></a>), and the domain.
<strong>Note</strong>: If <strong>-R</strong><em>grdfile</em> is used then the grid spacing and
the registration have already been initialized; use <a class="reference internal" href="#i"><span><strong>-I</strong></span></a></strong> and <a class="reference internal" href="#r"><span><strong>-R</strong></span></a></strong>
to override these values.</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
<dl class="simple" id="r">
<dt><strong>-R</strong><em>xmin</em>/<em>xmax</em>/<em>ymin</em>/<em>ymax</em>[<strong>+r</strong>][<strong>+u</strong><em>unit</em>]</dt><dd><p>Specify the region of interest. <a class="reference internal" href="gmt.html#r-full"><span class="std std-ref">(See full description)</span></a> <a class="reference internal" href="cookbook/options.html#data-domain-or-map-region-the-r-option"><span class="std std-ref">(See cookbook information)</span></a>.</p>
</dd>
</dl>
</section>
<section id="optional-arguments">
<h2>Optional Arguments<a class="headerlink" href="#optional-arguments" title="Permalink to this heading">¶</a></h2>
<dl class="simple" id="a">
<dt><strong>-A</strong><em>aspect_ratio</em>|<strong>m</strong></dt><dd><p>Aspect ratio. If desired, grid anisotropy can be added to the
equations. Enter <em>aspect_ratio</em>, where dy = dx / <em>aspect_ratio</em>
relates the grid dimensions. For geographic data, you may use
<strong>-Am</strong> to set the aspect ratio to the cosine of the mean latitude
[Default = 1 assumes isotropic grid.]</p>
</dd>
</dl>
<dl class="simple" id="c">
<dt><strong>-C</strong><em>convergence_limit</em>[%]</dt><dd><p>Convergence limit. Iteration is assumed to have converged when the
maximum absolute change in any grid value is less than
<em>convergence_limit</em>. (Units same as data z units). Alternatively,
give limit in percentage of rms deviation by appending %.  [Default is
scaled to <span class="math notranslate nohighlight">\(10^{-4}\)</span> of the root-mean-square deviation of the data
from a best-fit (least-squares) plane.].
This is the final convergence limit at the desired grid spacing; for
intermediate (coarser) grids the effective convergence limit is divided
by the grid spacing multiplier.</p>
</dd>
</dl>
<dl class="simple" id="j">
<dt><strong>-J</strong><em>parameters</em></dt><dd><p>Specify the projection. Select the data map projection. This projection is only used to add a referencing info
to the grid formats that support it. E.g., netCDF, GeoTIFF, and others supported by GDAL.</p>
</dd>
</dl>
<dl class="simple" id="d">
<dt><strong>-D</strong><em>breakline</em>[<strong>+z</strong>[<em>level</em>]]</dt><dd><p>Use <em>x, y, z</em> data in the <em>breakline</em> file as a ‘soft breakline’. A ‘soft breakline’
is a line whose vertices will be used to constrain the nearest grid nodes without
any further interpolation. A coastline or a lake shore are good examples of
‘soft breaklines’. Multi-segments files are accepted.  If your lines do not have
<em>z</em>-values or you wish to override those with a constant z-value, then append
<strong>+z</strong><em>level</em> to the filename. If no value is given then we default to 0.</p>
</dd>
</dl>
<dl class="simple" id="l">
<dt><strong>-Ll</strong><em>lower</em> and <strong>-Lu</strong><em>upper</em></dt><dd><p>Impose limits on the output solution. Directive <strong>l</strong><em>lower</em> sets the lower
bound. <em>lower</em> can be the name of a grid file with lower bound
values, a fixed value, <strong>d</strong> to set to minimum input value, or <strong>u</strong>
for unconstrained [Default]. Directive <strong>u</strong><em>upper</em> sets the upper bound and
can be the name of a grid file with upper bound values, a fixed
value, <strong>d</strong> to set to maximum input value, or <strong>u</strong> for
unconstrained [Default]. Grid files used to set the limits may
contain NaNs. In the presence of NaNs, the limit of a node masked
with NaN is unconstrained. <strong>Note</strong>: Grids given via <strong>-L</strong> must be compatible
with the desired output domain and increments.</p>
</dd>
</dl>
<dl class="simple" id="m">
<dt><strong>-M</strong><em>max_radius</em></dt><dd><p>After solving for the surface, apply a mask so that nodes farther
than <em>max_radius</em> away from a data constraint are set to NaN [no masking].
Append a distance unit (see <a class="reference internal" href="#units">Units</a>) if needed.
One can also select the nodes to mask by using the <strong>-M</strong><em>n_cells</em><strong>c</strong> form.
Here <em>n_cells</em> means the number of cells around the node controlled by a data point. As an example
<strong>-M0c</strong> means that only the cell where the point lies is filled, <strong>-M1c</strong> keeps one cell
beyond that (i.e. makes a 3x3 square neighborhood), and so on.</p>
</dd>
</dl>
<dl class="simple" id="n">
<dt><strong>-N</strong><em>max_iterations</em></dt><dd><p>Number of iterations. Iteration will cease when <em>convergence_limit</em>
is reached or when number of iterations reaches <em>max_iterations</em>.
This is the final iteration limit at the desired grid spacing; for
intermediate (coarser) grids the effective iteration limit is scaled
by the grid spacing multiplier [Default is 500].</p>
</dd>
</dl>
<dl class="simple" id="q">
<dt><strong>-Q</strong>[<strong>r</strong>]</dt><dd><p>Suggest grid dimensions which have a highly composite greatest
common factor. This allows surface to use several intermediate steps
in the solution, yielding faster run times and better results. The
sizes suggested by <a class="reference internal" href="#q"><span><strong>-Q</strong></span></a></strong> can be achieved by altering <a class="reference internal" href="#r"><span><strong>-R</strong></span></a></strong> and/or
<a class="reference internal" href="#i"><span><strong>-I</strong></span></a></strong>. You can recover the <a class="reference internal" href="#r"><span><strong>-R</strong></span></a></strong> and <a class="reference internal" href="#i"><span><strong>-I</strong></span></a></strong> you want later by
using <a class="reference internal" href="grdsample.html"><span class="doc">grdsample</span></a> or <a class="reference internal" href="grdcut.html"><span class="doc">grdcut</span></a> on the output of <strong>surface</strong>.
Alternatively, append <strong>r</strong> to have <strong>surface</strong> use the specified
<strong>-R</strong> setting exactly as given in the calculations [Default automatically
seeks a slightly larger region if that allows for more intermediate
steps to ensure the best possible convergence; the region is then trimmed
back to what was requested in <a class="reference internal" href="#r"><span><strong>-R</strong></span></a></strong> upon output].</p>
</dd>
</dl>
<dl class="simple" id="s">
<dt><strong>-S</strong><em>search_radius</em>[<strong>m</strong>|<strong>s</strong>]</dt><dd><p>Search radius. Enter <em>search_radius</em> in same units as x,y data;
append <strong>m</strong> to indicate arc minutes or <strong>s</strong> for arc seconds. This
is used to initialize the grid before the first iteration; it is not
worth the time unless the grid lattice is prime and cannot have
regional stages. [Default = 0.0 and no search is made.]</p>
</dd>
</dl>
<dl class="simple" id="t">
<dt><strong>-T</strong>[<strong>b</strong>|<strong>i</strong>]<em>tension_factor</em></dt><dd><p>Tension factor[s]. These must be between 0 and 1. Tension may be
used in the interior solution (above equation, where it suppresses
spurious oscillations) and in the boundary conditions (where it
tends to flatten the solution approaching the edges). Using zero for
both values results in a minimum curvature surface with free edges,
i.e., a natural bicubic spline. Use <strong>-Ti</strong><em>tension_factor</em>
to set interior tension, and <strong>-Tb</strong><em>tension_factor</em> to set
boundary tension. If you do not prepend <strong>i</strong> or <strong>b</strong>, both will be
set to the same value. [Default = 0 for both gives minimum curvature
solution.]</p>
</dd>
</dl>
<dl class="simple" id="v">
<dt><strong>-V</strong>[<em>level</em>]</dt><dd><p>Select verbosity level [<strong>w</strong>]. <strong>-V3</strong> will report the convergence after each iteration;
<a class="reference internal" href="#v"><span><strong>-V</strong></span></a></strong> will report only after each regional grid is converged. <a class="reference internal" href="gmt.html#v-full"><span class="std std-ref">(See full description)</span></a> <a class="reference internal" href="cookbook/options.html#verbose-feedback-the-v-option"><span class="std std-ref">(See cookbook information)</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="w">
<dt><strong>-W</strong>[<em>logfile</em>]</dt><dd><p>Write convergence information to <em>logfile</em> [Default is <em>surface_log.txt</em>].</p>
</dd>
</dl>
<dl class="simple" id="z">
<dt><strong>-Z</strong><em>over-relaxation_factor</em></dt><dd><p>Over-relaxation factor. This parameter is used to accelerate the
convergence; it is a number between 1 and 2. A value of 1 iterates
the equations exactly, and will always assure stable convergence.
Larger values overestimate the incremental changes during
convergence, and will reach a solution more rapidly but may become
unstable. If you use a large value for this factor, it is a good
idea to monitor each iteration with the <strong>-Vi</strong> option. [Default =
1.4 converges quickly and is almost always stable.]</p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-a</strong>[[<em>col</em>=]<em>name</em>[,<em>…</em>]] <a class="reference internal" href="gmt.html#aspatial-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Set aspatial column associations <em>col</em>=<em>name</em>.</p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-bi</strong><em>record</em>[<strong>+b</strong>|<strong>l</strong>] <a class="reference internal" href="gmt.html#bi-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Select native binary format for primary table input. [Default is 3 input columns].</p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-di</strong><em>nodata</em>[<strong>+c</strong><em>col</em>] <a class="reference internal" href="gmt.html#di-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Replace input columns that equal <em>nodata</em> with NaN.  </p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-e</strong>[<strong>~</strong>]<em>“pattern”</em> | <strong>-e</strong>[<strong>~</strong>]/<em>regexp</em>/[<strong>i</strong>] <a class="reference internal" href="gmt.html#e-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Only accept data records that match the given pattern.  </p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-f</strong>[<strong>i</strong>|<strong>o</strong>]<em>colinfo</em> <a class="reference internal" href="gmt.html#f-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Specify data types of input and/or output columns.  </p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-h</strong>[<strong>i</strong>|<strong>o</strong>][<em>n</em>][<strong>+c</strong>][<strong>+d</strong>][<strong>+m</strong><em>segheader</em>][<strong>+r</strong><em>remark</em>][<strong>+t</strong><em>title</em>] <a class="reference internal" href="gmt.html#h-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Skip or produce header record(s). Not used with binary data.</p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-i</strong><em>cols</em>[<strong>+l</strong>][<strong>+d</strong><em>divisor</em>][<strong>+s</strong><em>scale</em>|<strong>d</strong>|<strong>k</strong>][<strong>+o</strong><em>offset</em>][,<em>…</em>][,<strong>t</strong>[<em>word</em>]] <a class="reference internal" href="gmt.html#icols-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Select input columns and transformations (0 is first column, <strong>t</strong> is trailing text, append <em>word</em> to read one word only).</p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-qi</strong>[~]<em>rows</em>|<em>limits</em>[<strong>+c</strong><em>col</em>][<strong>+a</strong>|<strong>t</strong>|<strong>s</strong>] <a class="reference internal" href="gmt.html#qi-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Select input rows or data limit(s) [default is all rows].</p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-r</strong>[<strong>g</strong>|<strong>p</strong>] <a class="reference internal" href="gmt.html#nodereg-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Set node registration [gridline].  </p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-wy</strong>|<strong>a</strong>|<strong>w</strong>|<strong>d</strong>|<strong>h</strong>|<strong>m</strong>|<strong>s</strong>|<strong>c</strong><em>period</em>[/<em>phase</em>][<strong>+c</strong><em>col</em>] <a class="reference internal" href="gmt.html#w-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Convert an input coordinate to a cyclical coordinate.</p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-:</strong>[<strong>i</strong>|<strong>o</strong>] <a class="reference internal" href="gmt.html#colon-full"><span class="std std-ref">(more …)</span></a></dt><dd><p>Swap 1st and 2nd column on input and/or output.</p>
</dd>
</dl>
<dl class="simple">
<dt><strong>-^</strong> or just <strong>-</strong></dt><dd><p>Print a short message about the syntax of the command, then exit (<strong>Note</strong>: on Windows just use <strong>-</strong>).</p>
</dd>
<dt><strong>-+</strong> or just <strong>+</strong></dt><dd><p>Print an extensive usage (help) message, including the explanation of
any module-specific option (but not the GMT common options), then exit.</p>
</dd>
<dt><strong>-?</strong> or no arguments</dt><dd><p>Print a complete usage (help) message, including the explanation of all options, then exit.</p>
</dd>
<dt><strong>--PAR</strong>=<em>value</em></dt><dd><p>Temporarily override a GMT default setting; repeatable. See <a class="reference internal" href="gmt.conf.html"><span class="doc">gmt.conf</span></a> for parameters.</p>
</dd>
</dl>
</section>
<section id="grid-values-precision">
<h2>Grid Values Precision<a class="headerlink" href="#grid-values-precision" title="Permalink to this heading">¶</a></h2>
<p>Regardless of the precision of the input data, GMT programs that create
grid files will internally hold the grids in 4-byte floating point
arrays. This is done to conserve memory and furthermore most if not all
real data can be stored using 4-byte floating point values. Data with
higher precision (i.e., double precision values) will lose that
precision once GMT operates on the grid or writes out new grids. To
limit loss of precision when processing data you should always consider
normalizing the data prior to processing.</p>
</section>
<section id="units">
<h2>Units<a class="headerlink" href="#units" title="Permalink to this heading">¶</a></h2>
<p>For map distance unit, append <em>unit</em> <strong>d</strong> for arc degree, <strong>m</strong> for arc
minute, and <strong>s</strong> for arc second, or <strong>e</strong> for meter [Default unless stated otherwise], <strong>f</strong>
for foot, <strong>k</strong> for km, <strong>M</strong> for statute mile, <strong>n</strong> for nautical mile,
and <strong>u</strong> for US survey foot. By default we compute such distances using
a spherical approximation with great circles (<strong>-jg</strong>) using the authalic radius
(see <a class="reference internal" href="gmt.conf.html#term-PROJ_MEAN_RADIUS"><span class="xref std std-term">PROJ_MEAN_RADIUS</span></a>). You can use <strong>-jf</strong> to perform
“Flat Earth” calculations (quicker but less accurate) or <strong>-je</strong> to perform
exact geodesic calculations (slower but more accurate; see
<a class="reference internal" href="gmt.conf.html#term-PROJ_GEODESIC"><span class="xref std std-term">PROJ_GEODESIC</span></a> for method used).</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<p><strong>Note</strong>: Below are some examples of valid syntax for this module.
The examples that use remote files (file names starting with <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>)
can be cut and pasted into your terminal for testing.
Other commands requiring input files are just dummy examples of the types
of uses that are common but cannot be run verbatim as written.</p>
<p>To grid 5 by 5 minute gravity block means from the ASCII data in
hawaii_5x5.xyg, using a <em>tension_factor</em> = 0.25, a
<em>convergence_limit</em> = 0.1 mGal, writing the result to a file called
hawaii_grd.nc, and monitoring each iteration, try:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt surface hawaii_5x5.xyg -R198/208/18/25 -I5m -Ghawaii_grd.nc -T0.25 -C0.1 -Vi
</pre></div>
</div>
</div></blockquote>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this heading">¶</a></h2>
<p>While the region specified by <strong>-R</strong> determines your final output grid, internally
we may use a slightly larger region that will allow for more intermediate grids
(i.e., more common factors between <em>n_columns - 1</em> and <em>n_rows - 1</em>). This
should allow for better convergence in the final solution.</p>
</section>
<section id="gridding-geographic-data-boundary-conditions">
<h2>Gridding Geographic Data: Boundary Conditions<a class="headerlink" href="#gridding-geographic-data-boundary-conditions" title="Permalink to this heading">¶</a></h2>
<p>The surface finite difference algorithm is Cartesian at heart, hence the <em>ad hoc</em>
option to change the aspect ratio for a suitable mean latitude (<a class="reference internal" href="#a"><span><strong>-A</strong></span></a></strong>). When
geographic data are supplied and the output grid has a 360 degree longitude range we will
impose periodic boundary conditions in longitude.  However, no equivalent geographic
boundary condition can be applied at the poles since the finite difference solution
will not be valid there (actual spacing between the nodes at the poles is zero).
If you attempt this type of gridding you will be severely warned but the calculations
will continue.  Because the result is a geographic grid, the GMT i/o machinery will
interfere and detect inconsistencies at the pole points and replace all values along
a pole with their mean value.  This will introduce further distortion into the
grid near the poles.  We recommend you instead consider spherical gridding for global
data sets; see <a class="reference internal" href="greenspline.html"><span class="doc">greenspline</span></a> (for modest data sets) or <a class="reference internal" href="sphinterpolate.html"><span class="doc">sphinterpolate</span></a>, or
project your data using a stereographic projection and grid the projected Cartesian data.</p>
</section>
<section id="gridding-geographic-data-setting-increments">
<h2>Gridding Geographic Data: Setting Increments<a class="headerlink" href="#gridding-geographic-data-setting-increments" title="Permalink to this heading">¶</a></h2>
<p>Specifying grid increments in distance units (meters, km, etc.) for geographic (lon, lat)
grids triggers a conversion from the given increment to the equivalent increment in degrees.
This is done differently for longitude and latitude and also depends on chosen ellipsoid,
but ultimately is a great-circle approximation. For latitude we divide your <em>y</em>-increment
with the number of you chosen unit per degree latitude, while for longitude we divide your
<em>x</em>-increment by the number of such units per degree along the mid-parallel in your region. The
resulting degree increments may therefore not exactly match the increments you entered explicitly.
Hence, there may be rounding off in ways you don’t want and cannot easily control, resulting in prime grid
dimensions. You can handle the situation via <a class="reference internal" href="#q"><span><strong>-Q</strong></span></a></strong> but with the never-ending decimals in some
increments that is still a challenge.  Another approach is to <em>not</em> grid geographic data
using length units as increments, due to the above conversion. It may be cleaner to specify
grid intervals in spherical degrees, minutes or seconds. That way you can control the grid
dimensions directly and avoid the round-off. Alternatively, if your region is far from Equator
and your are concerned about the difference in longitude and latitude increments in degrees
you could project all data to a local projection (e.g., UTM) to yield units of meters, and then
grid the projected data using meters as the final grid increment. Either approach avoids
“ugly” increments like 0.161697s and will let you specify intervals that are easily divisible
into the range. If increment choice is dictated by a need for a desired increment in meters
then the projection route will yield better results.</p>
</section>
<section id="bugs">
<h2>Bugs<a class="headerlink" href="#bugs" title="Permalink to this heading">¶</a></h2>
<p><strong>surface</strong> will complain when more than one data point is found for any
node and suggest that you run <a class="reference internal" href="blockmean.html"><span class="doc">blockmean</span></a>, <a class="reference internal" href="blockmedian.html"><span class="doc">blockmedian</span></a>, or
<a class="reference internal" href="blockmode.html"><span class="doc">blockmode</span></a> first. If you did run these decimators and still get this
message it usually means that your grid spacing is so small that you
need more decimals in the output format used. You may
specify more decimal places by editing the parameter
<a class="reference internal" href="gmt.conf.html#term-FORMAT_FLOAT_OUT"><span class="xref std std-term">FORMAT_FLOAT_OUT</span></a> in your <a class="reference internal" href="gmt.conf.html"><span class="doc">gmt.conf</span></a> file prior to running
the decimators or choose binary input and/or output using single or
double precision storage.</p>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="blockmean.html"><span class="doc">blockmean</span></a>,
<a class="reference internal" href="blockmedian.html"><span class="doc">blockmedian</span></a>,
<a class="reference internal" href="blockmode.html"><span class="doc">blockmode</span></a>,
<a class="reference internal" href="gmt.html"><span class="doc">gmt</span></a>,
<a class="reference internal" href="grdcut.html"><span class="doc">grdcut</span></a>,
<a class="reference internal" href="grdsample.html"><span class="doc">grdsample</span></a>,
<a class="reference internal" href="greenspline.html"><span class="doc">greenspline</span></a>,
<a class="reference internal" href="nearneighbor.html"><span class="doc">nearneighbor</span></a>,
<a class="reference internal" href="triangulate.html"><span class="doc">triangulate</span></a>,
<a class="reference internal" href="sphinterpolate.html"><span class="doc">sphinterpolate</span></a></p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<p>Smith, W. H. F, and P. Wessel, 1990, Gridding with continuous curvature
splines in tension, <em>Geophysics</em>, 55, 293-305, <a class="reference external" href="https://doi.org/10.1190/1.1442837">https://doi.org/10.1190/1.1442837</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="subplot.html" class="btn btn-neutral float-left" title="subplot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ternary.html" class="btn btn-neutral float-right" title="ternary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, The GMT Team.
      <span class="lastupdated">Last updated on Jun 18, 2022.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>