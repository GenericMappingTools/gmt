
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributors Guide &mdash; GMT 6.7.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=32d919f4" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=9cce70e7"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show example script';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../_static/design-tabs.js?v=f930bc37"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Maintainers Guide" href="maintenance.html" />
    <link rel="prev" title="Migrating from an Earlier Version" href="../migrating.html" />


  <!-- Point to the *latest* version switcher. This will allow the latest versions to appear on older documentation. -->
  <script type="text/javascript" src="/latest/_static/version_switch.js"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            GMT
          </a>
              <div class="version">
                6.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Illustration Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../animations.html">Animation Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Technical Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules-classic.html">Modules (Classic Mode)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-contrib-symbols.html">Users Symbol Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecated-defaults.html">Deprecated GMT Defaults Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="../switching.html">Switching between Different Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrating.html">Migrating from an Earlier Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributors Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ways-to-contribute">Ways to Contribute</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ways-to-contribute-documentation-and-or-code">Ways to Contribute Documentation and/or Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ways-to-contribute-feedback">Ways to Contribute Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ways-to-contribute-to-community-building">Ways to Contribute to Community Building</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#providing-feedback">Providing Feedback</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reporting-a-bug">Reporting a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="#submitting-a-feature-request">Submitting a Feature Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#submitting-general-comments-questions">Submitting General Comments/Questions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#general-guidelines">General Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#resources-for-new-contributors">Resources for New Contributors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-help">Getting Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pull-request-workflow">Pull Request Workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general-guidelines-for-making-a-pull-request-pr">General Guidelines for Making a Pull Request (PR):</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-process-for-pull-request-review">General Process for Pull Request Review:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-your-environment">Setting up your environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#updating-the-development-source-codes">Updating the development source codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-build-and-test-aliases">Using build and test aliases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contributing-documentation">Contributing Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-the-documentation">Building the documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contributing-an-animation">Contributing an animation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contributing-code">Contributing Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-style">Code Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-gmt">Testing GMT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#managing-test-images-using-data-version-control-dvc">Managing Test Images Using Data Version Control (dvc)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-tests">Running tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reviewing-test-failures">Reviewing test failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="#updating-reference-plots-for-tests">Updating reference plots for tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-new-tests">Adding new tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-gmt">Debugging GMT</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="maintenance.html">Maintainers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="team.html">Team Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst-cheatsheet.html">reStructuredText Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">GMT C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="postscriptlight.html">PostScriptLight C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs.html">GMT Enhancement Proposals</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://www.generic-mapping-tools.org/"><i class="fa fa-home fa-fw"></i> GMT Homepage</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org/"><i class="fa fa-comment fa-fw"></i> GMT Community Forum</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt/blob/master/LICENSE.TXT"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
                <li class="toctree-l1"><a href="/dev/gmt-docs-dev.zip"><i class="fa fa-download fa-fw"></i> Documentation HTML zip</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Contributors Guide</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/GenericMappingTools/gmt/edit/master/doc/rst/source/devdocs/contributing.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="contributors-guide">
<h1>Contributors Guide<a class="headerlink" href="#contributors-guide" title="Link to this heading"></a></h1>
<p>This is a community driven project and everyone is welcome to contribute. The project is hosted at the
<a class="reference external" href="https://github.com/GenericMappingTools/gmt">GMT GitHub repository</a>.</p>
<p>The goal is to maintain a diverse community that’s pleasant for everyone. <strong>Please be considerate and respectful of
others</strong>. Everyone must abide by our <a class="reference external" href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md">Code of Conduct</a>
and we encourage all to read it carefully.</p>
<section id="ways-to-contribute">
<h2>Ways to Contribute<a class="headerlink" href="#ways-to-contribute" title="Link to this heading"></a></h2>
<section id="ways-to-contribute-documentation-and-or-code">
<h3>Ways to Contribute Documentation and/or Code<a class="headerlink" href="#ways-to-contribute-documentation-and-or-code" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Tackle any <a class="reference external" href="https://github.com/GenericMappingTools/gmt/issues">issue</a> that you wish! Please leave a comment on the
issue indicating that you want to work on it. Some issues are labeled as
<a class="reference external" href="https://github.com/GenericMappingTools/gmt/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22">“good first issues”</a>
to indicate that they are beginner friendly, meaning that they don’t require extensive knowledge of the project.</p></li>
<li><p>Make a tutorial or example of how to do something.</p></li>
<li><p>Improve the API documentation.</p></li>
<li><p>Contribute code you already have. It doesn’t need to be perfect! We will help you clean things up, test it, etc.</p></li>
</ul>
</section>
<section id="ways-to-contribute-feedback">
<h3>Ways to Contribute Feedback<a class="headerlink" href="#ways-to-contribute-feedback" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Provide feedback about how we can improve the project or about your particular use case. Open an
<a class="reference external" href="https://github.com/GenericMappingTools/gmt/issues">issue</a> with feature requests of bug fixes, or post general
comments/questions on the  <a class="reference external" href="https://forum.generic-mapping-tools.org/">forum</a>.</p></li>
<li><p>Help triage issues, or give a “thumbs up” on issues that others reported which are relevant to you.</p></li>
</ul>
</section>
<section id="ways-to-contribute-to-community-building">
<h3>Ways to Contribute to Community Building<a class="headerlink" href="#ways-to-contribute-to-community-building" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Participate and answer questions on the <a class="reference external" href="https://forum.generic-mapping-tools.org/">GMT Community Forum</a>.</p></li>
<li><p>Participate in discussions at the monthly GMT Community Meetings, which are announced on the
<a class="reference external" href="https://forum.generic-mapping-tools.org/c/governance/">forum governance page</a>.</p></li>
<li><p>Cite GMT when using the project.</p></li>
<li><p>Spread the word about GMT or star the project!</p></li>
</ul>
</section>
</section>
<section id="providing-feedback">
<h2>Providing Feedback<a class="headerlink" href="#providing-feedback" title="Link to this heading"></a></h2>
<section id="reporting-a-bug">
<h3>Reporting a Bug<a class="headerlink" href="#reporting-a-bug" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Find the <a class="reference external" href="https://github.com/GenericMappingTools/gmt/issues">Issues</a> tab on the top of the GitHub repository and
click <em>New Issue</em>.</p></li>
<li><p>Click on <em>Get started</em> next to <em>Bug report</em>.</p></li>
<li><p><strong>Please try to fill out the template with as much detail as you can</strong>.</p></li>
<li><p>After submitting your bug report, try to answer any follow up questions about the bug as best as you can.</p></li>
</ul>
</section>
<section id="submitting-a-feature-request">
<h3>Submitting a Feature Request<a class="headerlink" href="#submitting-a-feature-request" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Find the <a class="reference external" href="https://github.com/GenericMappingTools/gmt/issues">Issues</a> tab on the top of the GitHub repository and
click <em>New Issue</em>.</p></li>
<li><p>Click on <em>Get started</em> next to <em>Feature request</em>.</p></li>
<li><p><strong>Please try to fill out the template with as much detail as you can</strong>.</p></li>
<li><p>After submitting your feature request, try to answer any follow up questions as best as you can.</p></li>
</ul>
</section>
<section id="submitting-general-comments-questions">
<h3>Submitting General Comments/Questions<a class="headerlink" href="#submitting-general-comments-questions" title="Link to this heading"></a></h3>
<p>There are several pages on the <a class="reference external" href="https://forum.generic-mapping-tools.org/">Community Forum</a>
where you can submit general comments and/or questions:</p>
<ul class="simple">
<li><p>For questions about using GMT, select <em>New Topic</em> from the
<a class="reference external" href="https://forum.generic-mapping-tools.org/c/questions/">Q&amp;A Page</a>.</p></li>
<li><p>For general comments, select <em>New Topic</em> from the
<a class="reference external" href="https://forum.generic-mapping-tools.org/c/lounge/">Lounge Page</a>.</p></li>
<li><p>To share your work, select <em>New Topic</em> from the
<a class="reference external" href="https://forum.generic-mapping-tools.org/c/Show-your-nice-example-script/">Showcase Page</a>.</p></li>
</ul>
</section>
</section>
<section id="general-guidelines">
<h2>General Guidelines<a class="headerlink" href="#general-guidelines" title="Link to this heading"></a></h2>
<section id="resources-for-new-contributors">
<h3>Resources for New Contributors<a class="headerlink" href="#resources-for-new-contributors" title="Link to this heading"></a></h3>
<p>Please take a look at these resources to learn about Git and pull requests (don’t
hesitate to <a class="reference internal" href="#getting-help"><span class="std std-ref">ask for help</span></a>):</p>
<ul class="simple">
<li><p><a class="reference external" href="https://opensource.guide/how-to-contribute/">How to Contribute to Open Source</a>.</p></li>
<li><p><a class="reference external" href="http://www.asmeurer.com/git-workflow/">Git Workflow Tutorial</a> by Aaron Meurer.</p></li>
<li><p><a class="reference external" href="https://egghead.io/courses/how-to-contribute-to-an-open-source-project-on-github">How to Contribute to an Open Source Project on GitHub</a>.</p></li>
</ul>
</section>
<section id="getting-help">
<h3>Getting Help<a class="headerlink" href="#getting-help" title="Link to this heading"></a></h3>
<p>Discussion often happens in the issues and pull requests. For general questions, you can post on the
<a class="reference external" href="https://forum.generic-mapping-tools.org/">GMT Community Forum</a>. We also host community meetings roughly monthly
to discuss GMT development, which are announced on the <a class="reference external" href="https://forum.generic-mapping-tools.org/">GMT Community Forum</a>.</p>
</section>
<section id="pull-request-workflow">
<h3>Pull Request Workflow<a class="headerlink" href="#pull-request-workflow" title="Link to this heading"></a></h3>
<p>We follow the <a class="reference external" href="http://www.asmeurer.com/git-workflow/">git pull request workflow</a> to make changes to our codebase.
Every change made goes through a pull request, even our own, so that our
<a class="reference external" href="https://en.wikipedia.org/wiki/Continuous_integration">continuous integration</a> services have a change to check that
the code is up to standards and passes all our tests. This way, the <em>master</em> branch is always stable.</p>
<section id="general-guidelines-for-making-a-pull-request-pr">
<h4>General Guidelines for Making a Pull Request (PR):<a class="headerlink" href="#general-guidelines-for-making-a-pull-request-pr" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Open an issue first</strong> describing what you want to do. If there is already an issue that matches your PR, leave a
comment there instead to let us know what you plan to do.</p></li>
<li><p>Each pull request should consist of a <strong>small</strong> and logical collection of changes.</p></li>
<li><p>Larger changes should be broken down into smaller components and integrated separately.</p></li>
<li><p>Bug fixes should be submitted in separate PRs.</p></li>
<li><p>Describe what your PR changes and <em>why</em> this is a good thing. Be as specific as you can. The PR description is how we
keep track of the changes made to the project over time.</p></li>
<li><p>Do not commit changes to files that are irrelevant to your feature or bugfix (eg: <cite>.gitignore</cite>, IDE project files, etc).</p></li>
<li><p>Write descriptive commit messages. Chris Beams has written a <a class="reference external" href="https://chris.beams.io/posts/git-commit/">guide</a> on
how to write good commit messages.</p></li>
<li><p>Be willing to accept criticism and work on improving your code; we don’t want to break other users’ code, so care
must be taken to not introduce bugs.</p></li>
<li><p>Be aware that the pull request review process is not immediate, and is generally proportional to the size of the pull
request.</p></li>
</ul>
</section>
<section id="general-process-for-pull-request-review">
<h4>General Process for Pull Request Review:<a class="headerlink" href="#general-process-for-pull-request-review" title="Link to this heading"></a></h4>
<p>After you’ve submitted a pull request, you should expect to hear at least a comment within a couple of days.
We may suggest some changes or improvements or alternatives.</p>
<p>Some things that will increase the chance that your pull request is accepted quickly:</p>
<ul class="simple">
<li><p>Write a good and detailed description of what the PR does.</p></li>
<li><p>Write tests for the code you wrote/modified.</p></li>
<li><p>Readable code is better than clever code (even with comments).</p></li>
<li><p>Write documentation for your code and leave comments explaining the <em>reason</em> behind non-obvious things.</p></li>
<li><p>Include an example of new features in the gallery or tutorials.</p></li>
</ul>
<p>Pull requests will automatically have tests run by GitHub Actions. Github will show the status of these checks on the
pull request. Try to get them all passing (green). If you have any trouble, leave a comment in the PR or
<a class="reference internal" href="#getting-help"><span class="std std-ref">get in touch</span></a>.</p>
</section>
</section>
</section>
<section id="setting-up-your-environment">
<h2>Setting up your environment<a class="headerlink" href="#setting-up-your-environment" title="Link to this heading"></a></h2>
<p>For editing the documentation locally and contributing code, you will need a development environment. To set up a
development environment, follow the steps for <a class="reference external" href="https://github.com/GenericMappingTools/gmt/blob/master/BUILDING.md">building GMT</a>
paying attention to several “Note for developers” that provide helpful or necessary information for running tests and
building the documentation.</p>
<p>To enable testing, you need to <em>uncomment</em> the following lines in your <code class="docutils literal notranslate"><span class="pre">ConfigUserAdvanced.cmake</span></code> when
<a class="reference external" href="https://github.com/GenericMappingTools/gmt/blob/master/BUILDING.md#configuring">configuring GMT</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>enable_testing<span class="o">()</span>
<span class="nb">set</span><span class="w"> </span><span class="o">(</span>DO_EXAMPLES<span class="w"> </span>TRUE<span class="o">)</span>
<span class="nb">set</span><span class="w"> </span><span class="o">(</span>DO_TESTS<span class="w"> </span>TRUE<span class="o">)</span>

<span class="nb">set</span><span class="w"> </span><span class="o">(</span>SUPPORT_EXEC_IN_BINARY_DIR<span class="w"> </span>TRUE<span class="o">)</span>

<span class="nb">set</span><span class="w"> </span><span class="o">(</span>DO_API_TESTS<span class="w"> </span>ON<span class="o">)</span>
</pre></div>
</div>
<p>Optionally, uncomment the following line to run tests on the supplement modules:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="w"> </span><span class="o">(</span>DO_SUPPLEMENT_TESTS<span class="w"> </span>ON<span class="o">)</span>
</pre></div>
</div>
<p>Optionally, uncomment the following line and change <code class="docutils literal notranslate"><span class="pre">4</span></code> to the number of ctest jobs to run simultaneously:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="w"> </span><span class="o">(</span>N_TEST_JOBS<span class="w"> </span><span class="m">4</span><span class="o">)</span>
</pre></div>
</div>
<section id="updating-the-development-source-codes">
<h3>Updating the development source codes<a class="headerlink" href="#updating-the-development-source-codes" title="Link to this heading"></a></h3>
<p>Assuming you did not delete the build directory, this is just as simple as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;path-to-gmt&gt;
git<span class="w"> </span>pull
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>--build<span class="w"> </span>.
cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>install
</pre></div>
</div>
<p>CMake will detect any changes to the source files and will automatically reconfigure. If you deleted all files inside
the build directory you have to run CMake again manually.</p>
</section>
<section id="using-build-and-test-aliases">
<h3>Using build and test aliases<a class="headerlink" href="#using-build-and-test-aliases" title="Link to this heading"></a></h3>
<p>The file <code class="docutils literal notranslate"><span class="pre">/admin/bashrc_for_gmt</span></code> contains useful aliases for building and testing GMT that some developers chose to
use. New pull requests with other aliases that you find helpful are welcome. This file is version controlled, so you
should copy the file to a different location in order to edit and use it. For example, use these commands to copy it to
your home directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;path-to-gmt&gt;
cp<span class="w"> </span>admin/bashrc_for_gmt<span class="w"> </span>~/.bashrc_for_gmt
</pre></div>
</div>
<p>Here are the steps for setting up <code class="docutils literal notranslate"><span class="pre">bashrc_for_gmt</span></code> after copying it to a new location:</p>
<ul class="simple">
<li><p>If you do not have <a class="reference external" href="https://ninja-build.org/">ninja</a> installed, you will need to change <code class="docutils literal notranslate"><span class="pre">builder=ninja</span></code> to
<code class="docutils literal notranslate"><span class="pre">builder=make</span></code> and <code class="docutils literal notranslate"><span class="pre">Bname=&quot;Ninja&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">Bname=&quot;Unix</span> <span class="pre">Makefiles&quot;</span></code>. Ninja is recommended for speeding up build times.</p></li>
<li><p>You may need to update <code class="docutils literal notranslate"><span class="pre">pngview=open</span></code> and <code class="docutils literal notranslate"><span class="pre">pdfview=open</span></code> depending on your preferred program for viewing files.</p></li>
<li><p>Optionally, change <code class="docutils literal notranslate"><span class="pre">ncores=4</span></code> to the number of cores to use for building and running tests.</p></li>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">MATLAB=/Applications/MATLAB_R2019a.app</span></code> to the path for your version of the MATLAB app.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">REPO_DIR</span></code> to the path that contains the local <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> copy of the GMT repository.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">DATA_DIR</span></code> to the path that contains the folders <code class="docutils literal notranslate"><span class="pre">dcw-gmt-2.0.0/</span></code> and <code class="docutils literal notranslate"><span class="pre">gshhg-gmt-2.3.7/</span></code> for the dcw and gshhg
datasets respectively. If these folders are not located in the same path, you can instead delete the line
(<code class="docutils literal notranslate"><span class="pre">DATA_DIR=&lt;path</span> <span class="pre">to</span> <span class="pre">directory</span> <span class="pre">containing</span> <span class="pre">GSHHG</span> <span class="pre">and</span> <span class="pre">DCW&gt;</span></code>) and set the individual paths to the GSHHG and DCW source
by changing (<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GMT_GSHHG_SOURCE=${DATA_DIR}/gshhg-gmt-2.3.7</span></code>) and (<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GMT_DCW_SOURCE=${DATA_DIR}/dcw-gmt-2.0.0</span></code>).</p></li>
<li><p>Edit the file <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> to include the line <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">&lt;path&gt;/bashrc_for_gmt</span></code>. If you set up <code class="docutils literal notranslate"><span class="pre">bashrc_for_gmt</span></code> as a
hidden file in your home directory, this line should be <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc_for_gmt</span></code>.</p></li>
</ul>
<p>Here are some of the shortcuts included in <code class="docutils literal notranslate"><span class="pre">bashrc_for_gmt</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gmt6</span></code> and <code class="docutils literal notranslate"><span class="pre">gtop</span></code> can be used to quickly <code class="docutils literal notranslate"><span class="pre">cd</span></code> to the top of the GMT source directory and repository base respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gmtfind</span></code> can be used to list all source, docs, scripts, and text files where a string appears in the file
(e.g., <code class="docutils literal notranslate"><span class="pre">gmtfind</span> <span class="pre">&quot;Grid</span> <span class="pre">increment</span> <span class="pre">is&quot;</span></code> returns all files that contain the string ‘Grid increment is’). This includes all
files recursively from the current working directory; <code class="docutils literal notranslate"><span class="pre">gtop</span></code> or <code class="docutils literal notranslate"><span class="pre">gmt6</span></code> can be used prior to this command to get
to the source directory or repository base.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmakegmtd</span></code>, <code class="docutils literal notranslate"><span class="pre">cmakegmtr</span></code>, and <code class="docutils literal notranslate"><span class="pre">cmakegmtx</span></code> configures cmake for debug, release, and XCode debug respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dlog</span></code> and <code class="docutils literal notranslate"><span class="pre">rlog</span></code> can be used to open the debug and release build check error logs respectively.</p></li>
<li><p>There are several aliases with various combinations of pulling new changes, deleting the build directories,
configuring cmake, and building the source code. Each of these are documented with comments in <code class="docutils literal notranslate"><span class="pre">bashrc_for_gmt</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checkdbuild</span></code> and <code class="docutils literal notranslate"><span class="pre">checkrbuild</span></code> can be used to run the tests for the debug and release builds respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vpngdbuild</span></code> and <code class="docutils literal notranslate"><span class="pre">vpdfdbuild</span></code> can be used to open the results from all failing image-based tests.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">view_png_failures_r</span></code> and <code class="docutils literal notranslate"><span class="pre">view_pdf_failures_r</span></code> can be used for view failures of the release build with a lag between
opening each file.</p></li>
</ul>
</section>
</section>
<section id="contributing-documentation">
<h2>Contributing Documentation<a class="headerlink" href="#contributing-documentation" title="Link to this heading"></a></h2>
<p>If you’re browsing the documentation and notice a typo or something that could be improved, please consider letting us
know. You can either <a class="reference internal" href="#reporting-a-bug"><span class="std std-ref">create an issue</span></a> on GitHub, or click the “Edit on GitHub” button
at the top right corner of the documentation, and submit a pull request.</p>
<p>The GMT documentation is written in the plaintext markup language
<a class="reference external" href="https://docutils.sourceforge.io/rst.html">reStructuredText (reST)</a> and built
by documentation generator <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a>.
The reST plaintext files for the GMT documentation are located in the <a class="reference external" href="https://github.com/GenericMappingTools/gmt/tree/master/doc/rst/source">doc/rst/source</a> folder.
You may need to know some basic reST syntax before making changes. Please refer to our
<a class="reference internal" href="rst-cheatsheet.html#restructuredtext-cheatsheet"><span class="std std-ref">reStructuredText Cheatsheet</span></a> for details.</p>
<section id="building-the-documentation">
<h3>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Link to this heading"></a></h3>
<p>Usually you don’t need to build the documentation locally for small changes. To build the GMT documentation you
need to <a class="reference external" href="https://github.com/GenericMappingTools/gmt/tree/master/BUILDING.md">build GMT from source</a>. Be sure
to also satisfy the
<a class="reference external" href="https://github.com/GenericMappingTools/gmt/tree/master/BUILDING.md#development-dependencies">development dependencies</a>
before proceeding. Have a look at the options in <code class="docutils literal notranslate"><span class="pre">cmake/ConfigUserAdvanced.cmake</span></code> if you want to change the
target directory for the documentation you are about to build.</p>
<p>To build the documentation, you also need to install some Python packages (the Sphinx theme and extensions). These packages are listed in <code class="docutils literal notranslate"><span class="pre">doc/rst/requirements.txt</span></code> and can be installed via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>doc/rst/requirements.txt
</pre></div>
</div>
<p>After <a class="reference external" href="https://github.com/GenericMappingTools/gmt/tree/master/BUILDING.md">configuring and building GMT from source</a>,
you can then build the GMT documentation using the following commands within the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dvc<span class="w"> </span>pull
cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>docs_depends<span class="w">     </span><span class="c1"># Generate images included in the documentation</span>
cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>optimize_images<span class="w">  </span><span class="c1"># Optimize PNG images for documentation [optional]</span>
cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>docs_man<span class="w">         </span><span class="c1"># Build UNIX manual pages</span>
cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>docs_html<span class="w">        </span><span class="c1"># Build HTML manual, tutorial, cookbook, and API reference</span>
</pre></div>
</div>
<p>To install the UNIX manpages and html documentation into the specified location (along with the gmt executable, library, development headers and built-in data), use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>install
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Refer to the file <code class="docutils literal notranslate"><span class="pre">admin/bashrc_for_gmt</span></code> for useful aliases for building the documentation.</p></li>
<li><p><a class="reference external" href="https://pngquant.org/">pngquant</a> is needed for optimizing images.</p></li>
</ul>
</div>
</section>
<section id="contributing-an-animation">
<h3>Contributing an animation<a class="headerlink" href="#contributing-an-animation" title="Link to this heading"></a></h3>
<p>The animations are built from the scripts in <code class="docutils literal notranslate"><span class="pre">doc/examples/anim*/</span></code>. To add a new animation:</p>
<ul>
<li><p>Open an <a class="reference external" href="https://github.com/GenericMappingTools/gmt/issues">issue</a> with your idea for a new animation. It is best to
get some feedback on your idea before starting work on the animation. If you do have an animation already made, you
can share it as part of the new issue.</p></li>
<li><p>Create a new script <code class="docutils literal notranslate"><span class="pre">doc/examples/anim??/anim??.sh</span></code>, where ?? is the number of the new example. Be sure to follow the
style of the existing animations, including using <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">bash</span></code> and including the purpose, list of modules
and unix programs used, and any relevant notes. Use enough comments in your script to make it easily interpretable.</p></li>
<li><p>Create a new ReStructured Text document <code class="docutils literal notranslate"><span class="pre">doc/rst/source/animations/anim??.rst</span></code>, where ?? is the number of the new
example. Follow the same format as the other anim??.rst files, including the ReST target <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">_anim??:</span></code> at the top,
a title, and a description of the animation.</p></li>
<li><p>Add a directive that will include the source code in the built documentation in <code class="docutils literal notranslate"><span class="pre">doc/rst/source/animations/anim??.rst</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>..<span class="w"> </span>literalinclude::<span class="w"> </span>/_verbatim/anim??.txt
<span class="w">  </span>:language:<span class="w"> </span>bash
</pre></div>
</div>
</li>
<li><p>Add a placeholder <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">youtube::</span></code> directive to the <code class="docutils literal notranslate"><span class="pre">doc/rst/source/animations/anim??.rst</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>..<span class="w">  </span>youtube::<span class="w"> </span>Pvvc4vb8G4Y
<span class="w">  </span>:width:<span class="w"> </span><span class="m">100</span>%
</pre></div>
</div>
</li>
<li><p>Add a placeholder gallery item to the end of the list of animations in <code class="docutils literal notranslate"><span class="pre">doc/rst/source/animations.rst</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>..<span class="w"> </span>youtube::<span class="w"> </span>Pvvc4vb8G4Y
<span class="w">  </span>:width:<span class="w"> </span><span class="m">100</span>%

<span class="w">  </span>:doc:<span class="sb">`</span>/animations/anim??<span class="sb">`</span>
</pre></div>
</div>
</li>
<li><p><a class="reference internal" href="#pull-request-workflow"><span class="std std-ref">Submit a pull request</span></a> with your new animation. Please be sure
to follow the pull request template and include the built animation in the pull request or provide a link to the built
animation.</p></li>
<li><p>If the pull request is approved, one of the GMT maintainers will build the animation, upload it to the
<a class="reference external" href="https://www.youtube.com/channel/UCo1drOh0OZPcB7S8TmIyf8Q">Generic Mapping Tools YouTube channel</a>, and update the
links to the YouTube video in <code class="docutils literal notranslate"><span class="pre">doc/rst/source/animations/anim??.rst</span></code> and <code class="docutils literal notranslate"><span class="pre">doc/rst/source/animations.rst</span></code>.</p></li>
</ul>
</section>
</section>
<section id="contributing-code">
<h2>Contributing Code<a class="headerlink" href="#contributing-code" title="Link to this heading"></a></h2>
<p>The source code for GMT is locating in the <a class="reference external" href="https://github.com/GenericMappingTools/gmt/tree/master/src">src/</a> directory.
When contributing code, be sure to follow the general guidelines in the
<a class="reference internal" href="#pull-request-workflow"><span class="std std-ref">pull request workflow</span></a> section.</p>
<section id="code-style">
<h3>Code Style<a class="headerlink" href="#code-style" title="Link to this heading"></a></h3>
<p>When modifying or submitting new source code, make sure that your code follows the GMT code style. Use the other
functions/files in the <a class="reference external" href="https://github.com/GenericMappingTools/gmt/tree/master/src">src/</a> directory as a basis.
Here are some specific guidelines:</p>
<ul class="simple">
<li><p>Use tabs, rather than spaces, for indentation.</p></li>
<li><p>Try to split lines at ~120 characters.</p></li>
</ul>
</section>
<section id="testing-gmt">
<h3>Testing GMT<a class="headerlink" href="#testing-gmt" title="Link to this heading"></a></h3>
<p>GMT ships with more than 1000 tests to make sure that any changes won’t break its functionality. In addition to the
tests located in the <code class="docutils literal notranslate"><span class="pre">test/</span></code> directory, GMT tests all the plots included in its documentation. The
documentation tests are located in the <code class="docutils literal notranslate"><span class="pre">doc/scripts/</span></code> and <code class="docutils literal notranslate"><span class="pre">doc/examples/</span></code> directories. The majority of GMT tests
are plot-based, with each test requiring a bash script for generating the plot and a reference PostScript file. These
tests pass if the difference between a new plot generated using the test script and the reference PostScript file is
less than a defined threshold. Other tests compute grids, tables, or other output, with the test passing if a suitable
comparison is made against a reference case.</p>
<p>Tests that are known to fail are excluded by adding <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">GMT_KNOWN_FAILURE</span></code> anywhere in the test script. Tests that
require a larger tolerance than the default RMS threshold are managed using <code class="docutils literal notranslate"><span class="pre">GRAPHICSMAGICK_RMS</span> <span class="pre">=</span> <span class="pre">&lt;RMS&gt;</span></code> in the
test script. These tests are tracked in <a class="reference external" href="https://github.com/GenericMappingTools/gmt/issues/2458">GitHub issue #2458</a>.</p>
<section id="managing-test-images-using-data-version-control-dvc">
<h4>Managing Test Images Using Data Version Control (dvc)<a class="headerlink" href="#managing-test-images-using-data-version-control-dvc" title="Link to this heading"></a></h4>
<p>As the baseline images are large blob files that can change often, it is not ideal to store them in <code class="docutils literal notranslate"><span class="pre">git</span></code>. Instead,
we use <a class="reference external" href="https://dvc.org/">data version control (dvc)</a> to track the test images, which is like <code class="docutils literal notranslate"><span class="pre">git</span></code> but for data.
<code class="docutils literal notranslate"><span class="pre">dvc</span></code> stores the hash (md5sum) of a file or an md5sum that describes the contents of a directory. For each test
<code class="docutils literal notranslate"><span class="pre">test/&lt;module&gt;/*.sh</span></code> that generates a .PS file, there is a baseline image file in <code class="docutils literal notranslate"><span class="pre">test/baseline/&lt;module&gt;/</span></code>
that is compared to the test result using <a class="reference external" href="http://www.graphicsmagick.org/">GraphicsMagick</a>. Each of the
directories <code class="docutils literal notranslate"><span class="pre">test/baseline/&lt;module&gt;</span></code> are tracked by <code class="docutils literal notranslate"><span class="pre">dvc</span></code> using the file <code class="docutils literal notranslate"><span class="pre">test/baseline/&lt;module&gt;.dvc</span></code>. This file
contains the hash of a JSON .dir file stored in the .dvc cache. The .dir file contains information about each tracked
file in the directory, which is used to push/pull the files to/from remote storage. The <code class="docutils literal notranslate"><span class="pre">test/baseline/&lt;module&gt;.dvc</span></code>
files are stored as usual on GitHub, while the .PS files are stored separately on the <code class="docutils literal notranslate"><span class="pre">dvc</span></code> remote at
<a class="reference external" href="https://dagshub.com/GenericMappingTools/gmt">https://dagshub.com/GenericMappingTools/gmt</a>.</p>
<section id="setting-up-your-local-environment-for-dvc">
<h5>Setting up your local environment for dvc<a class="headerlink" href="#setting-up-your-local-environment-for-dvc" title="Link to this heading"></a></h5>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://dvc.org/doc/install">Install dvc</a></p></li>
<li><p>If you will need to push baseline images to the remote, ask a GMT maintainer to add you as a collaborator on
<a class="reference external" href="https://dagshub.com/GenericMappingTools/gmt">DAGsHub</a>.</p></li>
<li><p>If you will need to push baseline imaged to the remote, set up
<a class="reference external" href="https://dagshub.com/docs/feature_guide/dagshub_storage/#pushing-files-or-using-a-private-repo">authentication for the DVC remote</a>.</p></li>
</ol>
</section>
<section id="pulling-files-from-the-remote-for-testing">
<h5>Pulling files from the remote for testing<a class="headerlink" href="#pulling-files-from-the-remote-for-testing" title="Link to this heading"></a></h5>
<p>To pull or sync files from the <code class="docutils literal notranslate"><span class="pre">dvc</span></code> remote to your local repository, the commands are similar to <code class="docutils literal notranslate"><span class="pre">git</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dvc<span class="w"> </span>status<span class="w">  </span><span class="c1"># should report any files &#39;not_in_cache&#39;</span>
dvc<span class="w"> </span>pull<span class="w">    </span><span class="c1"># pull down files from DVC remote cache (fetch + checkout)</span>
</pre></div>
</div>
<p>Once the sync is complete, you should notice that there are images stored in the <code class="docutils literal notranslate"><span class="pre">test/baseline/&lt;module&gt;</span></code>
directories (e.g., <code class="docutils literal notranslate"><span class="pre">test/baseline/api/api_matrix_as_grid.ps</span></code>). These images are technically reflinks/symlinks/copies
of the files under the <code class="docutils literal notranslate"><span class="pre">.dvc/cache</span></code> directory. You can now run the test suite as usual.</p>
</section>
</section>
<section id="running-tests">
<h4>Running tests<a class="headerlink" href="#running-tests" title="Link to this heading"></a></h4>
<p>First, pull any baseline images stored in the DAGsHub repository using dvc:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dvc<span class="w"> </span>pull
</pre></div>
</div>
<p>After configuring CMake and building GMT, you can run all the tests by running this command in the build directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>check
</pre></div>
</div>
<p>You can also run <code class="docutils literal notranslate"><span class="pre">ctest</span></code> commands in the build directory. Below are some common used ctest commands.</p>
<ul>
<li><p>Run all tests in 4 parallel jobs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest<span class="w"> </span>-j<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
</li>
<li><p>Re-run all failing tests in previous run in 4 parallel jobs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest<span class="w"> </span>-j<span class="w"> </span><span class="m">4</span><span class="w"> </span>--rerun-failed
</pre></div>
</div>
</li>
<li><p>Select individual tests using regexp with ctest:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest<span class="w"> </span>--output-on-failure<span class="w"> </span>-R<span class="w"> </span>ex2<span class="o">[</span><span class="m">3</span>-6<span class="o">]</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Refer to the file <code class="docutils literal notranslate"><span class="pre">admin/bashrc_for_gmt</span></code> for useful aliases for running the tests.</p>
</div>
</section>
<section id="reviewing-test-failures">
<h4>Reviewing test failures<a class="headerlink" href="#reviewing-test-failures" title="Link to this heading"></a></h4>
<p>There are several tests that are “known to fail” for GMT. Unless the <code class="docutils literal notranslate"><span class="pre">GMT_ENABLE_KNOWN2FAIL</span></code> variable is set when
configuring CMake or setting up <code class="docutils literal notranslate"><span class="pre">ConfigUserAdvanced.cmake</span></code>, these tests are excluded when running ctest using the
instructions provided in the <a class="reference internal" href="#running-tests"><span class="std std-ref">Running tests</span></a> section. Therefore, you should
expect all tests to pass unless something new is broken.</p>
<p>Information about failing tests is produced in <code class="docutils literal notranslate"><span class="pre">test/fail_count.txt</span></code> inside the build directory. For plot-based tests,
the subdirectories <code class="docutils literal notranslate"><span class="pre">test/</span></code>, <code class="docutils literal notranslate"><span class="pre">doc/scripts/</span></code>, and <code class="docutils literal notranslate"><span class="pre">doc/examples/</span></code> inside the build directory contain folders for
each failing test. For plot-based tests, the directory associated with each failing tests contains a <code class="docutils literal notranslate"><span class="pre">gmtest.sh</span></code>
script, a <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> file, an alias to the test script, a PostScript file and PDF document generated by the test
script, and a PNG image that shows differences between the reference plot and new plot in magenta. In addition to these
files, running the failing tests with verbose output can be helpful for evaluating failures:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest<span class="w"> </span>--rerun-failed<span class="w"> </span>--verbose
</pre></div>
</div>
</section>
<section id="updating-reference-plots-for-tests">
<h4>Updating reference plots for tests<a class="headerlink" href="#updating-reference-plots-for-tests" title="Link to this heading"></a></h4>
<p>Pull requests should avoid needing to change PostScript files in the <code class="docutils literal notranslate"><span class="pre">test/baseline/</span></code>, <code class="docutils literal notranslate"><span class="pre">doc/scripts/images/</span></code>, and
<code class="docutils literal notranslate"><span class="pre">doc/examples/images/</span></code> directories. However, if this is unavoidable, new PostScript reference files can be generated
using the following steps:</p>
<ul class="simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">pull</span></code> to ensure that you have the latest versions of the images.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">ctest</span> <span class="pre">-R</span> <span class="pre">&lt;test-script-name&gt;</span></code> in the build directory after following the
<a class="reference external" href="https://github.com/GenericMappingTools/gmt/tree/master/BUILDING.md">building guide</a>, the
<a class="reference internal" href="#setting-up-your-environment"><span class="std std-ref">setting up your environment</span></a> instructions, and the
<a class="reference internal" href="#running-tests"><span class="std std-ref">running tests</span></a> instructions.</p></li>
<li><p>Copy the modified PostScript file from the appropriate subdirectory within <code class="docutils literal notranslate"><span class="pre">build/test/</span></code>, <code class="docutils literal notranslate"><span class="pre">build/doc/scripts/</span></code>, or
<code class="docutils literal notranslate"><span class="pre">build/doc/examples/</span></code> to <code class="docutils literal notranslate"><span class="pre">test/baseline/&lt;module&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">doc/scripts/images/</span></code>, or <code class="docutils literal notranslate"><span class="pre">doc/examples/images/</span></code> respectively.</p></li>
<li><p>Run the tests to ensure that the failing tests now pass.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">diff</span></code> to check that modified files are in the correct directory.</p></li>
<li><p>Add the modified images to dvc using <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">test/baseline/&lt;module&gt;/&lt;newplot.ps&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">doc/scripts/images/&lt;newplot.ps&gt;</span></code>,
or <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">doc/examples/images/&lt;newplot.ps&gt;</span></code>
depending on the type of test modified. Run one dvc add command per updated PostScript plot.</p></li>
<li><p>Check that the .dvc file was updated by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>.</p></li>
<li><p>Stage the modified .dvc files in git using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">test/baseline/&lt;module&gt;/&lt;newplot.ps&gt;.dvc</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">doc/scripts/images/&lt;newplot.ps&gt;.dvc</span></code>,
or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">doc/examples/images/&lt;newplot.ps&gt;.dvc</span></code>, again per updated file.</p></li>
<li><p>Commit the changes using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.</p></li>
<li><p>Open a pull request on GitHub with your changes.</p></li>
<li><p>Push the new images to the DAGsHub repository using <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">push</span></code>. Optionally, use <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">status</span> <span class="pre">--remote</span> <span class="pre">origin</span></code> first
to query the diff between your local environment and the remote repository.</p></li>
</ul>
</section>
<section id="adding-new-tests">
<h4>Adding new tests<a class="headerlink" href="#adding-new-tests" title="Link to this heading"></a></h4>
<p>If you are fixing a bug or adding a new feature, you should add a test with your pull request. Most of the tests are
image based and compare a result against a reference PostScript file using <a class="reference external" href="http://www.graphicsmagick.org/">GraphicsMagick</a>.</p>
<p>To add a PostScript based test (e.g., <a class="reference external" href="https://github.com/GenericMappingTools/gmt/blob/master/test/modern/box.sh">box.sh</a>):</p>
<ul class="simple">
<li><p>Create a new shell script in the subdirectory under <code class="docutils literal notranslate"><span class="pre">test/</span></code> that corresponds to the module you are testing. The
name of the shell script should be descriptive and unique.</p></li>
<li><p>Include <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">bash</span></code> and a short description of the test at the top of the script.</p></li>
<li><p>Add the content of the script that will create a PostScript file (here just called &lt;newplot.ps&gt;). Some general guidelines:</p>
<ul>
<li><p>Use as small a dataset as possible. See the
<a class="reference external" href="https://github.com/GenericMappingTools/gmtserver-admin/tree/master/cache">GMT server cache</a> for some example
datasets that can be used.</p></li>
<li><p>Keep the script as simple as possible, with as few commands and options as needed to test the feature, enhancement,
or bug fix.</p></li>
<li><p>Minimize the size of the resultant PostScript file as much as possible.</p></li>
</ul>
</li>
<li><p>Run the tests using the instructions in the <a class="reference internal" href="#running-tests"><span class="std std-ref">running tests</span></a> section.</p></li>
<li><p>Check that the new PostScript file in <code class="docutils literal notranslate"><span class="pre">build/test/&lt;module&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">build/doc/scripts/</span></code> is as-expected.</p></li>
<li><p>Copy the new PostScript file from the appropriate subdirectory within <code class="docutils literal notranslate"><span class="pre">build/test/</span></code>, <code class="docutils literal notranslate"><span class="pre">build/doc/scripts/</span></code>, or
<code class="docutils literal notranslate"><span class="pre">build/doc/examples/</span></code> to <code class="docutils literal notranslate"><span class="pre">test/baseline/&lt;module&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">doc/scripts/images/</span></code>, or <code class="docutils literal notranslate"><span class="pre">doc/examples/images/</span></code> respectively.</p></li>
<li><p>Run the tests to ensure that the new test passes.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">diff</span></code> to check that the new file is in the correct directory.</p></li>
<li><p>For the first test of a module, you add the directory via <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">test/baseline/&lt;module&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">doc/scripts/images</span></code>,
or <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">doc/scripts/examples</span></code>. For later addition you do so per file, e.g. <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">test/baseline/&lt;module&gt;/&lt;newplot.ps&gt;</span></code>,
<code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">doc/scripts/images/&lt;newplot.ps&gt;</span></code>, or <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">add</span> <span class="pre">doc/scripts/examples/&lt;newplot.ps&gt;</span></code>
depending on the type of test modified.</p></li>
<li><p>Check that the .dvc file was updated by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>.</p></li>
<li><p>Add the modified .dvc file to git using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">test/baseline/&lt;module&gt;/&lt;newplot.ps&gt;.dvc</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">doc/scripts/images/&lt;newplot.ps&gt;.dvc</span></code>, or
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">doc/examples/images/&lt;newplot.ps&gt;.dvc</span></code>.</p></li>
<li><p>Commit the changes using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.</p></li>
<li><p>Open a pull request on GitHub with your changes.</p></li>
<li><p>Push the new images to the DAGsHub repository using <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">push</span></code>. Optionally, use <code class="docutils literal notranslate"><span class="pre">dvc</span> <span class="pre">status</span> <span class="pre">--remote</span> <span class="pre">origin</span></code> first
to query the diff between your local environment and the remote repository.</p></li>
</ul>
<p>To add a non-PostScript based test (e.g., <a class="reference external" href="https://github.com/GenericMappingTools/gmt/blob/master/test/blockmean/gmean.sh">gmean.sh</a>):</p>
<ul class="simple">
<li><p>Create a new shell script in the subdirectory under <code class="docutils literal notranslate"><span class="pre">test/</span></code> that corresponds to the module you are testing. The
name of the shell script should be descriptive and unique.</p></li>
<li><p>Include <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">bash</span></code> and a short description of the test at the top of the script.</p></li>
<li><p>Structure the test so that it produced both a reference file with the expected output (e.g., using <code class="docutils literal notranslate"><span class="pre">echo</span></code> or <code class="docutils literal notranslate"><span class="pre">cat</span></code>)
in a file <code class="docutils literal notranslate"><span class="pre">answer.txt</span></code> (for a text-based case) and the test output from gmt in a file <code class="docutils literal notranslate"><span class="pre">result.txt</span></code>.</p></li>
<li><p>Add a <code class="docutils literal notranslate"><span class="pre">diff`</span> <span class="pre">command</span> <span class="pre">that</span> <span class="pre">will</span> <span class="pre">compare</span> <span class="pre">the</span> <span class="pre">``result.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">answer.txt</span></code> files and create a file <code class="docutils literal notranslate"><span class="pre">fail</span></code> if the
files do not match (e.g., <code class="docutils literal notranslate"><span class="pre">diff</span> <span class="pre">-q</span> <span class="pre">--strip-trailing-cr</span> <span class="pre">answer.txt</span> <span class="pre">result.txt</span> <span class="pre">&gt;</span> <span class="pre">fail</span></code>).</p></li>
<li><p>Check that your new test works using the instructions in the <a class="reference internal" href="#running-tests"><span class="std std-ref">running tests</span></a>
section.</p></li>
</ul>
</section>
</section>
<section id="debugging-gmt">
<h3>Debugging GMT<a class="headerlink" href="#debugging-gmt" title="Link to this heading"></a></h3>
<p>Guides for debugging GMT are provided in the <a class="reference internal" href="debug.html"><span class="doc">Debugging GMT</span></a> section of the GMT documentation.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../migrating.html" class="btn btn-neutral float-left" title="Migrating from an Earlier Version" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="maintenance.html" class="btn btn-neutral float-right" title="Maintainers Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The GMT Team.
      <span class="lastupdated">Last updated on Nov 01, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>