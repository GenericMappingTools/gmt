
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>(32) Draping an image over topography &mdash; GMT 6.7.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=32d919f4" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=9cce70e7"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show example script';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../_static/design-tabs.js?v=f930bc37"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="(33) Stacking automatically generated cross-profiles" href="ex33.html" />
    <link rel="prev" title="(31) Using non-default fonts in PostScript" href="ex31.html" />


  <!-- Point to the *latest* version switcher. This will allow the latest versions to appear on older documentation. -->
  <script type="text/javascript" src="/latest/_static/version_switch.js"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            GMT
          </a>
              <div class="version">
                6.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Illustration Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../animations.html">Animation Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Technical Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules-classic.html">Modules (Classic Mode)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-contrib-symbols.html">Users Symbol Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecated-defaults.html">Deprecated GMT Defaults Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="../switching.html">Switching between Different Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrating.html">Migrating from an Earlier Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/contributing.html">Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/maintenance.html">Maintainers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/team.html">Team Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/rst-cheatsheet.html">reStructuredText Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/debug.html">Debugging GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/api.html">GMT C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/postscriptlight.html">PostScriptLight C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/devdocs.html">GMT Enhancement Proposals</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://www.generic-mapping-tools.org/"><i class="fa fa-home fa-fw"></i> GMT Homepage</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org/"><i class="fa fa-comment fa-fw"></i> GMT Community Forum</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt/blob/master/LICENSE.TXT"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
                <li class="toctree-l1"><a href="/dev/gmt-docs-dev.zip"><i class="fa fa-download fa-fw"></i> Documentation HTML zip</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../gallery.html">Illustration Gallery</a></li>
      <li class="breadcrumb-item active">(32) Draping an image over topography</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/GenericMappingTools/gmt/edit/master/doc/rst/source/gallery/ex32.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="draping-an-image-over-topography">
<span id="example-32"></span><h1>(32) Draping an image over topography<a class="headerlink" href="#draping-an-image-over-topography" title="Link to this heading"></a></h1>
<p>In some cases, it is nice to “drape” an arbitrary image over a
topographic map. We have already seen how to use
<a class="reference internal" href="../image.html"><span class="doc">image</span></a> to plot an image anywhere in
our plot. But here our aim is different, we want to manipulate an image
to shade it and plot it in 3-D over topography. This example was
originally created by Stephan Eickschen for a flyer emphasizing the
historical economical and cultural bond between Brussels, Maastricht and
Bonn. Obviously, the flag of the European Union came to mind as a good
“background”.</p>
<p>To avoid adding large files to this example, some steps have been
already done. First we get the EU flag directly from the web and convert
it to a grid with values ranging from 0 to 255, where the higher values
will become yellow and the lower values blue. Then,
<a class="reference internal" href="../grdedit.html"><span class="doc">grdedit</span></a> adds the right grid dimension.</p>
<p>The second step is to reformat the GTOPO30 DEM file to a netCDF grid as
well and then subsample it at the same pixels as the EU flag. We then
illuminate the topography grid so we can use it later to emphasize the
topography. The colors that we will use are those of the proper flag.
Lower values will become blue and the upper values yellow.</p>
<p>The call the <a class="reference internal" href="../grdview.html"><span class="doc">grdview</span></a> plots a
topography map of northwest continental Europe, with the flagged draped
over it and with shading to show the little topography there is.
<a class="reference internal" href="../coast.html"><span class="doc">coast</span></a> is used in conjunction with
<a class="reference internal" href="../grdtrack.html"><span class="doc">grdtrack</span></a> and <a class="reference internal" href="../plot3d.html"><span class="doc">plot3d</span></a> to plot
borders “at altitude”. Something similar is done at the end to plot some
symbols and names for cities.</p>
<p>The script produces the plot in the Figure <cite>fig_ex32</cite>. Note
that the PNG image of the flag can be downloaded directly in the call
the <a class="reference internal" href="../grdconvert.html"><span class="doc">grdconvert</span></a>, but we have
commented that out in the example. You will also see the
<a class="reference internal" href="../grdcut.html"><span class="doc">grdcut</span></a> command commented out because we
did not want to store the 58 MB DEM file, whose location is mentioned in the script.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="c1">#		GMT EXAMPLE 32</span>
<span class="c1">#</span>
<span class="c1"># Purpose:	Illustrate draping of an image over topography</span>
<span class="c1"># GMT modules:	grdcut, grdedit, grdgradient, grdconvert, grdtrack, grdview</span>
<span class="c1"># GMT modules:	coast, text, plot3d, makecpt</span>
<span class="c1"># Unix progs:	cat, rm</span>
<span class="c1"># Credits:	Original by Stephan Eickschen</span>
<span class="c1">#</span>
gmt<span class="w"> </span>begin<span class="w"> </span>ex32
<span class="w">	</span><span class="c1"># Here we get and convert the flag of Europe directly from the web through grdconvert using</span>
<span class="w">	</span><span class="c1"># GDAL support. We take into account the dimension of the flag (1000x667 pixels)</span>
<span class="w">	</span><span class="c1"># for a ratio of 3x2.</span>
<span class="w">	</span><span class="c1"># So simplify this example, we have stored the result, @euflag.nc in this directory.</span>

<span class="w">	</span><span class="nv">Rflag</span><span class="o">=</span>-R3/9/50/54
<span class="w">	</span><span class="c1"># gmt grdconvert \</span>
<span class="w">	</span><span class="c1">#   http://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Flag_of_Europe.svg/1000px-Flag_of_Europe.svg.png=gd \</span>
<span class="w">	</span><span class="c1">#   euflag.nc=ns</span>
<span class="w">	</span><span class="c1"># gmt grdedit euflag.nc -fg $Rflag</span>

<span class="w">	</span><span class="c1"># Now get the topography for the same area, mask out the oceans and store it as topo_32.nc.</span>

<span class="w">	</span>gmt<span class="w"> </span>grdcut<span class="w"> </span>@earth_relief_30s_p<span class="w"> </span><span class="nv">$Rflag</span><span class="w"> </span>-Gtopo_32.nc<span class="o">=</span>ns
<span class="w">	</span>gmt<span class="w"> </span>grdcut<span class="w"> </span>@earth_mask_30s_p<span class="w"> </span><span class="nv">$Rflag</span><span class="w"> </span>-Gmask_32.nc<span class="o">=</span>ns
<span class="w">	</span>gmt<span class="w"> </span>grdmath<span class="w"> </span>topo_32.nc<span class="w"> </span>mask_32.nc<span class="w"> </span><span class="m">0</span><span class="w"> </span>GT<span class="w"> </span><span class="m">0</span><span class="w"> </span>NAN<span class="w"> </span><span class="nv">MUL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>topo_32.nc

<span class="w">	</span><span class="c1"># The color map assigns &quot;Reflex Blue&quot; to the lower half of the 0-255 range and</span>
<span class="w">	</span><span class="c1"># &quot;Yellow&quot; to the upper half.</span>
<span class="w">	</span>gmt<span class="w"> </span>makecpt<span class="w"> </span>-C0/51/153,255/204/0<span class="w"> </span>-T0,127,255<span class="w"> </span>-N

<span class="w">	</span><span class="c1"># The next step is the plotting of the image.</span>
<span class="w">	</span><span class="c1"># We use gmt grdview to plot the topography, euflag.nc to give the color, and an illumination</span>
<span class="w">	</span><span class="c1"># from the azimuthal directions 0° (north) and 270° (west) with a normalization via a cumulative</span>
<span class="w">	</span><span class="c1"># Laplace distribution for the shading.</span>
<span class="w">	</span><span class="nv">Rplot</span><span class="o">=</span><span class="nv">$Rflag</span>/-10/790
<span class="w">	</span>gmt<span class="w"> </span>grdview<span class="w"> </span>topo_32.nc<span class="w"> </span>-JM13c<span class="w"> </span><span class="nv">$Rplot</span><span class="w"> </span>-C<span class="w"> </span>-G@euflag.nc<span class="w"> </span>-I+a0/270+ne0.6<span class="w"> </span>-Qc<span class="w"> </span>-JZ1c<span class="w"> </span>-p157.5/30

<span class="w">	</span><span class="c1"># We now add borders. Because we have a 3-D plot, we want them to be plotted &quot;at elevation&quot;.</span>
<span class="w">	</span><span class="c1"># So we write out the borders, pipe them through grdtrack and then plot them with plot3d.</span>
<span class="w">	</span>gmt<span class="w"> </span>coast<span class="w"> </span><span class="nv">$Rflag</span><span class="w"> </span>-Df<span class="w"> </span>-M<span class="w"> </span>-N1<span class="w"> </span><span class="p">|</span><span class="w"> </span>gmt<span class="w"> </span>grdtrack<span class="w"> </span>-Gtopo_32.nc<span class="w"> </span>-s+a<span class="w"> </span><span class="p">|</span><span class="w"> </span>gmt<span class="w"> </span>plot3d<span class="w"> </span><span class="nv">$Rplot</span><span class="w"> </span>-JZ<span class="w"> </span>-p<span class="w"> </span>-W1p,white

<span class="w">	</span><span class="c1"># Finally, we add dots and names for three cities.</span>
<span class="w">	</span><span class="c1"># Again, gmt grdtrack is used to put the dots &quot;at elevation&quot;.</span>
<span class="w">	</span>cat<span class="w"> </span><span class="s">&lt;&lt;- EOF &gt; cities.txt</span>
<span class="s">	05:41:27 50:51:05 Maastricht</span>
<span class="s">	04:21:00 50:51:00 Bruxelles</span>
<span class="s">	07:07:03 50:43:09 Bonn</span>
<span class="s">	EOF</span>

<span class="w">	</span>gmt<span class="w"> </span>grdtrack<span class="w"> </span>-Gtopo_32.nc<span class="w"> </span>cities.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>gmt<span class="w"> </span>plot3d<span class="w"> </span><span class="nv">$Rplot</span><span class="w"> </span>-JZ<span class="w"> </span>-p<span class="w"> </span>-Sc7p<span class="w"> </span>-W1p,white<span class="w"> </span>-Gred
<span class="w">	</span>gmt<span class="w"> </span>text<span class="w"> </span>-JZ<span class="w"> </span>-p<span class="w"> </span>-F+f12p,Helvetica-Bold,red+jRM<span class="w"> </span>-Dj0.1i/0<span class="w"> </span>cities.txt

<span class="w">	</span><span class="c1"># cleanup</span>
<span class="w">	</span>rm<span class="w"> </span>-f<span class="w"> </span>cities.txt<span class="w"> </span>topo_32.nc<span class="w"> </span>mask_32.nc
gmt<span class="w"> </span>end<span class="w"> </span>show
</pre></div>
</div>
<figure class="align-center" id="id1">
<span id="fig-ex32"></span><a class="reference internal image-reference" href="../_images/ex32.png"><img alt="../_images/ex32.png" src="../_images/ex32.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Draping an image over topography</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ex31.html" class="btn btn-neutral float-left" title="(31) Using non-default fonts in PostScript" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ex33.html" class="btn btn-neutral float-right" title="(33) Stacking automatically generated cross-profiles" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The GMT Team.
      <span class="lastupdated">Last updated on Oct 12, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>