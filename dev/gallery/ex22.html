
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>(22) World-wide seismicity the last month &mdash; GMT 6.7.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=9c3e77be" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=32d919f4" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=9cce70e7"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show example script';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js?v=1ae7504c"></script>
        <script src="../_static/design-tabs.js?v=f930bc37"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="(23) All great-circle paths lead to Rome" href="ex23.html" />
    <link rel="prev" title="(21) Time-series of RedHat stock price" href="ex21.html" />


  <!-- Point to the *latest* version switcher. This will allow the latest versions to appear on older documentation. -->
  <script type="text/javascript" src="/latest/_static/version_switch.js"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            GMT
          </a>
              <div class="version">
                6.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Illustration Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../animations.html">Animation Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Technical Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules-classic.html">Modules (Classic Mode)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-contrib-symbols.html">Users Symbol Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecated-defaults.html">Deprecated GMT Defaults Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="../switching.html">Switching between Different Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrating.html">Migrating from an Earlier Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/contributing.html">Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/maintenance.html">Maintainers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/team.html">Team Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/rst-cheatsheet.html">reStructuredText Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/debug.html">Debugging GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/api.html">GMT C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/postscriptlight.html">PostScriptLight C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/devdocs.html">GMT Enhancement Proposals</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://www.generic-mapping-tools.org/"><i class="fa fa-home fa-fw"></i> GMT Homepage</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org/"><i class="fa fa-comment fa-fw"></i> GMT Community Forum</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt/blob/master/LICENSE.TXT"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
                <li class="toctree-l1"><a href="/dev/gmt-docs-dev.zip"><i class="fa fa-download fa-fw"></i> Documentation HTML zip</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../gallery.html">Illustration Gallery</a></li>
      <li class="breadcrumb-item active">(22) World-wide seismicity the last month</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/GenericMappingTools/gmt/edit/master/doc/rst/source/gallery/ex22.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="world-wide-seismicity-the-last-month">
<span id="example-22"></span><h1>(22) World-wide seismicity the last month<a class="headerlink" href="#world-wide-seismicity-the-last-month" title="Link to this heading"></a></h1>
<p>The next example uses the command-line tool <strong>curl</strong> to obtain a data
file from a specified URL <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>. In the example script this line is
commented out so the example will run even if you do not have <strong>wget</strong>
(we use the remote file <code class="docutils literal notranslate"><span class="pre">usgs_quakes_22.txt</span></code> which normally would be created by <strong>curl</strong>);
remove the comments to get the actual current seismicity plot using the
live data. The main purpose of this script is not to show how to plot a
map background and a few circles, but rather demonstrate how a map
legend may be composed using the module
<a class="reference internal" href="../legend.html"><span class="doc">legend</span></a>. Some scripting is used to
pull out information from the data file that is later used in the
legend. The legend will normally have the email address of the script
owner; here that command is commented out and the user is hardwired to
“GMT guru”. The USGS logo, taken from their web page and converted to a
Sun raster file, is used to spice up the legend.</p>
<p>The script produces the plot in Figure,
giving the URL where these and similar data can be obtained.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="c1">#		GMT EXAMPLE 22</span>
<span class="c1">#</span>
<span class="c1"># Purpose:	Automatic map of last month of world-wide seismicity</span>
<span class="c1"># GMT modules:	coast, plot, legend</span>
<span class="c1"># Unix progs:	cat, wget|curl</span>
<span class="c1">#</span>
gmt<span class="w"> </span>begin<span class="w"> </span>ex22
<span class="w">	</span><span class="c1"># Get the data (-s silently) from USGS using the curl</span>
<span class="w">	</span><span class="c1"># Hardwired here to the month of October, 2017</span>
<span class="w">	</span><span class="c1"># SITE=&quot;https://earthquake.usgs.gov/fdsnws/event/1/query.csv&quot;</span>
<span class="w">	</span><span class="c1"># TIME=&quot;starttime=2017-09-01%2000:00:00&amp;endtime=2017-10-01%2000:00:00&quot;</span>
<span class="w">	</span><span class="c1"># MAG=&quot;minmagnitude=3&quot;</span>
<span class="w">	</span><span class="c1"># ORDER=&quot;orderby=magnitude&quot;</span>
<span class="w">	</span><span class="c1"># URL=&quot;${SITE}?${TIME}&amp;${MAG}&amp;${ORDER}&quot;</span>
<span class="w">	</span><span class="c1"># curl -s $URL &gt; usgs_quakes_22.txt</span>

<span class="w">	</span><span class="c1"># Count the number of events (to be used in title later. one less due to header)</span>
<span class="w">	</span><span class="nv">file</span><span class="o">=</span><span class="k">$(</span>gmt<span class="w"> </span>which<span class="w"> </span>@usgs_quakes_22.txt<span class="w"> </span>-G<span class="k">)</span>
<span class="w">	</span><span class="nv">n</span><span class="o">=</span><span class="k">$(</span>gmt<span class="w"> </span>info<span class="w"> </span><span class="nv">$file</span><span class="w"> </span>-h1<span class="w"> </span>-Fi<span class="w"> </span>-o2<span class="k">)</span>

<span class="w">	</span><span class="c1"># Pull out the first and last timestamp to use in legend title</span>
<span class="w">	</span><span class="nv">first</span><span class="o">=</span><span class="k">$(</span>gmt<span class="w"> </span>info<span class="w"> </span>-h1<span class="w"> </span>-f0T<span class="w"> </span>-i0<span class="w"> </span><span class="nv">$file</span><span class="w"> </span>-C<span class="w"> </span>--TIME_UNIT<span class="o">=</span>d<span class="w"> </span>-I1<span class="w"> </span>-o0<span class="w"> </span>--FORMAT_CLOCK_OUT<span class="o">=</span>-<span class="k">)</span>
<span class="w">	</span><span class="nv">last</span><span class="o">=</span><span class="k">$(</span>gmt<span class="w"> </span>info<span class="w"> </span>-h1<span class="w"> </span>-f0T<span class="w"> </span>-i0<span class="w"> </span><span class="nv">$file</span><span class="w"> </span>-C<span class="w"> </span>--TIME_UNIT<span class="o">=</span>d<span class="w"> </span>-I1<span class="w"> </span>-o1<span class="w"> </span>--FORMAT_CLOCK_OUT<span class="o">=</span>-<span class="k">)</span>

<span class="w">	</span><span class="c1"># Assign a string that contains the current user @ the current computer node.</span>
<span class="w">	</span><span class="c1"># Note that two @@ is needed to print a single @ in gmt text:</span>

<span class="w">	</span><span class="c1">#set me = &quot;$user@@$(hostname)&quot;</span>
<span class="w">	</span><span class="nv">me</span><span class="o">=</span><span class="s2">&quot;GMT guru @@ GMTbox&quot;</span>

<span class="w">	</span><span class="c1"># Create standard seismicity color table</span>
<span class="w">	</span>gmt<span class="w"> </span>makecpt<span class="w"> </span>-Cred,green,blue<span class="w"> </span>-T0,100,300,10000<span class="w"> </span>-N

<span class="w">	</span><span class="c1"># Start plotting. First lay down map, then plot quakes with size = magnitude * 0.015&quot;:</span>
<span class="w">	</span>gmt<span class="w"> </span>coast<span class="w"> </span>-Rg<span class="w"> </span>-JK180/22c<span class="w"> </span>-B45g30<span class="w"> </span>-B+t<span class="s2">&quot;World-wide earthquake activity&quot;</span><span class="w"> </span>-Gburlywood<span class="w"> </span>-Slightblue<span class="w"> </span>-A1000<span class="w"> </span>-Y7c
<span class="w">	</span>gmt<span class="w"> </span>plot<span class="w"> </span>-C<span class="w"> </span>-Sci<span class="w"> </span>-Wfaint<span class="w"> </span>-hi1<span class="w"> </span>-i2,1,3,4+s0.015<span class="w"> </span><span class="nv">$file</span>

<span class="w">	</span><span class="c1"># Create legend input file for NEIS quake plot</span>
<span class="w">	</span>cat<span class="w"> </span>&gt;<span class="w"> </span>neis.legend<span class="w"> </span><span class="s">&lt;&lt;- END</span>
<span class="s">	H 16p,Helvetica-Bold $n events during $first to $last</span>
<span class="s">	D 0 1p</span>
<span class="s">	N 3</span>
<span class="s">	V 0 1p</span>
<span class="s">	S 0.25c c 0.25c red   0.25p 0.5c Shallow depth (0-100 km)</span>
<span class="s">	S 0.25c c 0.25c green 0.25p 0.5c Intermediate depth (100-300 km)</span>
<span class="s">	S 0.25c c 0.25c blue  0.25p 0.5c Very deep (&gt; 300 km)</span>
<span class="s">	D 0 1p</span>
<span class="s">	V 0 1p</span>
<span class="s">	N 7</span>
<span class="s">	V 0 1p</span>
<span class="s">	S 0.25c c 0.15c - 0.25p 0.75c M 3</span>
<span class="s">	S 0.25c c 0.20c - 0.25p 0.75c M 4</span>
<span class="s">	S 0.25c c 0.25c - 0.25p 0.75c M 5</span>
<span class="s">	S 0.25c c 0.30c - 0.25p 0.75c M 6</span>
<span class="s">	S 0.25c c 0.35c - 0.25p 0.75c M 7</span>
<span class="s">	S 0.25c c 0.40c - 0.25p 0.75c M 8</span>
<span class="s">	S 0.25c c 0.45c - 0.25p 0.75c M 9</span>
<span class="s">	D 0 1p</span>
<span class="s">	V 0 1p</span>
<span class="s">	N 1</span>
<span class="s">	END</span>

<span class="w">	</span><span class="c1"># Put together a reasonable legend text, and add logo and user&#39;s name:</span>
<span class="w">	</span>cat<span class="w"> </span><span class="s">&lt;&lt;- END &gt;&gt; neis.legend</span>
<span class="s">	G 0.25l</span>
<span class="s">	P</span>
<span class="s">	T USGS/NEIS most recent earthquakes for the last month.  The data were</span>
<span class="s">	T obtained automatically from the USGS Earthquake Hazards Program page at</span>
<span class="s">	T @_https://earthquake.usgs.gov@_.  Interested users may also receive email alerts</span>
<span class="s">	T from the USGS.</span>
<span class="s">	T This script could be called monthly to update the latest information.</span>
<span class="s">	G 0.9c</span>
<span class="s">	# Add USGS logo</span>
<span class="s">	I @USGS.png 1i RT</span>
<span class="s">	G -0.75c</span>
<span class="s">	L 12p,Times-Italic LB $me</span>
<span class="s">	END</span>

<span class="w">	</span><span class="c1"># OK, now we can actually run gmt legend.  We center the legend below the map.</span>
<span class="w">	</span><span class="c1"># Trial and error shows that 1.7i is a good legend height:</span>
<span class="w">	</span>gmt<span class="w"> </span>legend<span class="w"> </span>-DJBC+o0/1c+w18c/4.2c<span class="w"> </span>-F+p+glightyellow<span class="w"> </span>neis.legend<span class="w"> </span>--FONT_ANNOT_PRIMARY<span class="o">=</span>10p,Helvetica

<span class="w">	</span>rm<span class="w"> </span>neis.legend<span class="w"> </span>usgs_quakes_22.txt
gmt<span class="w"> </span>end<span class="w"> </span>show
</pre></div>
</div>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../_images/ex22.png"><img alt="../_images/ex22.png" src="../_images/ex22.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">World-wide seismicity the last month.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="footnote">
<h2>Footnote<a class="headerlink" href="#footnote" title="Link to this heading"></a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>You can also use the utility <strong>curl</strong></p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ex21.html" class="btn btn-neutral float-left" title="(21) Time-series of RedHat stock price" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ex23.html" class="btn btn-neutral float-right" title="(23) All great-circle paths lead to Rome" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, The GMT Team.
      <span class="lastupdated">Last updated on Feb 21, 2026.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>