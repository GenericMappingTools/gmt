
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Session Three &mdash; GMT 6.7.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=32d919f4" />

  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=9cce70e7"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show example script';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../_static/design-tabs.js?v=f930bc37"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Session Four" href="session-4.html" />
    <link rel="prev" title="Session Two" href="session-2.html" />


  <!-- Point to the *latest* version switcher. This will allow the latest versions to appear on older documentation. -->
  <script type="text/javascript" src="/latest/_static/version_switch.js"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            GMT
          </a>
              <div class="version">
                6.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installing GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gallery.html">Illustration Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../animations.html">Animation Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bash/index.html">Tutorial in Bash</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tutorial in Julia</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="session-1.html">Session One</a></li>
<li class="toctree-l3"><a class="reference internal" href="session-2.html">Session Two</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Session Three</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#contouring-gridded-data-sets">Contouring gridded data sets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gridding-of-arbitrarily-spaced-data">Gridding of arbitrarily spaced data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preprocessing">Preprocessing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="session-4.html">Session Four</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://www.pygmt.org/latest/tutorials/index.html">Tutorials for PyGMT</a></li>
<li class="toctree-l2"><a class="reference external" href="https://doi.org/10.1002/2016GC006723">Tutorials for GMT/Mex</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Technical Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules-classic.html">Modules (Classic Mode)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-contrib-symbols.html">Users Symbol Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deprecated-defaults.html">Deprecated GMT Defaults Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../switching.html">Switching between Different Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrating.html">Migrating from an Earlier Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devdocs/contributing.html">Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devdocs/maintenance.html">Maintainers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devdocs/team.html">Team Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devdocs/rst-cheatsheet.html">reStructuredText Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devdocs/debug.html">Debugging GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devdocs/api.html">GMT C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devdocs/postscriptlight.html">PostScriptLight C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devdocs/devdocs.html">GMT Enhancement Proposals</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://www.generic-mapping-tools.org/"><i class="fa fa-home fa-fw"></i> GMT Homepage</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org/"><i class="fa fa-comment fa-fw"></i> GMT Community Forum</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt/blob/master/LICENSE.TXT"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
                <li class="toctree-l1"><a href="/dev/gmt-docs-dev.zip"><i class="fa fa-download fa-fw"></i> Documentation HTML zip</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../tutorial.html">Tutorials</a></li>
          <li class="breadcrumb-item"><a href="index.html">Tutorial in Julia</a></li>
      <li class="breadcrumb-item active">Session Three</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/GenericMappingTools/gmt/edit/master/doc/rst/source/tutorial/julia/session-3.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="session-three">
<h1>Session Three<a class="headerlink" href="#session-three" title="Link to this heading"></a></h1>
<section id="contouring-gridded-data-sets">
<h2>Contouring gridded data sets<a class="headerlink" href="#contouring-gridded-data-sets" title="Link to this heading"></a></h2>
<p>GMT comes with several utilities that can create gridded data sets; we will discuss two such modules later
this session.  The data sets needed for this tutorial are obtained via the Internet as they are needed.
Here, we will use <a class="reference internal" href="../../grdcut.html"><span class="doc">grdcut</span></a> to obtain and extract a GMT-ready grid that we will next use for contouring:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>grdcut<span class="o">(</span><span class="s2">&quot;@earth_relief_05m&quot;</span>,<span class="w"> </span><span class="nv">region</span><span class="o">=(</span>-66,-60,30,35<span class="o">)</span>,<span class="w"> </span><span class="nv">verbose</span><span class="o">=</span><span class="nb">true</span><span class="o">)</span>
</pre></div>
</div>
<p>Here we use the file extension .nc instead of the generic .grd to indicate that this is a netCDF file.
It is good form, but not essential, to use .nc for netCDF grids. Using that extension will help other
programs installed on your system to recognize these files and might give it an identifiable icon in
your file browser.  Learn about other programs that read netCDF files at the
<a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf/">netCDF website</a>.
You can also obtain tut_bathy.nc from the GMT cache server as we are doing below. Feel free to open it
in any other program and compare results with GMT.</p>
<p>We first use the GMT module <a class="reference internal" href="../../grdinfo.html"><span class="doc">grdinfo</span></a> to see what’s in this file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grdinfo<span class="o">(</span>G<span class="o">)</span>
</pre></div>
</div>
<p>The file contains bathymetry for the Bermuda region and has depth values from -5475 to -89 meters. We want to</p>
<p>As with previous plot commands we need to set up the map projection with <strong>proj</strong>. Here, however, we do not have
to specify the region since that is by default assumed to be the extent of the grid file. To generate any plot we
will in addition need to supply information about which contours to draw. Unfortunately,
<a class="reference external" href="https://www.generic-mapping-tools.org/GMTjl_doc/documentation/modules/grdcontour">grdcontour</a> is a complicated module with too
many options. We put a positive spin on this situation by touting its flexibility. Here are the most useful options:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>annot</strong>=<em>annot_int</em></p></td>
<td><p>Annotation interval and attributes</p></td>
</tr>
<tr class="row-odd"><td><p><strong>cont</strong>=<em>cont_int</em></p></td>
<td><p>Contour interval</p></td>
</tr>
<tr class="row-even"><td><p><strong>labels</strong><em>gap</em></p></td>
<td><p>Controls placement of contour annotations</p></td>
</tr>
<tr class="row-odd"><td><p><strong>range</strong>=<em>(low,high)</em></p></td>
<td><p>Only draw contours within the <em>low</em> to <em>high</em> range</p></td>
</tr>
<tr class="row-even"><td><p><strong>cut</strong>=<em>cut</em></p></td>
<td><p>Do not draw contours with fewer than <em>cut</em> points</p></td>
</tr>
<tr class="row-odd"><td><p><strong>smooth</strong>=<em>factor</em></p></td>
<td><p>Resample contours <em>smooth</em> times per grid cell increment</p></td>
</tr>
<tr class="row-even"><td><dl class="simple">
<dt><strong>ticks</strong>=(local_high=true, local_low=true,</dt><dd><p>gap=<em>gap</em>, closed=true, labels=lab)</p>
</dd>
</dl>
</td>
<td><p>Draw tick-marks in downhill</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>direction for innermost closed contours.  Add tick spacing</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>and length, and characters to plot at the center of closed contours</p></td>
</tr>
<tr class="row-odd"><td><dl class="simple">
<dt><strong>pen</strong>=(annot=true, contour=true, pen=<em>pen</em>,</dt><dd><p>colored=true, cline=true, ctext=true)</p>
</dd>
</dl>
</td>
<td><p>Set contour and annotation pens</p></td>
</tr>
<tr class="row-even"><td><p><strong>scale</strong>=(factor=<em>factor</em>, shift=<em>shift</em>, periodic=true)</p></td>
<td><p>Subtract <em>offset</em> and multiply data by <em>factor</em> prior to processing</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>We will first make a plain contour map using 1 km as annotation interval and 250 m as contour interval.
We choose a 15-cm-wide Mercator plot and annotate the borders every 2°:</p>
<blockquote>
<div><p>grdcontour(“&#64;earth_relief_05m”, region=(-66,-60,30,35), proj=:Mercator, figsize=15, cont=250, annot=1000, show=true)</p>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-11-jl"><span class="std std-ref">our example 11 below</span></a></p>
<figure class="align-center" id="id2">
<span id="gmt-tut-11-jl"></span><a class="reference internal image-reference" href="../../_images/GMT_tut_11.png"><img alt="../../_images/GMT_tut_11.png" src="../../_images/GMT_tut_11.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-text">Result of GMT Tutorial example 11</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Exercises:</p>
<ol class="arabic simple">
<li><p>Add smoothing with <strong>smooth</strong>=4.</p></li>
<li><p>Try tick all highs and lows with <strong>ticks</strong>.</p></li>
<li><p>Skip small features with <strong>cut</strong>=10.</p></li>
<li><p>Override region using <strong>region</strong>=(-70,-60,25,35)</p></li>
<li><p>Try another region that clips our data domain.</p></li>
<li><p>Scale data to km and use the km unit in the annotations.</p></li>
</ol>
</section>
<section id="gridding-of-arbitrarily-spaced-data">
<h2>Gridding of arbitrarily spaced data<a class="headerlink" href="#gridding-of-arbitrarily-spaced-data" title="Link to this heading"></a></h2>
<p>Except in the situation above when a grid file is available, we must convert our data to the right format
readable by GMT before we can make contour plots and color-coded images. We distinguish between two scenarios:</p>
<ol class="arabic simple">
<li><p>The (<em>x, y, z</em>) data are available on a regular lattice grid.</p></li>
<li><p>The (<em>x, y, z</em>) data are distributed unevenly in the plane.</p></li>
</ol>
<p>The former situation may require a simple reformatting (using <a class="reference internal" href="../../xyz2grd.html"><span class="doc">xyz2grd</span></a>), while the latter must be
interpolated onto a regular lattice; this process is known as gridding. GMT supports three different
approaches to gridding; here, we will briefly discuss the two most common techniques.</p>
<p>All GMT gridding modules have in common the requirement that the
user must specify the grid domain and output filename:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>region</strong>=<em>(xmin,xmax/ymin,ymax)</em></p></td>
<td><p>The desired grid extent</p></td>
</tr>
<tr class="row-odd"><td><p><strong>inc</strong>=<em>(xinc [,yinc])</em></p></td>
<td><p>The grid spacing (append <strong>m</strong> or <strong>s</strong> for minutes or seconds of arc)</p></td>
</tr>
<tr class="row-even"><td><p><strong>outgrid</strong>=<em>gridfile</em></p></td>
<td><p>The output grid filename</p></td>
</tr>
</tbody>
</table>
<section id="nearest-neighbor-gridding">
<h3>Nearest neighbor gridding<a class="headerlink" href="#nearest-neighbor-gridding" title="Link to this heading"></a></h3>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/GMT_nearneighbor.png"><img alt="../../_images/GMT_nearneighbor.png" src="../../_images/GMT_nearneighbor.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Search geometry for nearneighbor.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The GMT module <a class="reference internal" href="../../nearneighbor.html"><span class="doc">nearneighbor</span></a> implements a simple “nearest neighbor” averaging operation.
It is the preferred way to grid data when the data density is high. <a class="reference internal" href="../../nearneighbor.html"><span class="doc">nearneighbor</span></a> is a
local procedure which means it will only consider the control data that is close to the desired
output grid node. Only data points inside a specified search radius will be used, and we may also
impose the condition that each of the <em>n</em> sectors must have at least one data point in order to
assign the nodal value. The nodal value is computed as a weighted average of the nearest data
point per sector inside the search radius, with each point weighted according to its distance
from the node. The most important switches are listed below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>search_radius</strong>=<em>val</em></p></td>
<td><p>Sets search radius.  Append <em>unit</em> for radius in that unit [Default is <em>x</em>-units]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>empty</strong>=*val*</p></td>
<td><p>Assign this value to unconstrained nodes [Default is NaN]</p></td>
</tr>
<tr class="row-even"><td><p><strong>sectors</strong>=*n*</p></td>
<td><p>Sector search, indicate number of sectors [Default is 4]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>weights</strong>=true</p></td>
<td><p>Read relative weights from the 4th column of input data</p></td>
</tr>
</tbody>
</table>
<p>We will grid the data in the file tut_ship.xyz which contains ship observations of bathymetry off
Baja California. We obtain the file via the cache server as before. We desire to make a 5’ by 5’ grid.
Running gmt info on &#64;tut_ship.xyz yields:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tut_ship.xyz:<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">82970</span><span class="w">     </span>&lt;<span class="m">245</span>/254.705&gt;<span class="w">   </span>&lt;<span class="m">20</span>/29.99131&gt;<span class="w">   </span>&lt;-7708/-9&gt;
</pre></div>
</div>
<p>so we choose the region accordingly, and get a view of the contour map using</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>nearneighbor<span class="o">(</span><span class="s2">&quot;@tut_ship.xyz&quot;</span>,<span class="w"> </span><span class="nv">region</span><span class="o">=(</span><span class="m">245</span>,255,20,30<span class="o">)</span>,<span class="w"> </span><span class="nv">inc</span><span class="o">=</span><span class="s2">&quot;5m&quot;</span>,<span class="w"> </span><span class="nv">search_radius</span><span class="o">=</span><span class="s2">&quot;40k&quot;</span><span class="o">)</span><span class="p">;</span>
grdcontour<span class="o">(</span>G,<span class="w"> </span><span class="nv">proj</span><span class="o">=</span>:Mercator,<span class="w"> </span><span class="nv">figsize</span><span class="o">=</span><span class="m">15</span>,<span class="w"> </span><span class="nv">cont</span><span class="o">=</span><span class="m">250</span>,<span class="w"> </span><span class="nv">annot</span><span class="o">=</span><span class="m">1000</span>,<span class="w"> </span><span class="nv">show</span><span class="o">=</span><span class="nb">true</span><span class="o">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-12-jl"><span class="std std-ref">our example 12 below</span></a></p>
<figure class="align-center" id="id4">
<span id="gmt-tut-12-jl"></span><a class="reference internal image-reference" href="../../_images/GMT_tut_12.png"><img alt="../../_images/GMT_tut_12.png" src="../../_images/GMT_tut_12.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-text">Result of GMT Tutorial example 12</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Since the grid ship.nc is stored in netCDF format that is supported by a host of other modules,
you can try one of those as well on the same grid.</p>
<p>Exercises:</p>
<ol class="arabic simple">
<li><p>Try using a 100 km search radius and a 10 minute grid spacing.</p></li>
</ol>
</section>
<section id="gridding-with-splines-in-tension">
<h3>Gridding with Splines in Tension<a class="headerlink" href="#gridding-with-splines-in-tension" title="Link to this heading"></a></h3>
<p>As an alternative, we may use a global procedure to grid our data. This approach, implemented in the module
<a class="reference internal" href="../../surface.html"><span class="doc">surface</span></a>, represents an improvement over standard minimum curvature algorithms by allowing users to
introduce some tension into the surface. Physically, we are trying to force a thin elastic plate to go
through all our data points; the values of this surface at the grid points become the gridded data.
Mathematically, we want to find the function <em>z(x, y)</em> that satisfies the following equation away from data constraints:</p>
<div class="math notranslate nohighlight">
\[(1-t)\nabla ^2 z -  t \nabla z = 0,\]</div>
<p>where <em>t</em> is the “tension” in the 0-1 range. Basically, for zero tension we obtain the minimum curvature
solution, while as tension goes toward unity we approach a harmonic solution (which is linear in cross-section).
The theory behind all this is quite involved and we do not have the time to explain it all here, please see
<em>Smith and Wessel</em> [1990] for details. Some of the most important switches for this module are indicated below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>aspect_ratio</strong>=<em>val</em></p></td>
<td><p>Sets aspect ratio for anisotropic grids.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>convergence</strong>=<em>limit</em></p></td>
<td><p>Sets convergence limit.  Default is 1/1000 of data range.</p></td>
</tr>
<tr class="row-even"><td><p><strong>tension</strong>=<em>val</em></p></td>
<td><p>Sets the tension [Default is 0]</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="preprocessing">
<h2>Preprocessing<a class="headerlink" href="#preprocessing" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../surface.html"><span class="doc">surface</span></a> module assumes that the data have been preprocessed to eliminate aliasing,
hence we must ensure that this step is completed prior to gridding. GMT comes with three preprocessors, called
<a class="reference external" href="https://www.generic-mapping-tools.org/GMTjl_doc/documentation/modules/blockmean">blockmean</a>,
<a class="reference external" href="https://www.generic-mapping-tools.org/GMTjl_doc/documentation/modules/blockmedian/">blockmedian</a>, and
<a class="reference external" href="https://www.generic-mapping-tools.org/GMTjl_doc/documentation/modules/blockmode/">blockmode</a>. The first averages values inside the
grid-spacing boxes, the second returns median values, wile the latter returns modal values. As a rule of thumb,
we use means for most smooth data (such as potential fields) and medians (or modes) for rough, non-Gaussian data
(such as topography). In addition to the required <strong>region</strong> and <strong>inc</strong> switches, these preprocessors all take
the same options shown below:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>reg</strong>=true</p></td>
<td><p>Choose pixel node registration [Default is gridline]</p></td>
</tr>
</tbody>
</table>
<p>With respect to our ship data we preprocess it using the median method:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>blockmedian<span class="o">(</span><span class="s2">&quot;@tut_ship.xyz&quot;</span>,<span class="w"> </span><span class="nv">region</span><span class="o">=(</span><span class="m">245</span>,255,20,30<span class="o">)</span>,<span class="w"> </span><span class="nv">inc</span><span class="o">=</span><span class="s2">&quot;5m&quot;</span>,<span class="w"> </span><span class="nv">verbose</span><span class="o">=</span><span class="nb">true</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>The output data can now be used with surface:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>surface<span class="o">(</span>D,<span class="w"> </span><span class="nv">region</span><span class="o">=(</span><span class="m">245</span>,255,20,30<span class="o">)</span>,<span class="w"> </span><span class="nv">inc</span><span class="o">=</span><span class="s2">&quot;5m&quot;</span>,<span class="w"> </span><span class="nv">verbose</span><span class="o">=</span><span class="nb">true</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>If you rerun <a class="reference external" href="https://www.generic-mapping-tools.org/GMTjl_doc/documentation/modules/grdcontour/">grdcontour</a> on the new grid file
(try it!) you will notice a big difference compared to the grid made by <a class="reference internal" href="../../nearneighbor.html"><span class="doc">nearneighbor</span></a>: since surface is a
global method it will evaluate the solution at all nodes, even if there are no data constraints. There are numerous
options available to us at this point:</p>
<ol class="arabic simple">
<li><p>We can reset all nodes too far from a data constraint to the NaN value.</p></li>
<li><p>We can pour white paint over those regions where contours are unreliable.</p></li>
<li><p>We can plot the landmass which will cover most (but not all) of the unconstrained areas.</p></li>
<li><p>We can set up a clip path so that only the contours in the constrained region will show.</p></li>
</ol>
<p>Here we have only time to explore the latter approach. The <a class="reference internal" href="../../mask.html"><span class="doc">mask</span></a> module can read the same preprocessed
data and set up a contour mask based on the data distribution. Once the clip path is activated we can contour
the final grid; we finally deactivate the clipping with a second call to <a class="reference internal" href="../../mask.html"><span class="doc">mask</span></a>. Note also that since
we are appending layers to the figure, second and on commands use the bang (<strong>!</strong>) form. Here’s the recipe:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>blockmedian<span class="o">(</span><span class="s2">&quot;@tut_ship.xyz&quot;</span>,<span class="w"> </span><span class="nv">region</span><span class="o">=(</span><span class="m">245</span>,255,20,30<span class="o">)</span>,<span class="w"> </span><span class="nv">inc</span><span class="o">=</span><span class="s2">&quot;5m&quot;</span>,<span class="w"> </span><span class="nv">verbose</span><span class="o">=</span><span class="nb">true</span><span class="o">)</span><span class="p">;</span>
<span class="nv">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>surface<span class="o">(</span>D,<span class="w"> </span><span class="nv">region</span><span class="o">=(</span><span class="m">245</span>,255,20,30<span class="o">)</span>,<span class="w"> </span><span class="nv">inc</span><span class="o">=</span><span class="s2">&quot;5m&quot;</span>,<span class="w"> </span><span class="nv">verbose</span><span class="o">=</span><span class="nb">true</span><span class="o">)</span><span class="p">;</span>
mask<span class="o">(</span>D,<span class="w"> </span><span class="nv">region</span><span class="o">=(</span><span class="m">245</span>,255,20,30<span class="o">)</span>,<span class="w"> </span><span class="nv">inc</span><span class="o">=</span><span class="s2">&quot;5m&quot;</span>,<span class="w"> </span><span class="nv">figsize</span><span class="o">=</span><span class="m">15</span><span class="o">)</span>
grdcontour!<span class="o">(</span>G,<span class="w"> </span><span class="nv">cont</span><span class="o">=</span><span class="m">250</span>,<span class="w"> </span><span class="nv">annot</span><span class="o">=</span><span class="m">1000</span><span class="o">)</span>
mask!<span class="o">(</span><span class="nv">end_clip_path</span><span class="o">=</span>true,<span class="w"> </span><span class="nv">show</span><span class="o">=</span><span class="nb">true</span><span class="o">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-13-jl"><span class="std std-ref">our example 13 below</span></a></p>
<figure class="align-center" id="id5">
<span id="gmt-tut-13-jl"></span><a class="reference internal image-reference" href="../../_images/GMT_tut_13.png"><img alt="../../_images/GMT_tut_13.png" src="../../_images/GMT_tut_13.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-text">Result of GMT Tutorial example 13</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Exercises:</p>
<ol class="arabic simple">
<li><p>Add the continents using any color you want.</p></li>
<li><p>Color the clip path light gray (use <strong>fill</strong> in the first <a class="reference internal" href="../../mask.html"><span class="doc">mask</span></a> call).</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="session-2.html" class="btn btn-neutral float-left" title="Session Two" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="session-4.html" class="btn btn-neutral float-right" title="Session Four" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The GMT Team.
      <span class="lastupdated">Last updated on Oct 12, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>