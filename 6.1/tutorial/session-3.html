


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Session Three &mdash; GMT 6.1.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Session Four" href="session-4.html" />
    <link rel="prev" title="Session Two" href="session-2.html" />


  <!-- Point to the *latest* version switcher. This will allow the latest versions to appear on older documentation. -->
  <script type="text/javascript" src="/latest/_static/version_switch.js"></script>


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> GMT
          

          
          </a>

          
            
            
              <div class="version">
                6.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../animations.html">Animations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="session-1.html">Session One</a></li>
<li class="toctree-l2"><a class="reference internal" href="session-2.html">Session Two</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Session Three</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#contouring-gridded-data-sets">Contouring gridded data sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridding-of-arbitrarily-spaced-data">Gridding of arbitrarily spaced data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#nearest-neighbor-gridding">Nearest neighbor gridding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gridding-with-splines-in-tension">Gridding with Splines in Tension</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#preprocessing">Preprocessing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="session-4.html">Session Four</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets.html">Datasets</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../users-contrib-scripts.html">Users Script Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-contrib-symbols.html">Users Symbol Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecated-defaults.html">Deprecated GMT Defaults Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="../switching.html">Switching between different versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrating.html">Migrating from an earlier version</a></li>
</ul>
<p class="caption"><span class="caption-text">Classic Mode</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../std-opts-classic.html">Common Options (Classic Mode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules-classic.html">Modules (Classic Mode)</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GenericMappingTools/gmt/blob/master/CONTRIBUTING.md">Contributing Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GenericMappingTools/gmt/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst-cheatsheet.html">reStructuredText Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug.html">Debugging GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">GMT C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postscriptlight.html">PostScriptLight C API</a></li>
</ul>

            
          

    
        <p class="caption">
            <span class="caption-text">Getting help</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://www.generic-mapping-tools.org/"><i class="fa fa-home fa-fw"></i> GMT Homepage</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org/"><i class="fa fa-comment fa-fw"></i> GMT Community Forum</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt/blob/master/LICENSE.TXT"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/gmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../tutorial.html">Tutorial</a> &raquo;</li>
        
      <li>Session Three</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/GenericMappingTools/gmt/edit/6.1/doc/rst/source/tutorial/session-3.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="session-three">
<h1>Session Three<a class="headerlink" href="#session-three" title="Permalink to this headline">¶</a></h1>
<div class="section" id="contouring-gridded-data-sets">
<h2>Contouring gridded data sets<a class="headerlink" href="#contouring-gridded-data-sets" title="Permalink to this headline">¶</a></h2>
<p>GMT comes with several utilities that can create gridded data
sets; we will discuss two such modules later this session.  The
data sets needed for this tutorial are obtained via the Internet
as they are needed.  Here, we will use <a class="reference internal" href="../grdcut.html"><span class="doc">grdcut</span></a> to obtain
and extract a GMT-ready grid that we will next use for contouring:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdcut @earth_relief_05m -R-66/-60/30/35 -Gtut_bathy.nc -V
</pre></div>
</div>
<p>Here we use the file extension .nc instead of the generic .grd
to indicate that this is a netCDF file. It is good form, but not essential,
to use .nc for netCDF grids. Using that extension will help
other programs installed on your system to recognize these files and might
give it an identifiable icon in your file browser.
Learn about other programs that read netCDF files at the
<a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf/">netCDF website</a>.
You can also obtain tut_bathy.nc from the GMT cache server as we are doing below.
Feel free to open it in any other program and compare results with GMT.</p>
<p>We first use the GMT module <a class="reference internal" href="../grdinfo.html"><span class="doc">grdinfo</span></a> to see what’s in this file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdinfo @tut_bathy.nc
</pre></div>
</div>
<p>The file contains bathymetry for the Bermuda region and has depth
values from -5475 to -89 meters.  We want to make a contour map of
this data; this is a job for <a class="reference internal" href="../grdcontour.html"><span class="doc">grdcontour</span></a>.  As with previous
plot commands we need to set up the map projection with <strong>-J</strong>.
Here, however, we do not have to specify the region since that is by
default assumed to be the extent of the grid file.
To generate any plot we will in addition need to supply information
about which contours to draw.  Unfortunately, <a class="reference internal" href="../grdcontour.html"><span class="doc">grdcontour</span></a>
is a complicated module with too many options.  We put a positive
spin on this situation by touting its flexibility.  Here are the most
useful options:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>-A</strong><em>annot_int</em></p></td>
<td><p>Annotation interval and attributes</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-C</strong><em>cont_int</em></p></td>
<td><p>Contour interval</p></td>
</tr>
<tr class="row-even"><td><p><strong>-G</strong><em>gap</em></p></td>
<td><p>Controls placement of contour annotations</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-L</strong><em>low</em>/<em>high</em></p></td>
<td><p>Only draw contours within the <em>low</em> to <em>high</em> range</p></td>
</tr>
<tr class="row-even"><td><p><strong>-Q</strong><em>cut</em></p></td>
<td><p>Do not draw contours with fewer than <em>cut</em> points</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-S</strong><em>smooth</em></p></td>
<td><p>Resample contours <em>smooth</em> times per grid cell increment</p></td>
</tr>
<tr class="row-even"><td><p><strong>-T</strong>[<strong>+|-</strong>][<strong>+d</strong><em>gap</em>[/<em>length</em>]][<strong>+l</strong>[<em>labels</em>]]</p></td>
<td><p>Draw tick-marks in downhill</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>direction for innermost closed contours.  Add tick spacing</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>and length, and characters to plot at the center of closed contours</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-W</strong>[<strong>a</strong>|<strong>c</strong>]<em>pen</em></p></td>
<td><p>Set contour and annotation pens</p></td>
</tr>
<tr class="row-even"><td><p><strong>-Z</strong>[<strong>+s</strong><em>factor</em>][<strong>+o</strong><em>offset</em>]</p></td>
<td><p>Subtract <em>offset</em> and multiply data by <em>factor</em> prior to processing</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>We will first make a plain contour map using 1 km as annotation
interval and 250 m as contour interval.  We choose a 7-inch-wide
Mercator plot and annotate the borders every 2°:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt begin GMT_tut_11
	gmt grdcontour @earth_relief_05m -R-66/-60/30/35 -JM6i -C250 -A1000 -B
gmt end show
</pre></div>
</div>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-11"><span class="std std-ref">our example 11 below</span></a></p>
<div class="figure align-center" id="id1">
<span id="gmt-tut-11"></span><a class="reference internal image-reference" href="../_images/GMT_tut_11.png"><img alt="../_images/GMT_tut_11.png" src="../_images/GMT_tut_11.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 11</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li><p>Add smoothing with <strong>-S</strong>4.</p></li>
<li><p>Try tick all highs and lows with <strong>-T</strong>.</p></li>
<li><p>Skip small features with <strong>-Q</strong>10.</p></li>
<li><p>Override region using <strong>-R</strong>-70/-60/25/35.</p></li>
<li><p>Try another region that clips our data domain.</p></li>
<li><p>Scale data to km and use the km unit in the annotations.</p></li>
</ol>
</div>
<div class="section" id="gridding-of-arbitrarily-spaced-data">
<h2>Gridding of arbitrarily spaced data<a class="headerlink" href="#gridding-of-arbitrarily-spaced-data" title="Permalink to this headline">¶</a></h2>
<p>Except in the situation above when a grid file is available, we must
convert our data to the right format readable by GMT before we can
make contour plots and color-coded images.  We distinguish between
two scenarios:</p>
<ol class="arabic simple">
<li><p>The (<em>x, y, z</em>) data are available on a regular lattice grid.</p></li>
<li><p>The (<em>x, y, z</em>) data are distributed unevenly in the plane.</p></li>
</ol>
<p>The former situation may require a simple reformatting (using
<a class="reference internal" href="../xyz2grd.html"><span class="doc">xyz2grd</span></a>), while the latter must be interpolated onto a
regular lattice; this process is known as gridding.
GMT supports three different approaches to gridding; here, we
will briefly discuss the two most common techniques.</p>
<p>All GMT gridding modules have in common the requirement that the
user must specify the grid domain and output filename:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>-R</strong><em>xmin/xmax/ymin/ymax</em></p></td>
<td><p>The desired grid extent</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-I</strong><em>xinc</em>[<em>yinc</em>]</p></td>
<td><p>The grid spacing (append <strong>m</strong> or <strong>s</strong> for minutes or seconds of arc)</p></td>
</tr>
<tr class="row-even"><td><p><strong>-G</strong><em>gridfile</em></p></td>
<td><p>The output grid filename</p></td>
</tr>
</tbody>
</table>
<div class="section" id="nearest-neighbor-gridding">
<h3>Nearest neighbor gridding<a class="headerlink" href="#nearest-neighbor-gridding" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="id2">
<span id="gmt-nearneighbor"></span><a class="reference internal image-reference" href="../_images/GMT_nearneighbor.png"><img alt="../_images/GMT_nearneighbor.png" src="../_images/GMT_nearneighbor.png" style="width: 200px;" /></a>
<p class="caption"><span class="caption-text">Search geometry for nearneighbor.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The GMT module <a class="reference internal" href="../nearneighbor.html"><span class="doc">nearneighbor</span></a> implements a simple
“nearest neighbor” averaging operation.  It is the preferred
way to grid data when the data density is high.  <a class="reference internal" href="../nearneighbor.html"><span class="doc">nearneighbor</span></a>
is a local procedure which means it will only consider the control
data that is close to the desired output grid node.
Only data points inside a specified search radius will
be used, and we may also impose the condition that each of the <em>n</em>
sectors must have at least one data point in order to assign the nodal
value.  The nodal value is computed as a weighted average of the nearest
data point per sector inside the search radius, with each point weighted
according to its distance from the node.
The most important switches are listed below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>-S</strong><em>radius</em></p></td>
<td><p>Sets search radius.  Append <em>unit</em> for radius in that unit [Default is <em>x</em>-units]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-E</strong><em>empty</em></p></td>
<td><p>Assign this value to unconstrained nodes [Default is NaN]</p></td>
</tr>
<tr class="row-even"><td><p><strong>-N</strong><em>sectors</em></p></td>
<td><p>Sector search, indicate number of sectors [Default is 4]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-W</strong></p></td>
<td><p>Read relative weights from the 4th column of input data</p></td>
</tr>
</tbody>
</table>
<p>We will grid the data in the file tut_ship.xyz which contains
ship observations of bathymetry off Baja California.  We obtain the
file via the cache server as before.
We desire to make a 5’ by 5’ grid.  Running gmt info on &#64;tut_ship.xyz yields:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tut_ship.xyz: <span class="nv">N</span> <span class="o">=</span> <span class="m">82970</span>     &lt;<span class="m">245</span>/254.705&gt;   &lt;<span class="m">20</span>/29.99131&gt;   &lt;-7708/-9&gt;
</pre></div>
</div>
<p>so we choose the region accordingly, and get a view of the contour map using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt begin GMT_tut_12
	gmt nearneighbor -R245/255/20/30 -I5m -S40k -Gship.nc @tut_ship.xyz
	gmt grdcontour ship.nc -JM6i -B -C250 -A1000
gmt end show
</pre></div>
</div>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-12"><span class="std std-ref">our example 12 below</span></a></p>
<div class="figure align-center" id="id3">
<span id="gmt-tut-12"></span><a class="reference internal image-reference" href="../_images/GMT_tut_12.png"><img alt="../_images/GMT_tut_12.png" src="../_images/GMT_tut_12.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 12</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>Since the grid ship.nc is stored in netCDF format that is supported by a host of other modules,
you can try one of those as well on the same grid.</p>
<p>Exercises:</p>
<ol class="arabic simple">
<li><p>Try using a 100 km search radius and a 10 minute grid spacing.</p></li>
</ol>
</div>
<div class="section" id="gridding-with-splines-in-tension">
<h3>Gridding with Splines in Tension<a class="headerlink" href="#gridding-with-splines-in-tension" title="Permalink to this headline">¶</a></h3>
<p>As an alternative, we may use a global procedure to grid our data.
This approach, implemented in the module <a class="reference internal" href="../surface.html"><span class="doc">surface</span></a>, represents
an improvement over standard minimum curvature algorithms by allowing
users to introduce some tension into the surface.
Physically, we are trying to force a thin elastic plate to go through
all our data points; the values of this surface at the grid points
become the gridded data.  Mathematically, we want to find the function
<em>z(x, y)</em> that satisfies the following equation away from data constraints:</p>
<div class="math notranslate nohighlight">
\[(1-t)\nabla ^2 z -  t \nabla z = 0,\]</div>
<p>where <em>t</em> is the “tension” in the 0-1 range.  Basically, for
zero tension we obtain the minimum curvature solution, while as
tension goes toward unity we approach a harmonic solution (which is linear
in cross-section).  The theory behind all this is quite involved
and we do not have the time to explain it all here, please see
<em>Smith and Wessel</em> [1990] for details.  Some of the most important
switches for this module are indicated below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>-A</strong><em>aspect</em></p></td>
<td><p>Sets aspect ratio for anisotropic grids.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-C</strong><em>limit</em></p></td>
<td><p>Sets convergence limit.  Default is 1/1000 of data range.</p></td>
</tr>
<tr class="row-even"><td><p><strong>-T</strong><em>tension</em></p></td>
<td><p>Sets the tension [Default is 0]</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="preprocessing">
<h2>Preprocessing<a class="headerlink" href="#preprocessing" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../surface.html"><span class="doc">surface</span></a> module assumes that the data have been
preprocessed to eliminate aliasing, hence we must ensure that
this step is completed prior to gridding.  GMT comes with
three preprocessors, called <a class="reference internal" href="../blockmean.html"><span class="doc">blockmean</span></a>, <a class="reference internal" href="../blockmedian.html"><span class="doc">blockmedian</span></a>,
and <a class="reference internal" href="../blockmode.html"><span class="doc">blockmode</span></a>.  The first averages values inside the
grid-spacing boxes, the second returns median values, wile the
latter returns modal values.  As a rule of thumb, we use means for
most smooth data (such as potential fields) and medians (or modes)
for rough, non-Gaussian data (such as topography).  In addition
to the required <strong>-R</strong> and <strong>-I</strong> switches, these preprocessors
all take the same options shown below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>-r</strong></p></td>
<td><p>Choose pixel node registration [Default is gridline]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>-W</strong>[<strong>i</strong>|<strong>o</strong>]</p></td>
<td><p>Append <strong>i</strong> or <strong>o</strong> to read or write weights in the 4th column</p></td>
</tr>
</tbody>
</table>
<p>With respect to our ship data we preprocess it using the median method:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt blockmedian -R245/255/20/30 -I5m -V @tut_ship.xyz &gt; ship_5m.xyz
</pre></div>
</div>
<p>The output data can now be used with surface:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt surface ship_5m.xyz -R245/255/20/30 -I5m -Gship.nc -V
</pre></div>
</div>
<p>If you rerun <a class="reference internal" href="../grdcontour.html"><span class="doc">grdcontour</span></a> on the new grid file (try it!)
you will notice a big difference compared to the grid made by
<a class="reference internal" href="../nearneighbor.html"><span class="doc">nearneighbor</span></a>: since surface is a global method
it will evaluate the solution at all nodes, even if there are no
data constraints.  There are numerous options available to us at
this point:</p>
<ol class="arabic simple">
<li><p>We can reset all nodes too far from a data constraint to the NaN value.</p></li>
<li><p>We can pour white paint over those regions where contours are unreliable.</p></li>
<li><p>We can plot the landmass which will cover most (but not all) of the unconstrained areas.</p></li>
<li><p>We can set up a clip path so that only the contours in the constrained region will show.</p></li>
</ol>
<p>Here we have only time to explore the latter approach.  The <a class="reference internal" href="../mask.html"><span class="doc">mask</span></a>
module can read the same preprocessed data and set up a contour mask
based on the data distribution.  Once the clip path is activated we can
contour the final grid; we finally deactivate the clipping with a second
call to <a class="reference internal" href="../mask.html"><span class="doc">mask</span></a>.  Here’s the recipe:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt blockmedian -R245/255/20/30 -I5m -V @tut_ship.xyz &gt; ship_5m.xyz
gmt surface ship_5m.xyz -R245/255/20/30 -I5m -Gship.nc
gmt begin GMT_tut_13
	gmt mask -R245/255/20/30 -I5m ship_5m.xyz -JM6i -B
	gmt grdcontour ship.nc -C250 -A1000
	gmt mask -C
gmt end show
</pre></div>
</div>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-13"><span class="std std-ref">our example 13 below</span></a></p>
<div class="figure align-center" id="id4">
<span id="gmt-tut-13"></span><a class="reference internal image-reference" href="../_images/GMT_tut_13.png"><img alt="../_images/GMT_tut_13.png" src="../_images/GMT_tut_13.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 13</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li><p>Add the continents using any color you want.</p></li>
<li><p>Color the clip path light gray (use <strong>-G</strong> in the first <a class="reference internal" href="../mask.html"><span class="doc">mask</span></a> call).</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="session-4.html" class="btn btn-neutral float-right" title="Session Four" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="session-2.html" class="btn btn-neutral float-left" title="Session Two" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, The GMT Team.
      <span class="lastupdated">
        Last updated on Sep 02, 2020.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>