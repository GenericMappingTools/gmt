#include "common_options.txt"
.TH GRDMASK 1 MANDATE GMT_STRING "Generic Mapping Tools"
.SH NAME
grdmask \- Create mask grid files from xy paths.
.SH SYNOPSIS
\fBgrdmask\fP \fIpathfiles\fP OPT(G)\fImask_grd_file\fP] GMT_I_OPT 
GMT_Rgeo_OPT [ OPT(A)[\fBm\fP|\fBp\fP] ] [ OPT(F) ] [ GMT_H_OPT ] 
[ OPT(N)\fIout/edge/in\fP ] [ OPT(S)\fIsearch_radius\fP[\fBm|c|k|K\fP] ] 
[ GMT_V_OPT ] [ GMT_t_OPT ] [ GMT_bi_OPT ] [ GMT_fi_OPT ] [ GMT_mi_OPT ]
.SH DESCRIPTION
\fBgrdmask\fP can operate in two different modes. 1. It reads one or more xy-files that each define a closed polygon.
The nodes defined by the specified region and lattice spacing will be set equal to one of three possible values
depending on whether the node is outside, on the polygon perimeter, or inside the polygon.  The
resulting mask may be used in subsequent operations involving \fBgrdmath\fP to mask out
data from polygonal areas. 2. The xy-files simply represent data point locations and the mask is set to the
inside or outside value depending on whether a node is within a maximum distance from the nearest data point.
If the distance specified is zero then only the nodes nearest each data point are considered "inside".
.TP
\fIpathfiles\fP
The name of 1 or more ASCII [or binary, see OPT(b)] files holding the polygon(s) or data points.
.TP
OPT(G)
Name of resulting output mask grid file.
(See GRID FILE FORMATS below).
#include "explain_-I.txt"
#include "explain_-R.txt"
.SH OPTIONS
.TP
OPT(A)
If the input data are geographic (as indicated by OPT(fi)) then the sides in the polygons will be
approximated by great circle arcs.  When using the OPT(A) sides will be regarded as straight lines.
Alternatively, append \fBm\fP to have sides first follow meridians, then parallels. Or append \fBp\FP
to first follow parallels, then meridians.
#include "explain_nodereg.txt"
#include "explain_-h.txt"
.TP
OPT(N)
Sets the values that will be assigned to nodes that are \fIout\fPside the polygons,
on the \fIedge\fP, or \fIin\fPside.  Values can be any number, including the
textstring NaN  [Default is 0/0/1].
.TP
OPT(S)
Set nodes depending on their distance from the nearest data point.  Nodes within \fIradius\fP [0] from
a data point are considered inside.  Append \fBm\fP to indicate minutes
or \fBc\fP to indicate seconds.  Append \fBk\fP to indicate km (implies OPT(R) and OPT(I) are in degrees, and
we will use a fast flat Earth approximation to calculate distance).  For more accuracy, use uppercase \fBK\fP
if distances should be calculated along geodesics.
However, if the current \fBELLIPSOID\fP is spherical then great circle calculations are used.
#include "explain_-V.txt"
#include "explain_-bi.txt"
[Default is 2 input columns].
#include "explain_-f.txt"
.TP
OPT(m)
Multiple segment file.  Segments are separated by a record whose first character is \fIflag\fP.
[Default is '>'].
#include "explain_grd_output.txt"
#include "explain_grd_coord.txt"
.SH EXAMPLES
To set all nodes inside and on the polygons coastline_*.xy to 0, and outside points
to 1, do
.sp
\fBgrdmask\fP coastline_*.xy OPT(R)-60/-40/-40/-30 OPT(I)5\fBm\fP OPT(N)1/0/0 OPT(G)land_mask.grd OPT(V)
.br
.sp
To set nodes within 50 km of data points to 1 and other nodes to NaN, do
.sp
\fBgrdmask\fP data.xyz OPT(R)-60/-40/-40/-30 OPT(I)5\fBm\fP OPT(N)NaN/1/1 OPT(S)50\fBk\fP OPT(G)data_mask.grd OPT(V)
.SH "SEE ALSO"
.IR GMT (1),
.IR grdlandmask (1),
.IR grdmath (1),
.IR grdclip (1),
.IR psmask (1),
.IR psclip (1)
