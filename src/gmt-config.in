#!/bin/bash
#--------------------------------------------------------------------
#  $Id$
#
#  Copyright (c) 1991-2013 by P. Wessel, W. H. F. Smith, R. Scharroo, J. Luis and F. Wobbe
#  See LICENSE.TXT file for copying and redistribution conditions.
#
#  This program is free software; you can redistribute it and/or modify
#  it under the terms of the GNU Lesser General Public License as published by
#  the Free Software Foundation; version 3 or any later version.
#
#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU Lesser General Public License for more details.
#
#  Contact info: gmt.soest.hawaii.edu
#
# gmt-config simply reports various paths and settings that are useful
# to developers that need to include/link GMT5 resources.
#--------------------------------------------------------------------*/
#
GMT_EXEDIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
CONFIG_CFLAGS="-I@CMAKE_INSTALL_PREFIX@/@GMT_INCLUDEDIR@"
CONFIG_DATA=$($GMT_EXEDIR/gmt --show-datadir)
CONFIG_DEP_LIBS="@NETCDF_LIBRARIES@ @GMT_OPTIONAL_LIBRARIES@"
CONFIG_GSHHG=$($GMT_EXEDIR/gmt gmtget DIR_GSHHG)
CONFIG_LIBS="-L@CMAKE_INSTALL_PREFIX@/@GMT_LIBDIR@ -lgmt"
CONFIG_PREFIX="@CMAKE_INSTALL_PREFIX@"
CONFIG_VERSION="@GMT_PACKAGE_VERSION_WITH_SVN_REVISION@"
SIZEOF_VOID_P=@CMAKE_SIZEOF_VOID_P@

if [ -n "@GDAL_LIBRARY@" ]; then
  CONFIG_GDAL_ENABLED=yes
else
  CONFIG_GDAL_ENABLED=no
fi

if [ "$SIZEOF_VOID_P" -eq 8 ]; then
  CONFIG_BITS=64
else
  CONFIG_BITS=32
fi

usage()
{
  cat <<EOF
  Usage: gmt-config [OPTIONS]
  Options:
  [--bits]
  [--prefix]
  [--libs]
  [--dep-libs]
  [--cflags]
  [--datadir]
  [--gshhg]
  [--version]
  [--gdal-enabled]
EOF
  exit $1
}

for arg in "$@"; do
  case $arg in
    --bits)
    echo $CONFIG_BITS
    ;;

    --libs)
    echo $CONFIG_LIBS
    ;;

    --dep-libs)
    echo ${CONFIG_DEP_LIBS//;/ }
    ;;

    --cflags)
    echo $CONFIG_CFLAGS
    ;;

    --datadir)
    echo $CONFIG_DATA
    ;;

    --gshhg)
    echo $CONFIG_GSHHG
    ;;

    --prefix)
    echo $CONFIG_PREFIX
    ;;

    --version)
    echo $CONFIG_VERSION
    ;;

    --gdal-enabled)
    echo $CONFIG_GDAL_ENABLED
    ;;

    *)
    usage 1 1>&2
    ;;
  esac
done
