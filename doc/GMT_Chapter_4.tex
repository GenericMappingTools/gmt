%------------------------------------------
%	$Id: GMT_Chapter_4.tex,v 1.49 2004-06-11 03:02:58 pwessel Exp $
%
%	The GMT Documentation Project
%	Copyright 2000-2004.
%	Paul Wessel and Walter H. F. Smith
%------------------------------------------
%
\chapter{General features}
\thispagestyle{headings}

This section explains features common to all the programs
in \GMT\ and summarizes the philosophy behind the system.  Some
of the features described here may make more sense once you reach
the cook-book section where we present actual examples of their use. 

\section{\gmt\ Units}
\index{GMT@\GMT!units|(}
\index{Dimensions|(}
\index{Units|(}

\GMT\ programs can accept dimensional quantities in {\bf c}m, {\bf i}nch,
{\bf m}eter, or {\bf p}oint.  There are two ways to ensure that \GMT\ understands
which unit you intend to use.

\begin{enumerate}
\item Append the desired unit to the dimension you supply.  This
way is explicit and clearly communicates what you intend, e.g.,
\Opt{X}4{\bf c} means 4 cm.

\item Set the parameter MEASURE\_UNIT to the desired unit.  Then, all
dimensions without explicit unit will be interpreted accordingly.

\end{enumerate}

The latter method is less secure as other users may have a different unit
set and your script may not work as intended.  We therefore recommend
you always supply the desired unit explicitly.
\index{GMT@\GMT!units|)}
\index{Dimensions|)}
\index{Units|)}

\section{\gmt\ defaults}
\subsection{Overview and the \filename{.gmtdefaults4} file}

\index{GMT@\GMT!defaults|(}
\index{Default settings|(}

\GMTfig[h]{GMT_Defaults_1a}{Some \gmt\ parameters that affect plot appearance.}

There are about 80 parameters which can be adjusted individually
to modify the appearance of plots or affect the manipulation of data.
When a program is run, it initializes all parameters to the \GMT\
defaults\footnote{Choose between SI and US default units by modifying
\filename{gmt.conf} in the \GMT\ share directory},
then tries to open the file \filename{.gmtdefaults4}
in the current directory\footnote{To remain backwards compatible with \GMT\ 3.4.x
we will also look for \filename{.gmtdefaults} but only if \filename{.gmtdefaults4}
cannot be found}.  If not found, it will look for that file
in your home directory.  If successful, the program will read the
contents and set the default values to those provided in the file.
By editing this file you can affect features such as pen thicknesses
used for maps, fonts and font sizes used for annotations and labels,
color of the pens, dots-per-inch resolution of the hardcopy device,
what type of spline interpolant to use, and many other choices
(A complete list of all the parameters and their default values can
be found in the \GMTprog{gmtdefaults} manual pages).  Figures
\ref{fig:GMT_Defaults_1a}, \ref{fig:GMT_Defaults_1b},
and \ref{fig:GMT_Defaults_1c} show the parameters that affect plots). You may create
your own \filename{.gmtdefaults4} files by running \GMTprog{gmtdefaults}
and then modify those parameters you want to change.  If you want
to use the parameter settings in another file you can do so by
specifying \texttt{+<defaultfile>} on the command line.
This makes it easy to maintain several distinct parameter settings,
corresponding perhaps to the unique styles required by different
journals or simply reflecting font changes necessary to make
readable overheads and slides.  Note that any arguments given on
the command line (see below) will take precedent over the default
values.  E.g., if your \filename{.gmtdefaults4} file has {\it x}
offset = 1{\bf i} as default, the \Opt{X}1.5{\bf i} option will override the
default and set the offset to 1.5 inches.  Default values
may also be changed from the command line with the utility \GMTprog{gmtset}. 

There are at least two good reasons why the \GMT\ default options
are placed in a separate parameter file:

\begin{enumerate}

\item It would not be practical to allow for command-line syntax
covering so many options, many of which are rarely or never
changed (such as the ellipsoid used for map projections).

\item It is convenient to keep separate \filename{.gmtdefaults4}
files for specific projects, so that one may achieve a special
effect simply by running \GMT\ commands in a sub-directory whose
\filename{.gmtdefaults4} file has the desired settings.  For example,
when making final illustrations for a journal article one must often
standardize on font sizes and font types, etc.  Keeping all those
settings in a separate \filename{.gmtdefaults4} file simplifies this
process.  Likewise, \GMT\ scripts that make slides often use a
different color scheme and font size than output intended for laser
printers.  Organizing these various scenarios into separate
\filename{.gmtdefaults4} files will minimize headaches associated
with micro-editing of illustrations.

\GMTfig[h]{GMT_Defaults_1b}{More \gmt\ parameters that affect plot appearance.}

\end{enumerate}

\subsection{Changing \gmt\ Defaults}

As mentioned, \GMT\ programs will attempt to open a file named
\filename{.gmtdefaults4}.  At times it may be desirable to override
that default.  There are several ways in which this can be accomplished.
\begin{enumerate}
\item Supply another filename using the \emph{+filename} syntax, i.e.,
on the same command line as the \GMT\ command we append the name of
the alternate \filename{.gmtdefaults4} file with the plus sign as a prefix.
Because any changes only apply to that one command you would have to
append the alternate file to every command in your script.  This is
tedious but may be an option for web-based map-servers.
\item A perhaps less tedious method is to start each script by making a
copy of the current \filename{.gmtdefaults4}, then copy the desired
\filename{.gmtdefaults4} file to the current directory, and finally
undo the changes at the end of the script.  Possible side effects
include premature ending of the script due to user error or bug which
means the final resetting does not take place unless you write your
script very carefully.
\item To permanently change some of the \GMT\ parameters on the fly
inside a script the \GMTprog{gmtset} utility can be used.  E.g., to
change the annotation font to 12 point Times-Bold we run \\

\texttt{gmtset ANNOT\_FONT\_PRIMARY Times-Bold ANNOT\_FONT\_SIZE\_PRIMARY 12} \\

These changes will remain in effect until they are overridden.
\item Finally, if all you want to achieve is to change a few parameters during
the execution of a single command but leave the environment intact, consider
passing the parameter chances on the command line via the \-\-\emph{PAR=value}
mechanism.  For instance, to temporarily set the output format for floating
points to have lots of decimals, say, for map projection coordinate output,
append \-\-{\bfD\_FORMAT}=\%.12lg to the command in question.
\end{enumerate}
In addition to those parameters
that directly affect the plot there are numerous parameters than
modify units, scales, etc.  For a complete listing, see the
\GMTprog{gmtdefaults} man pages.

\GMTfig[h]{GMT_Defaults_1c}{Even more \gmt\ parameters that affect plot appearance.}

At the end of the script one can then reset the specific parameters
back to what they originally were.  We suggest that you go through
all the available parameters at least once so that you know what is
available to change via one of the proposed mechanisms.
\index{GMT@\GMT!defaults|)}
\index{Default settings|)}

\section{Command Line Arguments} 
\index{Command line!arguments}%
\index{Arguments, command line}%

Each program requires certain arguments specific to its operation.
These are explained in the manual pages and in the usage messages.
Most programs are ``case-sensitive''; almost all options must start
with an upper-case letter.  We have tried to choose letters of the
alphabet which stand for the argument so that they will be easy to
remember.  Each argument specification begins with a hyphen
(except input file names; see below), followed by a letter, and
sometimes a number or character string immediately after the letter.
\emph{Do not} space between the hyphen, letter, and number or string.
\emph{Do} space between options.  Example:

\vspace{\baselineskip} 

\texttt{pscoast -R0/20/0/20 -Ggray -JM6i -W0.25p -B5 -V -P $>$ map.ps}

\section{Standardized command line options} 
\index{Standardized command line options}%
\index{Command line!standardized options|(}%
\label{sec:stopt}

Most of the programs take many of the same arguments like those
related to setting the data region, the map projection, etc.
The 15 switches in Table~\ref{tbl:switches} have the same meaning
in all the programs (allthough some programs may not use all of them).
These options will be described here as well as in the manual pages,
as is vital that you understand how to use these options.  We will present
these options in order of importance (some are use alot more than others).

\begin{table}
\centering
\index{Standardized command line options}%
\index{\Opt{B} (set annotations and ticks)}%
\index{\Opt{H} (header records)}%
\index{\Opt{J} (set map projection)}%
\index{\Opt{K} (continue plot)}%
\index{\Opt{O} (overlay plot)}%
\index{\Opt{P} (portrait orientation)}%
\index{\Opt{R} (set region)}%
\index{\Opt{U} (plot timestamp)}%
\index{\Opt{V} (verbose mode)}%
\index{\Opt{X} (shift plot in $x$)}%
\index{\Opt{Y} (shift plot in $y$)}%
\index{\Opt{b} (binary i/o)}%
\index{\Opt{c} (set \# of copies)}%
\index{\Opt{f} (formatting of i/o)}%
\index{\Opt{:} (input and/or output is $y,x$, not $x,y$)}%

\begin{tabular}{|l|l|} \hline
\multicolumn{1}{|c|}{\emph{Option}}	&	\multicolumn{1}{c|}{\emph{Meaning}} \\ \hline
\Opt{B}	&	Defines tickmarks, annotations, and labels for basemaps and axes  \\ \hline
\Opt{H}	&	Specifies that input/output tables have header record(s)  \\ \hline
\Opt{J}	&	Selects a map projection or one of several non-map projections  \\ \hline
\Opt{K}	&	Allows more plot code to be appended to this plot later \\ \hline
\Opt{O}	&	Allows this plot code to be appended to an existing plot \\ \hline
\Opt{P}	&	Selects Portrait plot orientation [Default is landscape] \\ \hline
\Opt{R}	&	Defines the min. and max. coordinates of the map/plot region \\ \hline
\Opt{U}	&	Plots a time-stamp, by default in the lower left corner of page  \\ \hline
\Opt{V}	&	Verbose operation  \\ \hline
\Opt{X}	&	Sets the {\it x}-coordinate for the plot origin on the page  \\ \hline
\Opt{Y}	&	Sets the {\it y}-coordinate for the plot origin on the page  \\ \hline
\Opt{b}	&	Selects binary input or output  \\ \hline
\Opt{c}	&	Specifies the number of plot copies  \\ \hline
\Opt{f}	&	Specifies the data format on a per column basis  \\ \hline
\Opt{:}	&	Input geographic data are ({\it lat,lon}) rather than ({\it lon,lat})  \\ \hline
\end{tabular}
\caption{The 15 standardized \gmt\ command line switches.}
\label{tbl:switches}
\end{table} 

\subsection{Data domain: The \Opt{R} option}
\index{\Opt{R}}
\index{Region, specifying}
\label{sec:R}
\GMTfig[h]{GMT_-R}{The plot region can be specified in two different ways.}

The \Opt{R} option defines the map region or data domain of interest.  It may be specified
in one of two ways (Figure~\ref{fig:GMT_-R}):
\begin{enumerate}
\item \Opt{R}{\it xmin}/{\it xmax}/{\it ymin}/{\it ymax}.  This is the standard way to specify
Cartesian data domains and regions for map projections in which meridians and parallels are rectilinear.
\item \Opt{R}{\it xlleft}/{\it ylleft}/{\it xuright}/{\it yuright}{\bf r}.
This form is used with map projections that are oblique, making meridians and parallels poor
choices for map boundaries.  Here, we instead specify the lower left corner and upper right
corner geographic coordinates. 
\end{enumerate}
For rectilinear projections the two forms give identical results.  Depending on the selected map
projection (or the kind of expected input data), the boundary coordinates may take on three different
formats:

\begin{description}
\item [Geographic coordinates:]  These are longitudes and latitudes and may be given in decimal degrees (e.g., -123.45417)
or in the [$\pm$]{\it ddd}[:{\it mm}[:{\it ss}[{\it .xxx}]]][{\bf W}$|${\bf E}$|${\bf S}$|${\bf N}]
format (e.g., 123:27:15W).  Note that \Opt{Rg} and \Opt{Rd} are shorthands for ``global domain'' \Opt{R}{\it 0}/{\it 360}/{\it -90}/{\it 90}
and  \Opt{R}{\it -180}/{\it 180}/{\it -90}/{\it 90}, respectively.
\item [Calendar time coordinates:]  These are absolute time coordinates referring to a Gregorian or ISO calendar.
The general format is [{\it date}]{\bf T}[{\it clock}], where {\it date} must be in the {\it yyyy}[{\it -mm}[{\it -dd}]] (year, month, day-of-month)
or {\it yyyy}[{\it -jjj}] (year and day-of-year) for Gregorian calendars and {\it yyyy}[{\it -}{\bf W}{\it ww}[{\it -d}]] (year, week, and
day-of-week) for the ISO calendar.  If no {\it date} is given we assume the present day.  Following the [optional] {\it date} string we require the {\bf T} flag.
The optional {\it clock} string is a 24-hour clock in {\it hh}[{\it :mm}[{\it :ss}[{\it .xxx}]]] format.  If no {\it clock} is given
it implies 00:00:00, i.e., the start of the specified day.
Note that not all of the specified enteties need be present in the data.  All calendar-clock strings are internally represented as double precision seconds since
proleptic Gregorian date Mon Jan 1 00:00:00 0001.  Proleptic means we assume that modern calendar
can be extrapolated forward and backward; a year zero is used, and Gregory's reforms\footnote{The Gregorian Calendar
is a revision of the Julian Calendar which was instituted in a papal bull by Pope Gregory XIII in 1582. The reason for the calendar
change was to correct for drift in the dates of signifigant religious observations (primarily Easter) and to prevent further drift
in the dates. The important effects of the change were (a) Drop 10 days from October 1582 to realign the Vernal Equinox with 21 March,
(b) change leap year selection so that not all years ending in "00" are leap years, and (c) change the beginning of the year to
1 January from 25 March.  Adoption of the new calendar was essentially immediate within Catholic countries. In the Protestant countries,
where papal authority was neither recognized not appreciated, adoption came more slowly. 
England finally adopted the new calendar in 1752, with eleven days removed from September. The additional day came because the old and
new calendars disagreed on whether 1700 was a leap year, so the Julian calendar had to be adjusted by one more day.} are extrapolated
backward.  Note that this is not historical.
\item [Other coordinates:]  These are simply anything that is neither geographic nor calendar time related and are
expected to be simple floating point values such as [$\pm$]{\it xxx.xxx}[E$|$e$|$D$|$d[$\pm$][xx]], i.e., regular or exponential
notations, with the enhancement to understand FORTRAN double precision output which may use D instead of E for exponents.
These values are simply converted as they are to internal representation.  One exception is the concept
of relative time which is read as a floating point offset from an absolute time reference point (epoch).  The unit and the
epoch are specified with the {\bf TIME\_SYSTEM} parameter.  Relative time coordinates are expected when a coordinate transformation
involving relative time has been selected or when the \Opt{f} switch has been used to indicate relative time coordinates.
\end{description}

\subsection{Coordinate Transformations and Map Projections: The \Opt{J} option}
\index{\Opt{J}}
\index{Map projections}

\GMTfig[h]{GMT_-J}{The 25 projections available in \gmt.}

This option selects the coordinate transformation or map projection.  The general format is

\begin{itemize}
\item {\bf --J}$\delta$[{\it parameters}/]{\it scale}.  Here, $\delta$ is a \emph{lower-case}
letter of the alphabet that selects a particular map projection, the {\it parameters}
is zero or more slash-delimited projection parameter, and {\it scale} is map scale given in
distance units per degree or as 1:xxxxx.
\item {\bf --J}$\Delta$[{\it parameters}/]{\it width}.  Here, $\Delta$ is an \emph{upper-case}
letter of the alphabet that selects a particular map projection, the {\it parameters}
is zero or more slash-delimited projection parameter, and {\it width} is map width (map
height is automatically computed from the implied map scale and region).
\end{itemize}

The projections avaiable in \GMT\ are presented in Figure~\ref{fig:GMT_-J}.
For details on all \GMT\ projections and the required parameters, see the \GMTprog{psbasemap} man page.
We will also show examples of every projection in the next chapter, and a quick
summary of projection syntax was given in Chapter 3.

\subsection{Map frame and axes annotations: The \Opt{B} option}
\index{\Opt{B}}
\index{Tickmarks}
\index{Annotations}
\index{Gridlines}
\index{Frame}
\index{Basemap}
\label{sec:timeaxis}
This is by far the most complicated option in \GMT, but most examples
of its usage are actually quite simple.
Given as \Opt{B}[{\bf p}$|${\bf s}]{\it xinfo}[/{\it yinfo}[/{\it zinfo}]][:."title string":][{\bf W}$|${\bf w}][{\bf E}$|${\bf e}][{\bf S}$|${\bf s}][{\bf N}$|${\bf n}][{\bf Z}$|${\bf z}[{\bf +}]],
this switch specifies map boundaries (or plot axes) to be plotted by using the
selected information. The optional flag following \Opt{B} selects {\bf p}(rimary) [Default] or {\bf s}(econdary)
axes information (mostly used for time axes annotations; see examples below).
The components {\it xinfo}, {\it yinfo} and {\it zinfo} are of the form \\

\par {\it info}[:"axis label":][:\verb+^+"prefix":][:,"unit label":] \\

\noindent
where {\it info} is one or more concatenated substrings of the form
[{\bf t}]{\it stride}[$\pm${\it phase}][{\bf u}].  The {\bf t} flag sets the axis item of interest; the
available items are listed in Table~\ref{tbl:inttype}.  By
default, all 4 map boundaries (or plot axes) are plotted (denoted {\bf W}, {\bf E}, {\bf S},
{\bf N}).  To change this selection, append the codes for those you want
(e.g., {\bf WSn}).  Upper case (e.g., {\bf W}) will annotate in addition to
draw axis/tick-marks.  The title, if given, will appear centered above the plot\footnote{However,
it is suppressed when a 3-D view is selected.}.  Unit label or prefix may start with a
leading -- to suppress the space between it and the annotation.  Normally, equidistant annotations
occur at multiples of {\it stride}; you can phase-shift this by appending $\pm${\it phase}.
\begin{table}[H]
\centering
\begin{tabular}{|c|l|} \hline
\emph{Flag}	& \emph{Description} \\ \hline
{\bf a}	&	Annotation tick spacing \\ \hline
{\bf f}	&	Frame tick spacing \\ \hline
{\bf g}	&	Grid tick spacing \\ \hline
\end{tabular}
\caption{Interval type codes.}
\label{tbl:inttype}
\end{table}
\noindent
Note that the appearance of certain time annotations (month-, week-, and day-names) may be affected
by the {\bf TIME\_LANGUAGE}, {\bf TIME\_FORMAT\_PRIMARY}, and {\bf TIME\_FORMAT\_SECONDARY} settings.

The unit flag {\bf u} can take on one of 18 codes; these are listed in  Table~\ref{tbl:units}.

\begin{table}[h]
\centering
\begin{tabular}{|c|l|l|} \hline
\emph{Flag}	& \emph{Unit} & \emph{Description} \\ \hline
{\bf Y}	&	year		& Plot using all 4 digits \\ \hline
{\bf y}	&	year		& Plot using last 2 digits \\ \hline
{\bf O}	&	month		& Format annotation using {\bf PLOT\_DATE\_FORMAT} \\ \hline
{\bf o}	&	month		& Plot as 2-digit integer (1--12) \\ \hline
{\bf U}	&	ISO week	& Format annotation using {\bf PLOT\_DATE\_FORMAT} \\ \hline
{\bf u}	&	ISO week	& Plot as 2-digit integer (1--53) \\ \hline
{\bf r}	&	Gregorian week	& 7-day stride from start of week ({\bf TIME\_WEEK\_START}) \\ \hline
{\bf K}	&	ISO weekday	& Plot name of weekday in selected language \\ \hline
{\bf k}	&	weekday		& Plot number of day in the week (1-7)  {see \bf TIME\_WEEK\_START}\\ \hline
{\bf D}	&	date		& Format annotation using {\bf PLOT\_DATE\_FORMAT} \\ \hline
{\bf d}	&	day		& Plot day of month (1--31) or day of year (1--366) {see \bf PLOT\_DATE\_FORMAT} \\ \hline
{\bf R}	&	day		& Same as {\bf d}; annotations aligned with week ({\bf TIME\_WEEK\_START})\\ \hline
{\bf H}	&	hour		& Format annotation using {\bf PLOT\_CLOCK\_FORMAT} \\ \hline
{\bf h}	&	hour		& Plot as 2-digit integer (0--24) \\ \hline
{\bf M}	&	minute		& Format annotation using {\bf PLOT\_CLOCK\_FORMAT} \\ \hline
{\bf m}	&	minute		& Plot as 2-digit integer (0--60) \\ \hline
{\bf C}	&	seconds		& Format annotation using {\bf PLOT\_CLOCK\_FORMAT} \\ \hline
{\bf c}	&	seconds		& Plot as 2-digit integer (0--60) \\ \hline
\end{tabular}
\caption{Interval unit codes.}
\label{tbl:units}
\end{table}

\noindent

Almost all of these units are time-axis specific.  However, the {\bf m} and {\bf c} units will be
interpreted as arc minutes and arc seconds, respectively, when a map projection is in effect.

There may be two levels of annotations.  Here, ``primary'' refers to the annotation
that is closest to the axis (this is the primary annotation), while ``secondary'' refers to the secondary
annotation that is plotted further from the axis.  The examples below
will clarify what is meant.  Note that the terms ``primary'' and ``secondary'' do not reflect any hierarchical
order of units: The ``primary'' annotation interval is smaller (e.g., days) while the
``secondary'' annotation interval typically is larger (e.g., months).

\subsubsection{Geographic basemaps}

Geographic basemaps may differ from regular plot axis in that some projections support a
``fancy'' form of axis and is selected by the {\bf BASEMAP\_TYPE} setting.  The annotations will be formatted according to
the {\bf PLOT\_DEGREE\_FORMAT} template and {\bf DEGREE\_SYMBOL} setting.  An example of part of a basemap is shown in Figure~\ref{fig:GMT_-B_geo}.

\GMTfig[h]{GMT_-B_geo}{Geographic map border using separate selections for annotation,
frame, and grid intervals.  Formatting of the annotation is controlled by
the parameter {\bf PLOT\_DEGREE\_FORMAT} in your \filename{.gmtdefaults4}\ file.}

\subsubsection{Cartesian linear axes}

For non-geographic axes, the {\bf BASEMAP\_TYPE} setting is implicitly set to plain.  Other than that,
cartesian linear axes are very similar to geographic axes.  The annotation format may be controlled with
the {\bf D\_FORMAT} parameter.  By default, it is set to ``\%lg'', which is a C language format statement
for floating point numbers, and with this setting the various axis routines will automatically determine
how many decimal points should be used by inspecting the {\it stride} settings\footnote{Please consult
the man page for \emph{printf} or any book on C.}.  If {\bf D\_FORMAT} is set
to another format it will be used directly (.e.g, ``\%.2lf'' for a fixed, two decimals format).
Note that for these axes you may use the {\it unit} setting to
add a unit string to each annotation (see Figure~\ref{fig:GMT_-B_linear}).

\GMTfig[h]{GMT_-B_linear}{Linear Cartesian projection axis.  Long tickmarks accompany
annotations, shorter ticks indicate frame interval.  The axis label is
optional.  We used \Opt{R}0/12/0/1 \Opt{JX}3/0.4
\Opt{Ba}4{\bf f}2{\bf g}1:Frequency::,\%:.}
\
\subsubsection{Cartesian log$_{10}$ axes}
\index{log$_{10}$ axes}
\index{Logarithmic axes}

Due to the logarithmic nature of annotation spacings, the {\it stride} parameter take on specific
meanings.  The following concerns are specific to log axes:

\begin{enumerate}
\item {\it stride} must be 1, 2, or 3.  Annotations/ticks will
then occur at 1, 1--2--5, or 1,2,3,4,...,9, respectively, for each magnitude range.

\item Append {\bf l} to {\it stride}. Then, log$_{10}$ of the annotation
is plotted at every integer log$_{10}$ value (e.g., $x = 100$ will be annotated as ``2'')
[Default annotates $x$ as is].

\item Append {\bf p} to {\it stride}.  Then, annotations appear as 10
raised to log$_{10}$ of the value (e.g., $10^{-5}$).

\end{enumerate}

\GMTfig[h]{GMT_-B_log}{Logarithmic projection axis using separate values for annotation,
frame, and grid intervals.  (top) Here, we have chosen to annotate the actual
values.  Interval = 1 means every whole power of 10, 2 means 1, 2, 5 times
powers of 10, and 3 means every 0.1 times powers of 10.  We used
\Opt{R}1/1000/0/1 \Opt{JX}3l/0.4 \Opt{Ba}1{\bf f}2{\bf g}3.
(middle) Here, we have chosen to
annotate log$_{10}$ of the actual values, with \Opt{Ba}1{\bf f}2{\bf g}3{\bf l}. 
(bottom) We annotate every power of 10 using log$_{10}$ of the actual values
as exponents, with \Opt{Ba}1{\bf f}2{\bf g}3{\bf p}.}

\index{Exponential axis}
\subsubsection{Cartesian exponential axes}
Normally, {\it stride} will be used to create equidistant (in the user's unit) annotations
or ticks, but because of the exponential nature of the axis, such annotations may converge
on each other at one end of the axis.  To avoid this problem, you can
append {\bf p }to {\it stride}, and the annotation
interval is expected to be in transformed units, yet the annotation itself will be plotted
as un-transformed units.  E.g., if {\it stride} = 1 and power = 0.5 (i.e., sqrt),
then equidistant annotations labeled 1, 4, 9, ... will appear.

\GMTfig[h]{GMT_-B_pow}{Exponential or power projection axis.  (top) Using an exponent of 0.5
yields a $\sqrt{x}$ axis.  Here, intervals refer to actual data values, in
\Opt{R}0/100/0/1 \Opt{JX}3{\bf p}0.5/0.4\ \Opt{Ba}20{\bf f}10{\bf g}5.
(bottom) Here, intervals refer to projected values, although the annotation
uses the corresponding unprojected values, as in \Opt{Ba}3{\bf f}2{\bf g}1{\bf p}.}

\index{Time axis}
\subsubsection{Cartesian time axes}

What sets time axis apart from the other kinds of plot axes is the numerous ways in which we
may want to tick and annotate the axis.  Not only do we have both primary and secondary annotation
items but we also have interval annotations versus tickmark annotations, numerous time units,
and several ways in which to modify the plot.  We will demonstrate this flexibility with a
series of examples.  While all our examples will only show a single $x$-axis, time-axis is supported for all axes.

Our first example shows a time period of almost two months in Spring 2000.  We want to annotate the month
intervals as well as the date at the start of each week:

\input{scripts/GMT_-B_time1}

These commands result in Figure~\ref{fig:GMT_-B_time1}.  Note the leading hyphen in the {\bf PLOT\_DATE\_FORMAT}
removes leading zeros from calender items (e.g., 02 becomes 2).
\GMTfig[h]{GMT_-B_time1}{Cartesian time axis, example 1.}

The next example shows two different ways to annotate an axis portraying 2 days in September:

\input{scripts/GMT_-B_time2}

The lower example (Figure~\ref{fig:GMT_-B_time2}) chooses to annotate the weekdays (by specifying {\bf a}1{\bf K}) while the upper
example choses dates (by specifying {\bf a}1{\bf D}).  Note how the clock format only selects hours and minutes (no seconds) and
the date format selects a month name, followed by one space and a two-digit day-of-month number.

\GMTfig[h]{GMT_-B_time2}{Cartesian time axis, example 2.}

The third example presents two years, annotating both the years and every 3rd month.

\input{scripts/GMT_-B_time3}

Note that while the year annotation is centered on the 1-year interval, the month annotations must be centered
on the corresponding month and \emph{not} the 3-month interval.  The {\bf PLOT\_DATE\_FORMAT} selects month
name only and {\bf PLOT\_FORMAT\_PRIMARY} selects the 1-character, upper case abbreviation of monthnames using
the current language (selected by {\bf TIME\_LANGUAGE}).
\GMTfig[h]{GMT_-B_time3}{Cartesian time axis, example 3.}

The fourth example (Figure~\ref{fig:GMT_-B_time4}) only shows a few hours of a day.  We select both primary and
secondary annotations, ask for a 12-hour clock, and let time go from right to left:

\input{scripts/GMT_-B_time4}
\GMTfig[h]{GMT_-B_time4}{Cartesian time axis, example 4.}

The fifth example shows a few weeks of time (Figure~\ref{fig:GMT_-B_time5}).  The lower axis shows ISO weeks with
week numbers and abbreviated names of the weekdays.   The upper uses Gregorian weeks (which start at the day chosen
by {\bf TIME\_WEEK\_START}); they do not have numbers.
\input{scripts/GMT_-B_time5}
\GMTfig[h]{GMT_-B_time5}{Cartesian time axis, example 5.}

Our sixth example shows the first five months of 1996, and we have annotated each month with an abbreviated, upper case
name and 2-digit year.  Only the primary axes information is specified.
\input{scripts/GMT_-B_time6}

\GMTfig[h]{GMT_-B_time6}{Cartesian time axis, example 6.}

Our seventh and final example illustrates annotation of year-days.  Unless we specify the formatting with a leading hyphen
in  {\bf PLOT\_DATE\_FORMAT} we get 3-digit integer days.  Note that in order to have the two years
annotated we need to allow for the annotation of small fractional intervals; normally such truncated interval must
be at least half of a full interval.
\input{scripts/GMT_-B_time7}

\GMTfig[h]{GMT_-B_time7}{Cartesian time axis, example 7.}

\subsection{Header data records: The \Opt{H} option}
\index{\Opt{H}}
\index{Header records}
\label{sec:header}
The \Opt{H}[{\bf i}][{\it n\_recs}] option lets \GMT\ know that input file(s) have
one [Default] or more header records.  If there are more than one header
record you must specify the number after the \Opt{H} option, e.g., \Opt{H}4.  The
default number of header records if \Opt{H} is used is one of the many parameters
in the \filename{.gmtdefaults4} file ({\bf N\_HEADER\_RECS}), but can be overridden
by \Opt{H}{\it n\_header\_recs}.
Note that blank lines and records that be start with the character \# are
automatically skipped.  Normally, programs that both read and write tables will
output the header records that are found on input.  Use \Opt{Hi} to suppress the
writing of header records.

\subsection{Portrait plot orientation: The \Opt{P} option} 
\index{Orientation!of plot}
\index{Plot!orientation}
\index{Landscape orientation}
\index{Orientation!landscape}
\index{Portrait orientation \Opt{P}}
\index{Orientation!portrait \Opt{P}}
\index{\Opt{P} (portrait orientation)}

\GMTfig[h]{GMT_-P}{Users can specify Landscape [Default] or Portrait (\Opt{P}) orientation.}

\Opt{P} selects Portrait plotting mode\footnote{For historical reasons, the \GMT\
Default is Landscape, see \GMTprog{gmtdefaults} to change this.}.  In general,
a plot has an {\it x}-axis increasing from left to
right and a {\it y}-axis increasing from bottom to top.  If the
paper is turned so that the long dimension of the paper is
parallel to the {\it x}-axis then the plot is said to have
\emph{Landscape} orientation.  If the long dimension of
the paper parallels the {\it y}-axis the orientation is called
\emph{Portrait} (think of taking pictures with a camera
and these words make sense).  The
default Landscape orientation is obtained by translating the origin in the
{\it x}-direction (by the width of the chosen paper {\bf PAPER\_MEDIA)} and then rotating the
coordinate system counterclockwise by 90\DS.  By default the {\bf PAPER\_MEDIA} is
set to Letter (or A4 if SI is chosen); this value must be changed
when using different media, such as 11" x 17" or large format plotters
(Figure~\ref{fig:GMT_-P}).


\subsection{Plot Overlays: The \Opt{K} \Opt{O} options}
\index{Overlay plot \Opt{O} \Opt{K}}
\index{Plot!overlay \Opt{O} \Opt{K}}
\index{Plot!continue \Opt{O} \Opt{K}}
\index{\Opt{K}}
\index{\Opt{O}}

\GMTfig[h]{GMT_-OK}{A final \PS\ file consists of a stack of individual pieces.}

The \Opt{K} and \Opt{O} options control the generation of \PS\ code for multiple
overlay plots.  All \PS\ files must have a header (for initializations),
a body (drawing the figure), and a trailer (printing it out) (see
Figure~\ref{fig:GMT_-OK}).  Thus,
when overlaying several \GMT\ plots we must make sure that the first plot
call ommits the trailer, that all intermediate calls omit both header and
trailer, and that the final overlay omits the header.
\Opt{K} omits the trailer which implies that more \PS\ code will be appended
later [Default terminates the plot system].  \Opt{O} selects Overlay plot
mode and ommits the header information [Default initializes a new plot system].
Most unexpected results for multiple overlay plots can be traced to the
incorrect use of these options.  If you run only one plot
program, ignore both the \Opt{O} and \Opt{K} options; they are
only used when stacking plots. 

\subsection{Timestamps on plots: The \Opt{U} option} 
\index{\Opt{U}}
\index{Timestamp}
\index{UNIX@\UNIX!timestamp}

\Opt{U} draws \UNIX\ System time stamp.  Optionally, append an arbitrary
text string (surrounded by double quotes), or the code {\bf c}, which will
plot the current command string (Figure~\ref{fig:GMT_-U}).

\GMTfig[h]{GMT_-U}{The \Opt{U} option makes it easy to ``date'' a plot.}

\subsection{Verbose Feedback: The \Opt{V} option} 
\index{\Opt{V}}
\index{Verbose}
\label{sec:verbose}
\Opt{V} selects verbose mode, which will send progress reports to
\emph{stderr} [Default runs ``silently''].  The interpretation of
this option can be toggled by changing the default {\bf VERBOSE}.

\subsection{Plot positioning and layout: The \Opt{X} \Opt{Y} options}
\index{\Opt{X}}
\index{\Opt{Y}}
\index{Plot!offset}
\index{Offset, plot}
\GMTfig[h]{GMT_-XY}{Plot origin can be translated freely with \Opt{X} \Opt{Y}.}

\Opt{X} and \Opt{Y} shift origin of plot by ({\it xoff},{\it yoff})
inches (Default is ({\bf X\_ORIGIN}, {\bf Y\_ORIGIN}) for new plots\footnote{Ensures that
boundary annotations do not fall off the page.} and (0,0) for overlays (\Opt{O})).
By default, all translations are relative to the previous origin
(see Figure~\ref{fig:GMT_-XY}).  Supply offset as {\bf c} to center the
plot in that direction relative to the page margin.
Absolute translations (i.e., relative to a fixed point (0,0) at the
lower left corner of the paper) can be achieve by prepending ``a''
to the offsets.  Subsequent overlays will be co-registered with the
previous plot unless the origin is shifted using these options.
The offsets are measured in the current coordinates system (which can
be rotated using the initial \Opt{P} option; subsequent \Opt{P} options
for overlays are ignored).


\subsection{Binary table i/o: The \Opt{b} option}
\index{Table!binary}
\index{Binary tables}
\index{Input!binary \Opt{bi}}
\index{Output!binary \Opt{bo}}
\index{\Opt{bi} (select binary input)}
\index{\Opt{bo} (select binary output)}

All \GMT\ programs that accept table data input may read ASCII
or binary data.  When using binary data the user must be aware
of the fact that \GMT\ has no way of determining the actual
number of columns in the file.  You must therefore pass that
information to \GMT\ via the binary \Opt{bi}[{\bf s}]{\it n} option,
where {\it n} is the actual number of data columns ({\bf s}
indicates single rather than double precision).
Note that {\it n} may be larger than {\it m}, the number of
columns that the \GMT\ program requires to do its task.  If
{\it n} is not given then it defaults to {\it m}.  If
{\it n} $<$ {\it m} an error is generated.  For more information,
see Appendix B.

\subsection{Data type selection: The \Opt{f} option}
\index{Table!format}
\index{Input!format \Opt{fi}}
\index{Output!format \Opt{fo}}
\index{\Opt{fi} (set input format)}
\index{\Opt{fo} (set output format)}

As mentioned in Section~\ref{sec:io}, when map projections are not required we must explicitly state
what kind of data each input or output column contains.  This is accomplished with
the \Opt{f} option.  Following an optional {\bf i} (for input only) or {\bf o} (for output
only), we append a text string with information about each column (or range of columns) separated by commas.
Each string starts with the column number (0 is first column) followed by either
x (longitude), y (latitude), T (absolute calendar time) or t (relative time).  If
several consecutive columns have the same format you may specify a range of columns
rather than a single column, e.e., 0-4 for the first 5 columns.  For example, if our
input file has geographic coordinates (latitude, longitude) with absolute calendar
coordinates in the columns 3 and 4, we would specify {\bf fi}0y,1x,3-4T.  All other columns
are assumed to have the default, floating point format and need not be set individually.
The shorthand \Opt{f}[{\bf i}$|${\bf o}]{\bf g} means \Opt{f}[{\bf i}$|${\bf o}]0x,1y (geographic coordinates).

\subsection{Number of Copies: The \Opt{c} option}
\index{\Opt{c}}
\index{Number of copies}

The \Opt{c} option specifies the number of plot copies [Default is 1].  This
value is embedded in the \PS\ file and will make a printer issue the chosen
number of copies without respooling.

\subsection{Lat/Lon or Lon/Lat?: The \Opt{:} option}
\index{\Opt{:}}
\index{lat/lon input}

For geographical data, the first column is expected to contain longitudes
and the second to contain latitudes.  To reverse this expectation you must
apply the \Opt{:} option.  Note that command line arguments that may take
geographic coordinates (e.g., \Opt{R}) \emph{always} expect longitude before
latitude.

\index{Command line!standardized options|)}%

\section{Command Line History}
\index{Command line!history}
\index{History, command line}

\GMT\ programs ``remember'' the standardized command line options
(See Section~\ref{sec:stopt}) given during their previous invocations
and this provides a shorthand notation for complex options.
For example, if a basemap was created with an oblique Mercator
projection, specified as

\vspace{\baselineskip} 

\texttt{-Joc170W/25:30S/33W/56:20N/1:500000} \\ 
\vspace{\baselineskip} 
\noindent
then a subsequent \GMTprog{psxy} command to plot symbols only needs
to state \Opt{J}o in order to activate the same projection.  In
contrast, note that \Opt{J} by itself will pick the most recently used projection.
Previous commands are maintained in the file \filename{.gmtcommands4},
of which there will be one in each directory you run the programs
from.  This is handy if you create separate directories for
separate projects since chances are that data manipulations
and plotting for each project will share many of the same options.
Note that an option spelled out on the command line will always
override the last entry in the \filename{.gmtcommands4} file and,
if execution is successful, will replace this entry as the
previous option argument in the \filename{.gmtcommands4} file.
If you call several \GMT\ modules piped together then \GMT\ cannot
guarantee that the \filename{.gmtcommands4} file is processed
in the intended order from left to right.  The only guarantee
is that the file will not be clobbered since \GMT\ now uses advisory
file locking.  The uncertainty in processing order makes the use
of shorthands in pipes unreliable.  We therefore recommend that you
only use shorthands in single process command lines, and spell out
the full command option when using chains of commands connected with
pipes.

\section{Usage messages, syntax- and general error messages}
\index{Usage messages}
\index{Messages!usage}
\index{Syntax messages}
\index{Messages!syntax}
\index{Error messages}
\index{Messages!error}

Each program carries a usage message.  If you enter the program
name without any arguments, the program will write the complete
usage message to standard error (your screen, unless you
redirect it).  This message explains in detail what all the
valid arguments are.  If you enter the program name followed
by a \emph{hyphen} (--) only you will get a shorter version
which only shows the command line syntax and no detailed
explanations.  If you incorrectly specify an option or omit
a required option, the program will produce syntax errors and
explain what the correct syntax for these options should be.
If an error occurs during the running of a program, the
program will in some cases recognize this and give you an
error message.  Usually this will also terminate the run.
The error messages generally begin with the name of the
program in which the error occurred; if you have several
programs piped together this tells you where the trouble is. 

\section{Standard Input or File, header records}
\index{Standard input}
\index{Input!standard}
\index{Header record \Opt{H}}
\index{Record, header \Opt{H}}
\index{\Opt{H} (header records)}
\index{{\bf GMT\_DATADIR}}
\index{{\bf GMT\_GRIDDIR}}
\index{{\bf GMT\_IMGDIR}}

Most of the programs which expect table data input can read
either standard input or input in one or several files.
These programs will try to read {\it stdin} unless you type
the filename(s) on the command line without the above hyphens.
(If the program sees a hyphen, it reads the next character
as an instruction; if an argument begins without a hyphen,
it tries to open this argument as a filename).
This feature allows you to connect programs with pipes if
you like.  If your input is ASCII and has one or more header
records, you must use the \Opt{H} option (see Section~\ref{sec:header}).
For binary table data no headers are allowed.
ASCII files may in many cases also contain sub-headers
separating data segments.  These are called ``multi-segment files''
and requires a special option (typically \Opt{M}); see Appendix B for complete
documentation. 

If filenames are given for reading, \GMT\ programs will first look for them in the
current directory.  If the file is not found, the programs
will look in three other directories pointed to by environmental
parameters (if set).  These are {\bf GMT\_DATADIR}, {\bf GMT\_GRIDDIR}, and
{\bf GMT\_IMGDIR} and may be set by the user to point to directories
that contain data sets of general use.  Data sets that are often needed
may be placed in these directories, thus eliminating the need to specify
a full path to the file.  Program output is always written to the
current directory unless a full path has been specified.

\section{Verbose Operation}
\index{Verbose operation\Opt{V}}
\index{\Opt{V} (verbose mode)}

Most of the programs take an optional \Opt{V} argument
which will run the program in the ``verbose'' mode (see Section~\ref{sec:verbose}).
Verbose will write to standard error information about the progress
of the operation you are running.  Verbose reports things
such as counts of points read, names of data files
processed, convergence of iterative solutions, and the like.
Since these messages are written to {\it stderr},  the
verbose talk remains separate from your data output. 

\section{Output}
\index{Output!standard}
\index{Output!error}

Most programs write their results, including \PS\
plots, to standard output.  The exceptions are those which may
create binary netCDF grd-files such as \GMTprog{surface} (due to
the design of netCDF a filename must be provided; however,
alternative binary output formats allowing piping are available; see Section~\ref{sec:grdformats}).
With \UNIX\, you can redirect standard output to a file or pipe it
into another process.  Error messages, usage messages, and
verbose comments are written to standard error in all cases.
You can use \UNIX\ to redirect standard error as well,
if you want to create a log file of what you are doing. 

\section{Input Data Formats}
\index{Input!format}
\label{sec:io}

Most of the time, \GMT\ will know what kind of $x$ and $y$ coordinates it is reading because you have selected
a particular coordinate transformation or map projection.  However,
there may be times when you must explicitly specify what you are
providing as input using the \Opt{f} switch (see below). When binary data are expected (\Opt{b}) they must all
be floating point numbers, however for ASCII input there are numerous
ways to encode data coordinates (which may be separated by white-space or commas).  Valid input data are generally
of the same form as the arguments to the \Opt{R} option (see Section~\ref{sec:R}), with the following additional
flexibility for calendar data:

Because of the widespread use of incompatible and ambiguous formats, the processing of input
date components is guided by the template {\bf INPUT\_DATE\_FORMAT} in your
\filename{.gmtdefaults4} file and by default set to {\it yyyy-mm-dd}.  Y2K-challenged input data such as 29/05/89 can be processed by setting {\bf INPUT\_DATE\_FORMAT}
to dd/mm/yy.  A complete discription of possible formats is given in the \GMTprog{gmtdefaults}
man page.  The {\it clock} string is more standardized but issues like 12- or 24-hour clocks complicate matters
as well as the presence or absence of delimiters between fields.  Thus, the processing of input
clock coordinates is guided by the template {\bf INPUT\_CLOCK\_FORMAT} which defaults to {\it hh:mm:ss.xxx}.

\GMT\ programs that require a map projection argument will implicitly know what kind of data to expect, and the
input processing is done accordingly.  However, some programs that simply report on minimum and maximum
values or just do a reformatting of the data will in general not know what to expect, and furthermore there is
no way for the programs to know what kind of data other columns (beyond the leading $x$ and $y$ columns) contain.
In such instances we must
explicitly tell \GMT\ that we are feeding it data in the specific geographic or calendar formats (floating point
data are assumed by default).  We specify the data type via the \Opt{f} option (which sets both input and output
formats; use \Opt{fi} and \Opt{fo} to set input and output separately).  For instance, to specify that the
the first two columns are longitude and latitude, and that the third column (e.g., $z$) is absolute calendar time, we add
\Opt{fi}0x,1y,2T to the command line.  For more details, see the man page for the program you need to use.

\section{Output Data Formats}
\index{Output!format}

The numerical output from \GMT\ programs can be binary (when \Opt{bo} is used) or ASCII [Default].
In the latter case the issue of formatting becomes important.  \GMT\ provides extensive
machinery for allowing just about any imaginable format to be used on output.  Analogous to
the processing of input data, several templates guide the formatting process.  These are
{\bf OUTPUT\_DATE\_FORMAT} and {\bf OUTPUT\_CLOCK\_FORMAT} for calendar-time coordinates,
{\bf OUTPUT\_DEGREE\_FORMAT} for geographical coordinates, and {\bf D\_FORMAT} for generic
floating point data.  In addition, the user have control over how columns are separated via
the {\bf FIELD\_SEPARATOR} parameter.  Thus, as an example, it is possible to create limited
FORTRAN-style card records by setting {\bf D\_FORMAT} to \%7.3lf and {\bf FIELD\_SEPARATOR} to
none [Default is tab].

\section{\PS\ Features}
\index{PostScript@\PS!features}
\PS\ is a command language for driving graphics
devices such as laser printers.  It is ASCII text which you
can read and edit as you wish (assuming you have some knowledge
of the syntax).  We prefer this to binary metafile plot
systems since such files cannot easily be modified after they
have been created.  \GMT\ programs also write many comments to
the plot file which make it easier for users to orient
themselves should they need to edit the file (e.g., \% Start
of x-axis).  All \GMT\ programs create \PS\ code by
calling the {\bf pslib} plot library (The user may call these
functions from his/her own C or FORTRAN plot programs. See the
manual pages for {\bf pslib} syntax).  Although \GMT\ programs
can create very individualized plot code, there will always be
cases not covered by these programs.  Some knowledge of
\PS\ will enable the user to add such features
directly into the plot file.  By default, \GMT\ will produce
freeform \PS\ output with embedded printer directives.  To
produce Encapsulated \PS\ (EPS) that can be imported into graphics programs such as
\progname{IslandDraw}, \progname{CorelDraw}, \progname{Illustrator} or \progname{Freehand} for further
embellishment, change the {\bf PAPER\_MEDIA} setting in the \filename{.gmtdefaults4}
file.  See Appendix C and the \GMTprog{gmtdefaults} man page for more details.

\section{Specifying pen attributes}

\index{Attributes!pen}%
\index{Pen!setting attributes}%
\label{sec:pen}
A pen in \GMT\ has three attributes: {\it width}, {\it color},
and {\it texture}.  Most programs will accept pen attributes in
the form of an option argument, with commas separating the
given attributes, e.g.,

\vspace{\baselineskip} 

\par \Opt{W}[{\it width}[{\bf c$|$i$|$p$|$m}]],[{\it color}],[{\it texture}[{\bf c$|$i$|$p$|$m}]]\par 

\begin{description}
\index{Pen!width}
\index{Width, pen}
\index{Attributes!pen!width}%
\item[$\rightarrow$]{\it Width} is by default measured in units of the
current device resolution (i.e., the value assigned to the parameter
{\bf DOTS\_PR\_INCH} in your \filename{.gmtdefaults4} file).  Thus, if the
dpi is set to 300 this unit is 1/300th of an inch.  Append {\bf c},
{\bf i}, {\bf p}, or {\bf m} to specify pen width in cm, inch, points
(1/72 of an inch)\footnote{\PS\ definition.  In the typesetting industry
a slighly different definition of point (1/72.27 inch) is used.}, or meters, respectively.
Note that a pen thickness of 5 will be of different physical width
depending on your dpi setting, whereas a thickness of 5{\bf p} will
always be 5/72 of an inch.  Minimum-thickness pens can be achieved by
giving zero width, but the result is device-dependent.  Finally, a few
predefined pen names can be used: default, faint, and \{thin, thick, fat\}[er$|$est].
Table~\ref{tbl:pennames} shows this list and the corresponding pen widths.
\begin{table}[h]
\centering
\begin{tabular}{|l|c|} \hline
\multicolumn{1}{|c|}{\emph{Pen name}}	&	\multicolumn{1}{c|}{\emph{Width}} \\ \hline
faint		&	0 \\ \hline 
default		&	0.25p \\ \hline 
thinnest	&	0.25p \\ \hline 
thinner		&	0.50p \\ \hline 
thin		&	0.75p \\ \hline 
thick		&	1.0p \\ \hline 
thicker		&	1.5p \\ \hline 
thickest	&	2p \\ \hline 
fat		&	3p \\ \hline 
fatter		&	6p \\ \hline 
fat		&	12p \\ \hline 
\end{tabular}
\caption{\gmt\ predefined pen widths.}
\label{tbl:pennames}
\end{table}

\index{Pen!color}
\index{Color!pen}
\index{Attributes!pen!color}%
\item[$\rightarrow$]The {\it color} can be specified in five different ways:
\begin{enumerate}
\item Gray. Specify a {\it gray} shade in the range 0--255 (linearly going from black [0] to white [255]).
\item RGB. Specify {\it r}/{\it g}/{\it b}, each ranging from 0--255.  Here 0/0/0 is black and 255/255/255 is white.
\item HSV. Specify {\it hue}-{\it saturation}-{\it value}, with the former in the 0--360 degree range while the latter
two take on the range 0--1\footnote{For an overview of color systems such as HSV, see Appendix I.}.
\item CMYK. Specify {\it cyan}/{\it magenta}/{\it yellow}/{\it black}, each ranging from 0--100\%.
\item Name.  Specify one of 663 valid color names as defined in the X11 color table\footnote{On most \UNIX-type systems
you can find the file \filename{rgb.txt} in /usr/X11R6/lib/X11 or thereabouts, or use the command \progname{showrgb}.}.
A very small yet versatile subset consists of the 29 choices {\it white}, {\it black}, and [light$|$dark]\{{\it red,
orange, yellow, green, cyan, blue, magenta, gray, brown}\}.
\end{enumerate}

\index{Pen!texture}
\index{Texture, pen}
\index{Attributes!pen!texture}%
\item[$\rightarrow$]The {\it texture} attribute controls the appearance
of the line.  ``.'' yieds a dotted line, while a dashed pen is requested with ``-''.
For more detailed attributes you may specify {\it string}:{\it offset},
where {\it string} is a series of numbers separated by underscores.
These numbers represent a pattern by indicating the length of line
segments and the gap between segments.  The {\it offset} phase-shifts the
pattern from the beginning the line.  For example, if you want a yellow line of width
0.1 cm that alternates between long dashes (4 points), an 8 point gap, then
a 5 point dash, then another 8 point gap, with pattern offset by 2 points
from the origin, specify \Opt{W}0.1c,yellow,4\_8\_5\_8:2p.
In general, the texture units can be specified in dpi units, cm, inch, points,
or meters (see \emph{width} discussion above). 
\end{description} 

\section{Specifying area fill attributes}

\index{Attributes!fill!color}%
\index{Attributes!fill!pattern}%
\index{Fill!attributes!color}%
\index{Fill!attributes!pattern}%
\index{Color!fill}%
\index{Pattern!fill}%
\index{Pattern!color}%
\index{\Opt{GP} \Opt{Gp}}
\label{sec:fill}

Many plotting programs will allow the user to draw filled polygons or
symbols.  The fill specification may take two forms: 

\vspace{\baselineskip} 

\par \Opt{G}{\it fill}\par 

\par \Opt{Gp}{\it dpi/pattern}[:{\bf B}{\it color}[{\bf F}{\it color}]]\par 

\vspace{\baselineskip} 
\noindent
\begin{description}
\item [fill:]
In the first case we may specify a {\it gray} shade (0--255), RGB color
({\it r}/{\it g}/{\it b} all in the 0--255 range), HSV color ({\it hue}-{\it saturation}-{\it value}
in the 0--360, 0--1, 0--1 range), CMYK color ({\it cyan}/{\it magenta}/{\it yellow}/{\it black},
each ranging from 0--100\%), or a valid color name; in that respect it is similar
to specifying the pen color settings (see pen color discussion under Section~\ref{sec:pen}).
\item [pattern:]
The second form allows us to use a predefined bit-image pattern.
{\it pattern} can either be a number in the range 1--90 or the name of a 1-,
8-, or 24-bit Sun raster file.  The former will result in one of the 90
predefined 64 x 64 bit-patterns provided with \GMT\ and reproduced in Appendix E.
The latter allows the user to create customized, repeating images using
standard Sun rasterfiles\footnote{Convert other graphics formats to Sun ras format using
ImageMagick's \progname{convert} program.}.  The {\it dpi} parameter sets the resolution of
this image on the page;  the area fill is thus made up of a series of these
``tiles''.  Specifying {\it dpi} as 0 will result in highest resolution
obtainable given the present dpi setting in \filename{.gmtdefaults4}.
By specifying upper case \Opt{GP} instead of \Opt{Gp} the image will be
bit-reversed, i.e., white and black areas will be interchanged (only applies
to 1-bit images or predefined bit-image patterns).  For these patterns and
other 1-bit images one may specify alternative background and foreground
colors (by appending :{\bf B}{\it color}[{\bf F}{\it color}]) that will
replace the default white and black pixels, respectively.  Setting one of the
fore- or background colors to -- yields a \emph{transparent} image where only the
back- \emph{or} foreground pixels will be painted.
\end{description}

Due to \PS\ implementation limitations the rasterimages used with
\Opt{G} must be less than 146 x 146 pixels in size; for larger images see
\GMTprog{psimage}.  The format of Sun raster files is outlined in Appendix B.
Note that under \PS\ Level 1 the patterns are filled by using
the polygon as a \emph{clip path}.  Complex clip paths may require
more memory than the \PS\ interpreter has been assigned.
There is therefore the possibility that some \PS\ interpreters
(especially those supplied with older laserwriters) will run out of memory
and abort.  Should that occur we recommend that you use a regular grayshade
fill instead of the patterns.  Installing more memory in your printer
\emph{may or may not} solve the problem! 

\section{Color palette tables}

\index{Color!palette tables|(}
\index{cpt file|(}

Several programs, such as those which read 2-D gridded data sets and create
colored images or shaded reliefs, need to be told what colors to use and
over what {\it z}-range each color applies.  This is the purpose of the
color palette table (cpt-file).  These files may also be used by \GMTprog{psxy}
and \GMTprog{psxyz} to plot color-filled symbols.
The colors may be specified either in the RGB- (red, green, blue), CMYK- (cyan,
magenta, yellow, black), or in the HSV-system (hue, saturation, value, and
here the comment \# COLOR\_MODEL = HSV must be present in the cpt file since there
are no other way to distinguish between HSV and RGB).  Color names can also be used.
Using the RGB system\footnote{For CMYK the format obviously involves two extra columns.},
the format of the cpt-file is: 

\begin{center}
\begin{tabular}{lllllllll}
z$_0$ &  R$_{min}$ &  G$_{min}$ &  B$_{min}$ &  z$_1$ & R$_{max}$ &  G$_{max}$ &  B$_{max}$ &  [{\bf A}] \\ 
\ldots & & & & & & & & \\ 
z$_{n-2}$ &  R$_{min}$ &  G$_{min}$ &  B$_{min}$ &  z$_{n-1}$ &  R$_{max}$ &  G$_{max}$ &  B$_{max}$ &  [{\bf A}] \\
\end{tabular} 
\end{center}

Thus, for each ``{\it z}-slice'', defined as the interval between two boundaries
(e.g., {\it z$_0$} to {\it z$_1$}), the color can be constant (by letting R$_{min}$
= R$_{max}$, G$_{min}$ = G$_{max}$, and B$_{min}$ = B$_{max}$) or a continuous,
linear function of {\it z}.  The optional flag {\bf A} is used to indicate annotation
of the colorscale when plotted using \GMTprog{psscale}.  {\bf A} may be {\bf L},
{\bf U}, or {\bf B} to select annotation of the lower, upper, or both limits
of the particular $z$-slice.  However, the standard \Opt{B} option can be used
by \GMTprog{psscale} to affect annotation and ticking of colorscales.  The
background color (for {\it z}-values $<$ {\it z$_0$}), foreground color
(for {\it z}-values $>$ {\it z$_{n-1}$}), and not-a-number (NaN) color (for
{\it z}-values = NaN) are all defined in the \filename{.gmtdefaults4}
file, but can be overridden by the statements

\begin{center}
\begin{tabular}{llll}
B &  R$_{back}$ &  G$_{back}$ &  B$_{back}$ \\ 
F &  R$_{fore}$ &  G$_{fore}$ &  B$_{fore}$ \\ 
N &  R$_{nan}$ &  G$_{nan}$ &  B$_{nan}$ \\

\end{tabular}
\end{center}

\noindent
which can be inserted into the beginning or end of the cpt-file.  If
you prefer the HSV system, set the
\filename{.gmtdefaults4} parameter accordingly and replace red, green,
blue with hue, saturation, value.  Color palette tables that contain
grayshades only may replace the r-g-b triplets with a single grayshade
in the 0--255 range.  For CMYK, give four values in the 0--100 range.
Both the min and max color specifications in one {\it z}-slice must use
the same color system, i.e., you cannot mix ``red'' and 0/255/100 on the
same line.

A few programs (i.e., those that plot polygons such as \GMTprog{grdview},
\GMTprog{psscale}, and \GMTprog{psxy}) can accept pattern fills instead
of grayshades.  You must specify the pattern as in Section~\ref{sec:fill} (no
leading \Opt{G} of course), and only the first (low $z$) is used (we cannot
interpolate between patterns).  
Finally, some programs let you skip features
whose $z$-slice in the cptfile has grayshades set to --.  As an example,
consider

\begin{center}
\begin{tabular}{lllllllll}
30 &  p200/16 &  80 & -- \\ 
80 &  -- &  100 &  -- \\
100 &  255 &  0  &  0  &  200 &  255 &  255  &  0 \\
\end{tabular} 
\end{center}
\noindent
where slice $30 < z < 80$ is painted with pattern \# 16 at 200 dpi,
slice $80 < z < 100$ is skipped, while slice $100 < z < 200$ is
painted in a range of red to yellow, depending on the actual value
of $z$.

\index{Color!palette tables|)}
\index{cpt file|)}

\index{Artificial illumination}
\index{Illumination, artificial}
\index{Shaded relief}
\index{Relief, shaded}

Some programs like \GMTprog{grdimage} and \GMTprog{grdview} apply artificial
illumination to achieve shaded relief maps.  This is typically done
by finding the directional gradient in the direction of the artificial
light source and scaling the gradients to have approximately a normal
distribution on the interval $<$-1,+1$>$.  These intensities are used
to add ``white'' or ``black'' to the color as defined by the {\it z}-values
and the cpt-file.  An intensity of zero leaves the color unchanged.
Higher values will brighten the color, lower values will darken it,
all without changing the original hue of the color (see Appendix I
for more details).  The illumination is decoupled from the data
grd-file in that a separate grdfile holding intensities in the
$<$-1,+1$>$ range must be provided.  Such intensity files can be
derived from the data grdfile using \GMTprog{grdgradient} and modified
with \GMTprog{grdhisteq}, but could equally well be a separate data set.
E.g., some side-scan sonar systems collect both bathymetry and
backscatter intensities, and one may want to use the latter information
to specify the illumination of the colors defined by the former.
Similarly, one could portray magnetic anomalies superimposed on
topography by using the former for colors and the latter for shading. 

\section{Character escape sequences}
\label{sec:escape}
\index{Characters!European}
\index{Characters!escape sequences}
\index{Characters!escape sequences!subscript}
\index{Characters!escape sequences!superscript}
\index{Characters!escape sequences!switch fonts}
\index{Characters!escape sequences!composite character}
\index{Characters!escape sequences!small caps}
\index{Characters!escape sequences!octal character}
\index{Escape sequences!characters}
\index{European characters}
\index{Text!European}
\index{Text!escape sequences}
\index{Text!subscript}
\index{Subscripts}
\index{Text!superscript}
\index{Superscripts}
\index{Characters!composite}
\index{Composite characters}
\index{Font!switching to a}
\index{Font!symbol}
\index{Symbol font}
\index{"@, printing}
\index{Small caps}
\index{Characters!octal}
\index{Octal characters}

For annotation labels or textstrings plotted with \GMTprog{pstext},
\GMT\ provides several escape sequences that allow the user to
temporarily switch to the symbol font, turn on sub- or superscript,
etc. within words.  These conditions are toggled on/off by the
escape sequence @{\bf x}, where {\bf x} can be one of several types.
The escape sequences recognized in \GMT\ are listed in Table~\ref{tbl:escape}. 

\begin{table}[H]
\centering
\begin{tabular}{|l|l|} \hline
\multicolumn{1}{|c|}{\emph{Code}}	&	\multicolumn{1}{c|}{\emph{Effect}} \\ \hline
@\~	&	Turns symbol font on or off \\ \hline 
@\%{\it fontno}\%	&	Switches to another font; @\%\% resets to previous font \\ \hline 
@+	&	Turns superscript on or off \\ \hline 
@-	&	Turns subscript on or off \\ \hline 
@\#	&	Turns small caps on or off \\ \hline 
@!	&	Creates one composite character of the next two characters \\ \hline 
@@	&	Prints the @ sign itself \\ \hline 
\end{tabular}
\caption{\gmt\ text escape sequences.}
\label{tbl:escape}
\end{table}

Shorthand notation for a few special Scandinavian characters has also been
added (Table~\ref{tbl:scand}):
\index{Characters!escape sequences!Scandinavian}
\index{Scandinavian characters}

\begin{table}[H]
\centering
\begin{tabular}{|l|l|} \hline
\multicolumn{1}{|c|}{\emph{Code}}	&	\multicolumn{1}{c|}{\emph{Effect}} \\ \hline
@E &  \AE \\ \hline
@e &  \ae \\  \hline
@O &  \O \\ \hline
@o &  \o \\  \hline
@A &  \AA \\ \hline
@a &  \aa \\ \hline
\end{tabular}
\caption{Shortcuts for Scandinavian characters.}
\label{tbl:scand}
\end{table}

\PS\ fonts used in \GMT\ may be re-encoded to include
several accented characters used in many European languages.  To
access these, you must specify the full octal code $\backslash$xxx
(See Appendix F) allowed for your choice of character encodings
determined by the {\bf CHAR\_ENCODING} setting described
in the \GMTprog{gmtdefaults} man page.  Only the special characters
belonging to a particular encoding will
be available.  Many characters not directly available by
using single octal codes may be constructed with the composite
character mechanism @!.
 
Some examples of escape sequences and embedded octal codes in \GMT\ strings using the
Standard+ encoding: 

\begin{tabbing}
XXX\=\verb|2@~p@~r@+2@+h@-0@- E\363tv\363s|XXXX \== XXXX\=text \kill 
\>\verb|2@~p@~r@+2@+h@-0@- E\363tv\363s| \> = \> 2$\pi r^2h_0$ E\"{o}tv\"{o}s \\ 
\>\verb|10@+-3 @Angstr@om|		 \> =	\> 10$^{-3}$ \AA ngstr\o m \\ 
\>\verb|Se\227or Gar\215on|	 \> = \> Se\~{n}or Gar\c{c}on \\ 
\>\verb|M@!\305anoa stra\373e|	 \> = \> M\={a}noa stra\ss e \\ 
\>\verb|A@\#cceleration@\# (ms@+-2@+)|	 \> = \> \sc{Acceleration (ms$^{-2}$)}
\end{tabbing} 

The option in \GMTprog{pstext} to draw a rectangle surrounding the text
will not work for strings with escape sequences.  A chart of characters
and their octal codes is given in Appendix F. 

\section{Embedded grdfile format specifications}
\index{Embedded grdfile format}
\index{grdfile!embedded format|(}
\index{grdfile!formats}
\index{grdfile!formats!netCDF}
\index{grdfile!formats!floats}
\index{grdfile!formats!shorts}
\index{grdfile!formats!unsigned char}
\index{grdfile!formats!bits}
\index{grdfile!formats!rasterfile}
\index{grdfile!formats!custom format}
\label{sec:grdformats}
\GMT\ has the ability to read more than one grdfile
format.  As distributed, \GMT\ now recognizes 12 predefined file
formats.  These are  

\begin{description} 
\item[ 0.] \GMT\ netCDF 4-byte float format [Default] 
\item[ 1.] Native binary single precision floats in scanlines with leading grd header 
\item[ 2.] Native binary short integers in scanlines with leading grd header 
\item[ 3.] 8-bit standard Sun rasterfile (colormap ignored) 
\item[ 4.] Native binary unsigned char in scanlines with leading grd header 
\item[ 5.] Native binary bits in scanlines with leading grd header 
\item[ 6.] Native binary ``surfer'' grid files
\item[ 7.] netCDF 1-byte byte format
\item[ 8.] netCDF 1-byte char format
\item[ 9.] netCDF 2-byte int format
\item[10.] netCDF 4-byte int format
\item[11.] netCDF 8-byte double format
\end{description} 

In addition, users with some C-programming experience may add
their own read/write kernels and link them with the \GMT\ library
to extend the number of predefined formats.  Technical information
on this topic can be found in the source file \filename{gmt\_customio.c}. 

Because of these new formats it is sometimes necessary to provide more
than simply the name of the file on the command line.  For instance,
a short integer file may use a unique value to signify an empty node
or NaN, and the data may need translation and scaling prior to use.
Therefore, all \GMT\ programs that read or write grdfiles will decode
the given filename as follows:

\vspace{\baselineskip} 

\par 	name[={\it id}[/{\it scale}/{\it offset}[/{\it nan}]]]\par 

\vspace{\baselineskip} 

\noindent
where everything in brackets is optional.  If you only use the default
netCDF file format then no options are needed: just continue to pass
the name of the grdfile.  However, if you use another format you must
append the ={\it id} string, where {\it id} is the format id number
listed above.  In addition, should you want to multiply the data by
a scale factor, then add a constant offset you may append the
/{\it scale}/{\it offset} modifier.  Finally, if you need to indicate
that a certain data value should be interpreted as a NaN (not-a-number)
you may append the /{\it nan} suffix to the scaling string (it cannot
go by itself; note the nesting of the brackets!). 

Some of the grd formats allow writing to standard output and reading
from standard input which means you can connect \GMT\ programs that
operate on grdfiles with pipes, thereby speeding up execution and
eliminating the need for large, intermediate grdfiles.  You specify
standard input/output by leaving out the filename entirely.
That means the ``filename'' will begin with
``={\it id}\,'' since the \GMT\ default netCDF format does
not allow piping (due to the design of netCDF). 

Everything looks more obvious after a few examples: 

\begin{enumerate}
\item To write a binary float grd file, specify the name as \filename{my\_file.grd=1}.

\item To read a short integer grd file, multiply the data by 10 and then
add 32000, but first let values that equal 32767 be set to NaN,
use the filename \filename{my\_file.grd=2/10/32000/32767}. 

\item To read a 8-bit standard Sun rasterfile (with values in the 0--255 range)
and convert it to a $\pm$1 range, give the name as
\filename{rasterfile=3/7.84313725e-3/-1} (i.e., 1/127.5).

\item To write a short integer grd file to standard output after subtracting
32000 and dividing its values by 10, give filename as =2/0.1/-3200. 

\end{enumerate} 

Programs that both read and/or write more than one grdfile may
specify different formats and/or scaling for the files involved.
The only restriction with the embedded grd specification mechanism
is that no grdfiles may actually use the ``=''
character as part of their name (presumably, a small sacrifice). 

\index{grdfile!suffix}

One can also define special file suffixes to imply a specific file
format; this approach represents a more intuitive and user-friendly
way to specify the various file formats.  The user may create a file
called \filename{.gmt\_io} in the home directory and define any
number of custom formats.  The following is an example of a
\filename{.gmt\_io} file:
\index{.gmt\_io}

\vspace{\baselineskip} 

\noindent
\begin{tabbing}
MMM\=\# suffix \=format\_id \=scale \=offset \=NaNxxx\=Comments \kill 
\>\# GMT i/o shorthand file \\ 
\>\# It can have any number of comment lines like this one anywhere \\
\>\# suffix \> format\_id	\> scale \> offset \>NaN\>Comments \\ 
\>grd \> 0 \> - \> - \> - \>Default format \\ 
\>b \> 1 \> - \> - \> - \> Native binary floats \\ 
\>i2 \> 2 \> - \> - \> 32767 \> 2-byte integers \\ 
\>ras \> 3 \> - \> - \> - \> Sun rasterfiles \\ 
\>byte \> 4 \> - \> - \> 255 \> 1-byte grids \\ 
\>bit \> 5 \> - \> - \> - \> 0 or 1 grids \\ 
\>mask \> 5 \> - \> - \> 0 \> 1 or NaN masks \\ 
\>faa \> 2 \> 0.1 \> - \> 32767 \> Gravity in 0.1 mGal
\end{tabbing} 

These suffices can be anything that make sense to the user.  To
activate this mechanism, set parameter {\bf GRIDFILE\_SHORTHAND} to TRUE in
your \filename{.gmtdefaults4} file.  Then, using the filename
\filename{stuff.i2} is equivalent to saying \filename{stuff.i2=2/1/0/32767},
and the filename \filename{wet.mask} means wet.mask=5/1/0/0.  For a
file intended for masking, i.e., the nodes are either 1 or NaN,
the bit or mask format file may be down to 1/32 the size of the
corresponding grd format file. 
\index{grdfile!embedded format|)}

\section{The NaN data value}
\index{NaN}
\index{Not-a-Number}

For a variety of data processing and plotting tasks there is a need to acknowledge that
a data point is missing or unassigned.  In the ``old days'' such information was passed
by letting a value like -9999.99 take on the special meaning of ``this is not really a
value, it is missing''.  The problem with this scheme is that -9999.99 (or any other
floating point value) may be a perfectly reasonable data value and in such a scenario
would be skipped.  The solution adopted in \GMT\ is to use the IEEE concept Not-a-Number
(NaN) for this purpose.  Mathematically, a NaN is what you get if you do an undefined
mathematical operation like $0/0$.  This value is stored with a particular bit pattern
defined by IEEE so that special action can be taken when it is encountered by programs.
In particular, a library function called \texttt{isnan} is used to test if a floating point
is a NaN.  \GMT\ uses these tests extensively to determine if a value is suitable for plotting
or processing (if a NaN is used in a calculation the result becomes NaN as well).  Data points
whose value is NaN are not normally plotted (or plotted with the special NaN color given in
\filename{.gmtdefaults4}).  Several tools such as \GMTprog{xyz2grd}, \GMTprog{gmtmath}, and
\GMTprog{grdmath} can convert user data to NaN and vice versa, thus facilitating arbitrary
masking and clipping of data sets.  Note that a few computers do not have native IEEE hardware
support.  At this point, this applies to some of the Cray super-computers.  Users on such
machines may have to adopt the old `-9999.99'' scheme to achieve the desired results.
