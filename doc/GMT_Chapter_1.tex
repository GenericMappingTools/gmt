%------------------------------------------
%	$Id: GMT_Chapter_1.tex,v 1.163 2011-03-08 19:20:16 guru Exp $
%
%	The GMT Documentation Project
%	Copyright 2000-2011.
%	Paul Wessel and Walter H. F. Smith
%------------------------------------------
%
\chapter{Preface} 
\label{ch:1}
\thispagestyle{headings}

While \GMT\ has served the map-making and data processing needs of scientists since 1988\footnote{Version
1.0 was then informally released at the Lamont-Doherty Earth Observatory.}, the current global use was
heralded by the first official release in \emph{EOS Trans. AGU} in the fall of 1991.  Since then,
\GMT\ has grown to become a standard tool for many users, particularly in the Earth and Ocean Sciences.
Development has at times been rapid, and numerous releases have seen the light of day since the early
versions.  For a detailed history of the changes from release to release, see file \filename{ChangeLog}
in the main \GMT\ directory.  For a nightly snapshot of ongoing activity, see the online
\htmladdnormallink{ChangeLog}{http://\GMTSITE/gmt/gmt_changelog.php} page.

The success of \GMT\ is to a large degree due to the input of the user community. In fact, most of the
capabilities and options in \GMT\ programs originated as user requests.
We would like to hear from you should you have any suggestions for future enhancements and modification.
Please send your comments to
\htmladdnormallink{the GMT help list}{mailto:gmt-help@lists.hawaii.edu}.

\section{What is new in \gmt\ 4.x?}

\GMT\ 4.x will continue to see corrections of legacy bugs and problems, including Windows DLL silliness.
However, the \GMT\ 4.x releases are mostly bug-fixes as all development is now focussed on \GMT\ 5; this
new series is distinguished by being completely restructured so as to allow developers to call
high-level \GMT\ processes from a variety of programming environments.  Below is a brief
history of the development milestones in the 4.x series.  We expect to maintain the \GMT 4 series
for some time after \GMT 5 has been released.

\subsection{Overview of \gmt\ 4.5.6 [Mar-1, 2011]}

This is another bug-fix release, including an update to GSHHS which fixes error is the Germany-Poland border
and a few ``spiky'' islands. Therefore, this version requires the new GSHHS 2.1.1 release.  We also patched
some errors in the ``jet'' color table.
Below is the list of bug corrections:
\begin{description}
	\item [\GMTprog{gmt\_init.c}]:	On Windows: Look for HOMEPATH after HOME for setting GMT\_HOMEDIR.
		Processing of mathangle symbol (\Opt{Sm}[bfl]) confused the unit detector.
		The symbol-parsing for psxy and psxyz did not properly set the
		column types when no symbol size was given.  This affected
		symbols that require angles (\Opt{Sw}, \Opt{SE}, \Opt{SJ}) when unit was SI.
		The \Opt{:} option messed up the column type arrays; should
		only swap x,y data columns, not type columns.
	\item [\GMTprog{gmt\_cdf.c}]:	Apply netcdf fix for open/fill; thanks to Sebastian Heimann.
	\item [\GMTprog{gmt\_grdio.c}]:	Increase the size of the string array in \GMTfunc{GMT\_grd\_get\_units} to
		avoid ``Buffer overrun'' that occurred with long description strings.
	\item [\GMTprog{gmt\_io.c}]:	When ASCII mode, also need to save/restore any netcdf i/o settings.
	\item [\GMTprog{gmt\_map.c}]:	Fixed bug in Haversine equation for duplicate point.
		For van Grinten: errors in left/right-circle functions.
		We have a safety valve for preventing a painful slow search
		around the map perimeter.  The search is appropriate for maps
		but not for mapproject results.  The limit was for 200 inch
		wide maps == 14400p.  A user ran pscoast with 14401p and was
		caught.  Now check for 400 inch and also check current page
		size (PAPER\_MEDIA). If map width vastly outsizes the paper
		size then it is probably a projection job.
	\item [\GMTprog{gmt\_nc.c}]:	Apply netcdf fix for open/fill; thanks to Sebastian Heimann.
	\item [\GMTprog{gmt\_plot.c}]:	A colored TICK\_PEN would also color annotations.
		Tried to free an unallocated array in \GMTfunc{GMT\_draw\_custom\_symbol}.
	\item [\GMTprog{gmt\_support.c}]:	\GMTfunc{GMT\_cspline} should initialize c[0] = c[n-1] = 0.0 in case
		it is called repeatedly [this is not the case in GMT].
		When calculating how far to place an annotation from the tick mark
		we must check if a fancy frame width exceeds the tick length.
		\GMTfunc{GMT\_inonout\_sphpol\_count} failed to detect crossings if a
		polygon had vertical line-segments with same longitude as
		the point we were testing.
	\item [\GMTprog{pslib.c}]:	Add check for incomplete escape sequences..
	\item [\GMTprog{gmtselect.c}]:	Due to resampling of parallels in \Opt{N}, some points exactly on
		a coast bin parallel could fail the test due to roundoff.
		Fixed by not resampling coastlines since it is a Cartesian test.
	\item [\GMTprog{grd2xyz.c}]:	Extended \Opt{Ef} mode to write floats (patch by Pierre Cazenave).
	\item [\GMTprog{grdclip.c}]:	Now complains if no \Opt{S} option was given.
	\item [\GMTprog{grdfilter.c}]:	Allow -D2 and -D3 to handle periodic and polar boundary conditions.
	\item [\GMTprog{grdlandmask.c}]:	Same as entry for \GMTprog{gmtselect.c}.
	\item [\GMTprog{grdmask.c}]:	Must skip ``polygons'' with less than 3 points.  Also, the
		resampling distance for spherical data was wrong, now 0.1 degrees.
	\item [\GMTprog{grdproject.c}]:	Not providing \Opt{R} was not working anymore.
			Test if hemisphere sign is provided when doing \Opt{Ju} and no \Opt{R}.
			Now assign proper x/y units.
	\item [\GMTprog{grdtrack.c}]:	Message about \Opt{L} being obsolete should only come when no
			modifier is given; else it is valid for BC setting.
	\item [\GMTprog{ps2raster.c}]:	Bug fix after last \Opt{F} option update.
		Must pass the optional \Opt{C} args when calculating BB.
		Added \Opt{dSAFER} as well, + fix \Opt{F} option [F. Wobbe].
		For some reason \Opt{W} was not forcing \Opt{A}. Now it does it again.
	\item [\GMTprog{pscontour.c}]:	Did not find some contours following triangle edges.
	\item [\GMTprog{pslegend.c}]:	Need to keep the original \Opt{R} \Opt{J} around for proper calls.
	\item [\GMTprog{psscale.c}]:	Now patterns have constant orientation regardless of using
		horizontal or vertical bar.
	\item [\GMTprog{nearneighbor.c}]:	Changed default to a more reasonable \Opt{N}4/2.
	\item [\GMTprog{splitxyz.c}]:	Did not list \Opt{Q} in the synopsis.
	\item [\GMTprog{surface.c}]:	Bug if using seconds (c) in search radius (got minutes).
	\item [\GMTprog{triangulate.c}]:	Did not use projected coordinates when \Opt{R} \Opt{J} was given.
	\item [\GMTprog{xyz2grd.c}]:	Do not tolerate NaNs in x,y and give error (e.g., if junk is given).
		Failed if \Opt{E}value was given and the ESRI grid already had a
		nodata-value line.  Now will process this line, if present.
		The value given on the command line will override any setting
		found in the file.  Also made string-checks case-insensitive.
	\item [\GMTprog{meca/utilmeca.c}]:	Patch to fix incorrect plotting of moment tensors with big
		isotropic components. Thanks to Jeremy Pesicek.  Fix bug affecting the plot of P and T axis.
	\item [\GMTprog{mex/grdwrite.c}]:	Round-off could lead to false detection of a non-equally spaced grid.
	\item [\GMTprog{misc/gmt2kml.c}]:	Options \Opt{N+} and \Opt{D} would crash under Windows (usual DLL hell).
	\item [\GMTprog{spotter/backtracker.c}]:	For \Opt{W}, now report full-length major/minor axes and not
		SEMI-axes (docs said major/minor but code did semi.)
	\item [\GMTprog{spotter/grdrotater.c}]:		Did not handle the rotation of an entire global grid since
			the polygon outline interfered with the domain.
	\item [\GMTprog{spotter/rotconverter.c}]:	Forgot to skip args when \Opt{N} or \Opt{S} was used.
	\item [\GMTprog{x2sys/x2sys.c}]:	Minor bug in x2sys binary reading of floats.
	\item [\GMTprog{x2sys/x2sys\_datalist.c}]:	When geographic data and \Opt{R} it failed to consider periodic longitudes.
	\item [\GMTprog{x2sys/x2sys\_get.c}]:	The \Opt{N} option did not work properly, and the reported Y$|$N flags
		reflected the entire track on not just the portion inside the
		region.  Man page updated to clarify what is returned.
	\item [\GMTprog{x2sys/x2sys\_init.c}]:	Did not write both of \Opt{Nd} \Opt{Ns} to the tag file.
		Crashed if \Opt{D} was not given [should imply -DTAG].
\end{description}

\subsection{Overview of \gmt\ 4.5.5 [Nov-1, 2010]}

This is again mostly a bug-fix release, and coincides with the availability of \GMT\ 5.0.0$\alpha$.
Due to a few issues we had an aborted update to 4.5.4 that was never announced; hence the 4.5.5-numbered version.
A few minor improvements have been added:

\begin{enumerate}
\item The \GMTprog{spotter} supplement now converts geodetic latitudes to geocentric before
doing spherical rotations and recovers geodetic coordinates for output (this new behavior can
be bypassed by setting ELLIPSOID to Sphere).  Thanks to L. M. Matias for pointing this out.
\item We have added time-axes support for the Hawaiian language (Thanks to K\=awika Trang).
\end{enumerate}
Here is the list of bug corrections:
\begin{description}
	\item [\GMTprog{configure}]:	Now sets correct mex extensions for 64-bit operating systems.
	\item [\GMTprog{gmt\_init.c}]:	The \Opt{B} labels would not tolerate use of the text escape sequence @: (for changing font size).
	\item [\GMTprog{gmt\_map.c}]:	Did not check if nodes were beyond the horizon in \GMTfunc{GMT\_grd\_project}.
		Also did not initialize output grid to NaNs before filling.
	\item [\GMTprog{gmt\_plot.c}]:	Bug in fault symbol \GMTprog{psxy} \Opt{Sfrc} fixed (thanks to J. Robert).
		Also, \GMTfunc{GMT\_map\_latline} and \GMTfunc{GMT\_map\_lonline} functions tried to draw 
		two-point lines when in fact no points were defined.
	\item [\GMTprog{gmtdefaults.c}]:	The \Opt{D} options would crash under Windows.
	\item [\GMTprog{grdmask.c}]:	The \Opt{Ap}$|${\bf m} options were ignored since the {\it mode} was not checked.
	\item [\GMTprog{grdpaste.c}]:	Lacked \Opt{fg} so could not paste 352/360 and 0/8 in longitudes.
	\item [\GMTprog{grdtrack.c}]:	Did not ensure that given \Opt{R} was adjusted to fit grid spacing.
	\item [\GMTprog{mapproject.c}]:	Did not show/explain the option of appending {\bf +} to \Opt{L}.
		Corrected synopsis, usage, and man page.  Did not reset azimuth to NaN at start of new segment.
	\item [\GMTprog{minmax.c}]:	With \Opt{I}, could end up returning \Opt{R}355/0/... since 360 became 0.
	\item [\GMTprog{nearneighbor.c}]:	Did not check if \Opt{S} had not been set.
	\item [\GMTprog{psbasemap.c}]:	The \Opt{L} option had trouble parsing if there were + signs
		within the label string.
	\item [\GMTprog{pscoast.c}]:	The \Opt{L} option had trouble parsing if there were + signs
		within the label string.
	\item [\GMTprog{ps2raster.c}]:	Made tolerant of $\backslash$r-only line-endings which caused trouble before.
		The \Opt{A-} option did not reset \Opt{A} for \Opt{W}.
	\item [\GMTprog{psimage.c}]:	The justify text variable must be 3-char longs to hold trailing 0.
		This caused SEGV on some systems.
	\item [\GMTprog{psmask.c}]:	Did not warn if clipping levels were not restored in last overlay.
	\item [\GMTprog{pstext.c}]:	Added missing description of \Opt{A} option.
	\item [\GMTprog{psxy[z].c}]:	Units given in \Opt{S} without sizes (e.g., \Opt{Sci}) would be
		ignored and overridden by {\bf MEASURE\_UNIT}.  The \Opt{Ap}$|${\bf m} options were ignored since the {\it mode} was not checked.
	\item [\GMTprog{mgd77/mgd77manage.c}]:	The \Opt{F} option had no break statement to prevent fall-through.
	\item [\GMTprog{mgd77/mgd77track.c}]:	Had inactive code to write segment header to output.
	\item [\GMTprog{mgd77/mgd77list.c}]:	The \Opt{G} option was not listed in synopsis or usage, only
		in the man pages.  Also \Opt{F}all+ and \Opt{F}mgd77+ did not append the auxiliary columns properly.
	\item [\GMTprog{mgd77/mgd77magref.c}]:	The \Opt{D} option failed on numeric arguments.
	\item [\GMTprog{misc/gmtstitch.c}]:	Could crash if \Opt{C} was used.
	\item [\GMTprog{misc/gmt2kml.c}]:	Did not parse \Opt{D}``description'' for points.
		Only append running number when a segment has more than one point, else just use segment label.
	\item [\GMTprog{spotter/rotconverter.c}]:	Complained of ``bad option'' when a rotation with a
		negative longitude was given on the command line, e.g. -135/35/-2.5.
		Would sometimes issue a rotation twice (for the same time).
	\item [\GMTprog{sph/Makefile}]:	Did not have LDFLAGS in link statement.
\end{description}
Also, Appendix F had missing shading for two items in the Standard+ table, and example 23 placed the city names at
an angle of 1 degree rather than horizontally.

\subsection{Overview of \gmt\ 4.5.4 [Nov-1, 2010]}

A few minor technical issues in the distribution led us to make a few changes and increment the version to 4.5.5.

\subsection{Overview of \gmt\ 4.5.3 [Jul-15, 2010]}

This is mostly a bug-fix release, including more corrections to the political boundaries distributed
via the GSHHS netCDF files (these affect the Syria-Israel, Israel-Jordan, Moldova-Ukraine, and the
Eritrea-Ethiopia borders) as well as missing river-lake metadata in the GSHHS distribution.
Therefore, this version requires the new GSHHS 2.1.0 release.

Here is the list of bug corrections:
\begin{description}
	\item [\GMTprog{configure}]:	Fixed reversed use off --enable-flock.
	\item [\GMTprog{gmt\_init.c}]:	Chop off any eventual EOLs characters that might be in argv
		strings as it will happen when it was created by a shell command.
		We need this so that native Windows binaries can be used in Cygwin.
	\item [\GMTprog{gmt\_io.c}]:	\GMTfunc{GMT\_is\_a\_blank\_line} saw ``t'' instead of TAB as whitespace.
		Added \GMTfunc{GMT\_io.skip\_duplicates} [FALSE] to control if consecutive
		records with identical x,y should be skipped.  This is needed
		by programs that uses \GMTfunc{GMT\_sph\_inonout}, which does not expect to
		find duplicates vertices.  \GMTfunc{GMT\_fgets} now checks for input record truncation and handles
		this gracefully (gives warning and winds to next record).
	\item [\GMTprog{gmt\_map.c}]:	Tried to free memory when nothing had been allocated.
		\GMTfunc{GMT\_wesn\_clip} function would clip polygons even though
		there were no restrictions on longitudes (w/e = 360).
	\item [\GMTprog{gmt\_plot.c}]:	Parallels that should be straight (e.g., in \Opt{JI}) would sometimes
		appear with jump gaps.  Fixed bug in \GMTfunc{GMT\_plot\_map\_scale} that could lead to endless loops
		when using scales to 100 km or any exact power of 10. Error was limited to 64-bit.
	\item [\GMTprog{gmt2rgb}]:	Option \Opt{G} was freeing the output name before it was even allocated.
	\item [\GMTprog{grdcontour.c}]:	The L or H color for first min/max annotation was not set.
		Placement of H and L annotations improved by using centroids.
	\item [\GMTprog{grdmask.c}]:	Did not handle periodic longitude input when \Opt{fg} was used.
	\item [\GMTprog{grdview.c}]:	Fixed bug in parsing of \Opt{W}[m$|$c$|$f] option when color starts with [m$|$c$|$f].
		Check that topo and illumination file have the same size, otherwise it would crash.
	\item [\GMTprog{greenspline.c}]:	Must insist that one of [\Opt{R} \Opt{I}], \Opt{N}, or \Opt{T} is specified.
	\item [\GMTprog{mapproject.c:}]:	Applied scaling to \Opt{C}{\it dx/dy} when \Opt{Fk} was used, despite docs
		saying \Opt{C} is in meters when \Opt{F} is used. Fixed, and clarified
		docs/man to say with \Opt{F}, \Opt{C} is always in meters.
	\item [\GMTprog{nearneighbor.c:}]:	Did not handle periodic longitude input when \Opt{fg} was used.
	\item [\GMTprog{ps2raster.c:}]:	Now checks that all PS files begin with \%!PS.
		End matter did not get parsed when there is no \%\%Orientation.
	\item [\GMTprog{pshistogram.c:}]:	Fixed incorrect bin count when a datapoint equaled xmax.
	\item [\GMTprog{pslegend.c:}]:	Uninitialized text string could put garbage in script.
	\item [\GMTprog{psmask.c:}]:	Did not handle periodic longitude input when \Opt{fg} was used.
	\item [\GMTprog{psxy.c:}]:	For \Opt{Svs}, the 2nd set of coordinates did not obey \Opt{:}.
		The \Opt{Sw$|$W} symbols did not handle the azimuth/direction conversions properly.
		Added better handling of dimensions with units passed via columns in the data file.
	\item [\GMTprog{psxyz.c:}]:	For \Opt{Svs}, the 2nd set of coordinates did not obey \Opt{:}.
		The \Opt{Sw$|$W} symbols did not handle the azimuth/direction conversions properly.
		Added better handling of dimensions with units passed via columns in the data file.
	\item [\GMTprog{surface.c:}]:	Did not handle periodic longitude input when \Opt{fg} was used.
	\item [\GMTprog{meca/psmeca.c}]:	Removed out of place and repeated line to compute size in \Opt{a} option.
	\item [\GMTprog{meca/submeca.c}]:	Replaced calls to \GMTfunc{d\_atan2} by \GMTfunc{d\_atan2d} since the code expects angles in degrees.
	\item [\GMTprog{mgd77/mgd77.c}]:	Incorrectly added track list =tracks.lis as another track name
				after correctly including all the listed tracks. No harm done
				other than an annoying ``Cannot find track =tracks'' message.
	\item [\GMTprog{mgd77/mgd77magref.c}]:	Fix bug in  \Opt{A} option when using const time in calendar format.
	\item [\GMTprog{mgg/mgd77togmt.c}]:	Now has proper synopsis.
	\item [\GMTprog{misc/kml2gmt.c}]:	Did not anticipate optional attributes for tags like $<$PlaceMark$>$, etc.
	\item [\GMTprog{sph/sphtriangulate.c}]:	Incorrect items for cols 3--4 for \Opt{N}.
	\item [\GMTprog{x2sys/x2sys.c}]:	Need to include the ``.'' when checking if a suffix is present in a filename.
		Reading of data formats .gmt and custom returned all columns and
		not just the requested columns, causing errors upstream.
	\item [\GMTprog{x2sys/x2sys\_datalist.c}]:	Check to see if both lon and lat had been requested only
		checked for longitude (twice).
	\item [\GMTprog{x2sys/x2sys\_list.c}]:	Implemented \Opt{S}[{\bf +}] to print info relevant to both cruises.
\end{description}

Here is a list of the recent enhancement to various programs; these were introduced to correct mistakes or overcome limitations:

\begin{enumerate}
	\item \GMTprog{gmtmath.c} has added function {\bf SQR} (square).
	\item \GMTprog{grdgradient.c} now lets \Opt{S} work alone without requiring \Opt{G}.
	\item \GMTprog{grdmath.c}] has added function {\bf SQR} (square).
	\item \GMTprog{pswiggle.c} \Opt{Dx}{\it gap} now allows gaps to be in projected distances.
	\item \GMTprog{mgd77/mgd77.c} was updated for 11th generation IGRF -- IGRF2010.
	\item \GMTprog{x2sys/x2sys\_get.c} needed \Opt{-L+}[{\it list}] so internal crossovers can be added.
	\item \GMTprog{GMT\_nighttime.cpt} color table donated by Andreas Trawoeger.
	\item \GMTprog{GMT\_paired.cpt} qualitative color table by Cynthia Brewer.
\end{enumerate}


\subsection{Overview of \gmt\ 4.5.2 [Jan-15, 2010]}

This is mostly another bug-fix release, including one that required us to add more meta-data
to the GSHHS coastline netCDF files.  Therefore, this version requires GSHHS 2.0.2 or higher.
As was the case for 4.5.1, note that the GSHHS polygons themselves have not changed (still at version 2.0).
We also added in the relatively recent Nunavut province boundary in Canada.
However, some enhancements were added as well, most notably a new {\bf graph} frame mode for linear
projections (to add arrow heads to math axes) and a new symbol in \GMTprog{psxy.c} (to draw a
circular arrow used to indicate angles); these capabilities are demonstrated in a new (and final) example 30.
Finally, we fixed the long-standing problem of \GMTprog{psxy} \Opt{SE} requesting major and minor axes but
actually treating them as if they are semi-axes.  We now consistently expect and use major and minor axes;
you may thus notice a scaling of two if you continue to give semi-major/minor axes.
Here is the list of bug corrections:
\begin{description}
	\item [\GMTprog{configure}]:	Fixed bug with --rpath.
	\item [\GMTprog{gmt\_customio.c}]:	Fixed bug resulting from releasing the pointer to from\_gdalread
		structure before its members were freed.
	\item [\GMTprog{gmt\_gdalread.c}]:	Force computation of min/max since metadata info may be wrong.
	\item [\GMTprog{gmt\_grdio.c}]:	\GMTfunc{GMT\_read\_img} did not apply swab if little-endian architecture.
	\item [\GMTprog{gmt\_io.c}]:	\GMTfunc{GMT\_access} did not check for NULL filename.
	\item [\GMTprog{gmt\_init.c}]:	Now guards against getting a negative hash value, which happened
		when text was Russian language codes from ru.d.  If GMT\_DATADIR was set to a list of colon-separated dirs
		then init failed since we tried to check access as
		if GMT\_DATADIR was always a single entity (as in the past). Opened file with \GMTfunc{fopen} but closed with \GMTfunc{GMT\_fclose}.
		Bug in the parsing of \Opt{Jg}{\it lon/lat/radius/lat}.  Both \filename{.gmtdefaults4} and \filename{.gmtcommands4} were
		assumed to be in UNIX format.  Now we properly chop off Windows \emph{or} Unix end-of-line characters.
	\item [\GMTprog{gmt\_mgg\_header2}]:	Opened file with \GMTfunc{GMT\_fopen} but closed with \GMTfunc{fclose}.
	\item [\GMTprog{gmt\_plot.c}]:	\GMTfunc{qsort} of GMT\_LONGs was passed int arrays.  The calculation
		of the actual plot width of a map scale did not account for the effect of a 3-D view angle.
	\item [\GMTprog{gmt\_shore.c}]:		Changes to accommodate new GSHHS2.0.2 netCDF files
		which needed more metadata to properly compute the level of tile corners after features where dropped
		due to size, etc.
	\item [\GMTprog{gmt\_support.c}]:	Increase the size of the variable that contains the path to
		a CPT file and the pathname to BUFSIZ bytes.
	\item [\GMTprog{gmtconvert.c}]:	The \Opt{S} option failed for actual matches; the 2009/5/26
		change screwed that up.  Now fixed and tested.
	\item [\GMTprog{grdcontour.c}]:	The \Opt{Q} option should only apply to closed contours, and
		\Opt{T} failed to find an inside point for some oblique projections.
	\item [\GMTprog{grdgradient.c}]:	Now, \Opt{Lg} will imply \Opt{fg} to properly set geographic units.
		Fixed bug where the gradient at the south pole was not replicated to x = east.
	\item [\GMTprog{grdlandmask.c}]:	Round-off and bug caused missing nodes for \Opt{F} with \Opt{Rd}.
	\item [\GMTprog{grdtrack.c}]:	The \Opt{Z} option gave z-values a longitude formatting, including 360-degree wrapping.
	\item [\GMTprog{mapproject.c}]:	The \Opt{S} option failed after recent i/o makeover.
	\item [\GMTprog{pslib.c}]:	Ellipse was wrongly dimensioned by semi-major and semi-minor
		axes, instead of major and minor axes.  Also, memory never got freed by \GMTfunc{ps\_free}.
	\item [\GMTprog{psrose.c}]:	Needed to set scale to 1 so the bounding box
		calculations would be correct for EPS output.
	\item [\GMTprog{psscale.c}]:	The \Opt{Bg} now correctly produces gridlines using \textbf{GRID\_PEN\_PRIMARY}.
	\item [\GMTprog{psxy.c}]:	Incorrectly drew tips at plot boundary when clipping the error bars.
	\item [\GMTprog{psxyz.c}]:	Fixed bug in distance sorting (also made much simpler).
	\item [\GMTprog{imgsrc/img2google}]:	One \GMTprog{gmtmath} call did not have the required \Opt{Q}.
	\item [\GMTprog{mgd77/mgd77sniffer.c}]:	SEGV when an array index was allowed to become -1.
	\item [\GMTprog{misc/gmt2kml.c}]:	Removed rogue newline before writing coordinates and an additional $>$ in a tag.
	\item [\GMTprog{misc/gmtstitch.c}]:	NULL segment headers were passed to strcpy() to give SEGV; also
		fixed output message when \Opt{C} was used and only one segment was present.
	\item [\GMTprog{misc/kml2gmt.c}]:	Mix of \GMTfunc{fopen} and \GMTfunc{GMT\_fclose} not good under Windoze.
	\item [\GMTprog{sph/sphinterpolate.c}]:	Bad index on line 317 went outside array limit.  Also did not initialize the grid header properly.
	\item [\GMTprog{sph/sphdistance.c}]:	Did not initialize the grid header properly.
	\item [\GMTprog{spotter/backtracker.c}]:	When \Opt{L} is set, \Opt{mo} must be turned on automatically
		even if \Opt{m} is not set.
	\item [\GMTprog{spotter/grdrotater.c}]:	Bug in node index resulted in no longitudinal variation in the rotated grid.
	\item [\GMTprog{x2sys/x2sys\_init.c}]:	Did not accept \Opt{m}, only the now obsolete \Opt{M}.
	\item [\GMTprog{x2sys/x2sys\_datalist.c}]:	Did not retrieve the correct data columns when \Opt{F} was used.
	\item [\GMTprog{x2sys/x2sys\_list.c}]:	Weights were not written out when names were selected as well, as in \Opt{Fncw}.
\end{description}

Here is a list of the recent enhancement to various programs:

\begin{enumerate}
	\item \GMTprog{fitcircle.c} will let \Opt{S} optionally take a fixed latitude instead of finding
		the best-fitting latitude [Default].
	\item \GMTprog{gmtdefaults.c} has new {\bf BASEMAP\_TYPE} = {\it graph} option for linear projections that wish to
		have their axes extended 7.5\%, ending in arrow heads.
	\item \GMTprog{grd2xyz.c} has a new option \Opt{N} which can be used to replace NaNs with another value on output.
	\item \GMTprog{psxy.c} now has a new symbol \Opt{Sm} option for math angle, which lets
		user draw a circular arc with optional curved arrow heads at neither, one, or both ends.
	\item \GMTprog{psxyz.c} also has the new symbol \Opt{Sm} option but does not draw the curved arrow heads yet.
	\item \GMTprog{mgd77/mgd77manage.c} adds attribute array of TZ corrections for the few cruises
		that stored TZ and local time instead of UTC time.
	\item \GMTprog{spotter/rotconverter.c} has new option \Opt{E} to reduce stage pole opening
		angles by {\it fact} [0.5] (e.g., to get half-spreading rates).
	\item \GMTprog{x2sys/x2sys.c} now lets x2sys programs automatically strip off extensions for tracks given via list files.
		Also, various lists can contain header records.
	\item \GMTprog{x2sys/x2sys\_get.c} has new option \Opt{E} to select extensions on output, and \Opt{Q}[{\bf i$|$e}] to be used with \Opt{L}.
	Finally, \Opt{D} now only lists track names.
	\item \GMTprog{x2sys/x2sys\_solve.c} has new option \Opt{Z} to remove smallest dist/time for \Opt{E}{\bf d$|$t}.
\end{enumerate}

\subsection{Overview of \gmt\ 4.5.1 [Sept-20, 2009]}

This is almost entirely a bug-fix release where we address several 64-bit incompatibilities and
rebuild the netcdf GSHHS library to include some attributes from GSHHS that were needed
by new options in \GMTprog{pscoast} and other programs.  Note that the GSHHS polygons have not changed (still
at version 2.0), but we had to update the derived netcdf repackaging used by \GMT\ to 2.0.1.
However, some enhancements were added as well, most significantly support for the polyconic
projection (\Opt{JPoly}), experimental support for grid and image imports via GDAL
(requires --enable-gdal during configure and properly installed GDAL libraries and include files),
and allowing \Opt{JX}{\it width/height} to recompute a {\it height} given as zero based on the
{\it width} (or vice versa) and the aspect ratio of the region.

Here is the list of bug corrections:
\begin{description}
	\item [\GMTprog{configure.ac}]:	Now use --enable-flock to enable file locking, instead of
		--disable-flock to disable if.
		Use --enable-64 to force 64-bit compilation, use --disable-64
		to force 32-bit compilation; otherwise use default.
		Switch -DGMT\_QSORT is now on only for OS X prior to Snow Leopard as the latter has
		a correctly working 64-bit \GMTfunc{qsort} function.
	\item [\GMTprog{gmt\_customio.c}]:	Made surfer grid header i/o 64-bit compliant.
	\item [\GMTprog{gmt\_map.c}]:	Changed \GMTfunc{GMT\_truncate} from being a pointer function (PFL)
		to a regular function that simply calls \GMTfunc{GMT\_truncate\_x}
		or \GMTfunc{GMT\_truncate\_tm} depending on whether projection is TM.
		This to avoid problems with calling \GMTfunc{GMT\_truncate} with
		constant argument -1 in 64-bit machines and thus producing wrapped \GMTprog{pscoast} maps.
	\item [\GMTprog{gmt\_shore.c}]:	The \Opt{A+r}$|${\bf +l} option was premature as more info in the GSHHS
	netcdf files were needed to properly skip features. Now working with the revision GSHHS 2.0.1.
	\item [\GMTprog{gmt\_support.c}]: The routine that checks if a points is inside or outside a
		polar cap had trouble when a point's longitude exactly
		equalled one of the polygon points since round-off could 
		cause our test to fail.
		Fixed bug in {\it x\_inc} variable as function of latitude.
		\GMTfunc{GMT\_log\_array} recoded to avoid 64-bit error (last value was not included).
	\item [\GMTprog{grdcontour.c}]: The \Opt{L} option was not used in limiting contours.
	\item [\GMTprog{minmax.c}]: The \Opt{EH} option did not work.
	\item [\GMTprog{psmask.c}]: With \Opt{D}, the internal {\it di, dj} constants were set way too large.
	\item [\GMTprog{pswiggle.c}]: With \Opt{Jx}{\it scale}{\bf d}, distances were not scaled correctly
		so \Opt{D} failed.
	\item [\GMTprog{mgd77/mgd77magref.c}]: Got wrong time as time initialization had changed but
		not implemented in this program.
	\item [\GMTprog{mgd77/mgd77sniffer.c}]: Bug in \Opt{I} option; needed to set bitpattern for bad faa.
	\item [\GMTprog{misc/gmt2kml.c}]: Option \Opt{T} did not handle spaces in titles and folder names.
		Under Windows, the output got scrambled due to DLL hell.
	\item [\GMTprog{spotter/backtracker.c}]: Failed in 64-bit mode due to variable mismatches.
	\item [\GMTprog{x2sys/x2sys\_get.c}]: The \Opt{L} option failed if list contained file extensions.
	\item [\GMTprog{x2sys/x2sys\_solve.c}]: Did not allocate array for storing weights.
\end{description}

Here is a list of the recent enhancement to various programs:

\begin{enumerate}
	\item \GMTprog{gmt\_customio.c} now has optional GDAL read-only interface as format 22 (code gd).
	\item \GMTprog{gmtset.c} has new default {\bf TRANSPARENCY} = {\it stroke/fill} that can
	change the PDF transparency for stroked and filled items [Note: Only supported by Adobe Distiller].
	\item \GMTprog{pslib.c} has added option to reduce all color to gray scale via {\bf PS\_COLOR} = gray.
	\item \GMTprog{grdimage.c} has optional support that allow single-band image import via GDAL.
	\item \GMTprog{misc/nc2xy.c} now has \Opt{bo} option.
	\item \GMTprog{mgd77/mgd77magref.c} can combine IGRF and CM4 computations.
\end{enumerate}

\subsection{Overview of \gmt\ 4.5.0 [July-15, 2009]}

This is another significant update of the official distribution and hence it has a mix of bug fixes
and program enhancements.  We have added a new supplement ({\bf sph}) which
offers interpolation, triangulation (Delaunay and Voronoi), and distance calculations on a 
spherical surface.  The hard work is done by the original effort of Robert Renka who developed
the Fortran-77 SSRFPACK and STRIPACK libraries; these are here supplied via a \progname{f2c}-assisted
translation.
The {\bf imgsrc} supplement has a new Bourne script \GMTprog{img2google}, which simplifies
making Google Earth tiles from Sandwell and Smith bathymetry. The {\bf mgd77} supplement
has a new program \GMTprog{mgd77magref}, which is used to evaluate either the CM4 comprehensive geomagnetic
model, a more sophisticated alternative to IGRF, or the IGRF. The {\bf misc} supplement has received
two new tools (\GMTprog{gmt2kml} and \GMTprog{kml2gmt}) that simplify the presentation of \GMT\ data
in Google Earth, and one (\GMTprog{dimfilter}) that offers directional spatial filtering of grids.
The {\bf x2sys} supplement has a new tool (\GMTprog{x2sys\_merge}) to merge updated COEs table into a main COE table database.
Finally, \GMTprog{ps2raster.c} has evolved further and can now be used to create simple KML files for Google Earth.

A major new enhancement is the global option \Opt{g}, which is used to determine if excessive spacing
between data points (``gaps'', to be defined in a variety of ways) should be used to segment an otherwise continuous
line.  We expect to enable \Opt{g} in several programs during the next revision; at the moment it is
available in \GMTprog{gmtconvert}, \GMTprog{mapproject}, \GMTprog{psxy} and \GMTprog{psxyz}.
Given that all the lower-case \gmt\ options deal with low-level data i/o settings we have decided
to rename the \Opt{M} option (which controls the presence of multiple segment headers) to \Opt{m}; this
allows us to promote this ubiquitous option to global status (\emph{i.e.}, has the same meaning in all \gmt\ programs).
Use of \Opt{M} will remain valid for the rest of \gmt\ 4.x but results in a warning about the new usage.
Related to this is the introduction of a new parameter ({\bf NAN\_RECORDS}) that determines if NaNs in
key columns (such as longitude, latitude) should constitute a line break or bad data to be skipped.

We have revised how ellipsoids are specified.  When importing an ellipsoid file, we allow a,b,f as ellipsoid parameters,
where b or f could both be zero.  If file does not exist, attempt to read name as a[/[b=$|$f=]f],
meaning {\it semi-major axis}, b={\it semi-minor axis}, f = {\it flattening}, or {\it inverse flattening}.  We have also
added parameters for the TOPEX ellipsoid and for the Moon and planets (IAU2000).

This release of \GMT\ coincides with the release 2.0 of GSHHS, the coastline data used by \GMT.  In addition to
general improvements to the data, we have expanded the \Opt{A} option that controls the limits on what features
to extract.  New modifiers allow users to exclude ``river-lakes'' and any feature whose area is less than a
fraction of the original full resolution feature.

Finally, our configure script continues to evolve and now better supports installation on 64-bit systems and
can automatically detect if and where netCDF exists on your system.

Here is the list of bug corrections:
\begin{description}
	\item [\GMTprog{gmt\_customio.c}]: In \GMTfunc{GMT\_ras\_read\_grd\_info}, wrong size was passed to fread.
	\item [\GMTprog{gmt\_grdio.c}]: Fixed bug in \GMTfunc{GMT\_grd\_setregion}: longitudes were limited inward
		instead of outward. Caused white-space left and right in \GMTprog{grdimage}.
	\item [\GMTprog{gmt\_init.c}]: No longer remove supposedly empty \filename{.gmtcommands4} file.
		Could have been written to by piped \GMT\ command. Now create/write only when new matter is to be written.
	\item [\GMTprog{gmt\_io.c}]: When only \Opt{mi} is set there should be no multisegment headers on output.
		yet there was no if-test to check for that.
	\item [\GMTprog{gmt\_map.c}]: Fixed serious bug in \GMTfunc{GMT\_az\_backaz\_flatearth}: incorrectly
		converted degrees to radians. Fixed bug in \GMTfunc{GMT\_get\_rotate\_pole}: called \GMTfunc{GMT\_rotate\_pole\_forward} with radians instead of degrees.
		Incorrectly attempted to free array only used when antialias is on.
		Fixed inability to determine projection pole when central meridian and western boundary are the same (Albers, Conic equidistant).
		Incorrectly used central longitude to set default midpoint for 3-D maps using the \Opt{E...+} mechanism when data were not geographic.
		Numerous bug fixes related to UTM: Did not report bad zone
		for $<$ A or $>$ Z; Zones A+B reached till 84S instead of 80S; Zone J
		wrongly produced value for Zone K; Zones U+W were not recognized;
		Now also equates Zone O to Zone P (already equated Zone I to J).
	\item [\GMTprog{gmt\_mgg\_header2.c}]: There was no support for (a) floating point grids and (b) swapping happened based
		on machine byte order and not based on actual file byte order.
	\item [\GMTprog{gmt\_nc.c}]:  Argument [layer] was not stripped from varname and would end up
		in output grid.  Set {\it zmin/zmax} to NaN when info not in header.
	\item [\GMTprog{gmt\_plot.c}]: Crashed when using time labels in 3D plot.
	\item [\GMTprog{gmt\_proj.c}]: Fixed bug in longitude computation when standard parallel is on Southern Hemisphere.
	\item [\GMTprog{gmt\_support.c}]: Exceeded array bounds in \GMTfunc{GMT\_read\_cpt} for hsv conversion.
		The 3-D view \Opt{E} option used in many programs (such as \GMTprog{psxyz}) could not handle exponential notations.
		Determining of a color scale is continuous should be based on HSV (not RGB) values when read as HSV.
		The modifier :{\it radius}[unit] to the \Opt{G} option in \GMTprog{grdcontour} for
		the placement of contour labels is now {\bf +r}{\it radius}[unit] since the colon interfered with ddd:mm:ss coordinates.
		Given \Opt{I}601+/601+ the y-increment was not processed correctly.
		Fixed bug  when {\it x\_inc} in km, m, etc, the value was ignored (always 1).
	\item [\GMTprog{blockmean.c}]: Gave bogus usage about number of input columns when \Opt{E} is set
		but \Opt{E} only affects output.  Same for  \GMTprog{blockmedian.c} and \GMTprog{blockmode.c}.
	\item [\GMTprog{gmtconvert.c}]: With \Opt{S}, did not report the number of output segments.
	\item [\GMTprog{gmtmath.c}]: Tried to free memory that was not allocated.
	\item [\GMTprog{grdfilter.c}]: Toggle \Opt{T} was not processed correctly if \Opt{R}{\it gridfile} was given.
	\item [\GMTprog{grdgradient.c}]: For geographic grids, make sure N and S pole only has a single value on output.
	\item [\GMTprog{greenspline.c}]: Calculation of nz layers was off by one, leaving out the penultimate layer.
	\item [\GMTprog{grdimage.c}]: We now make sure the NaN color is unique when \Opt{Q} is used.
	\item [\GMTprog{grdmath.c}]: The {\bf PDIST} operator did not handle binary input files (as {\bf LDIST} does).
	\item [\GMTprog{ps2raster.c}]: Exceeded memory allocation for out\_file.  Now in static memory.
	\item [\GMTprog{psclip.c}]: Produce at least ``S V'' when the clippath is empty.
	\item [\GMTprog{pscoast.c}]: Produce at least ``S V'' when the clippath is empty.
	\item [\GMTprog{psscale.c}]: When using \Opt{A} with a vertical color bar, the annotations where left-
		in stead of right-aligned.  When using \Opt{A} on horizontal bar, the last tick mark would not appear. 
	\item [\GMTprog{gshhs/gshhs.c}]: Checked wrong variable to test if a file was given on the command line.
	\item [\GMTprog{meca/util\_meca.c}]: Needed to convert the output from \GMTfunc{d\_atan2} to degrees.
	\item [\GMTprog{mgd77/mgd77.c}]: Was failing to read Windows terminated ASCII files.
		Fixed bug in \GMTfunc{MGD77\_igrf10syn} routine (mistake done while cleaning the
		\progname{f2c} version) that resulted in altitude always being on Earth surface
		when geocentric coordinates were used.  Do not use any \GMT\ i/o-functions to access ascii files on
		creation/writing so that it can work under Windows as well.
		Converting files from netCDF to MGD77 where time = NaN gave junk records.
	\item [\GMTprog{mgd77/mgd77list.c}]: Used GMT\_LONG in \GMTfunc{memset} for an array allocated as int.
		Used wrong time for IGRF calculation; worst case situation was off by 1 year.
	\item [\GMTprog{mgd77/mgd77manage.c}]: The \Opt{D} option would remove original attributes.  Now
		both original and revised attributes are carried in memory.
		This problem also affected \GMTprog{mgd77convert} \Opt{FC} if used on a
		file after \GMTprog{mgd77manage} \Opt{D} had been run.
		Used wrong time for IGRF calculation; worst case situation was off by 1 year.
		Now uses \GMTfunc{GMT\_read\_img} to handle *.img files; earlier the inline code would fail on the new extended img files.
	\item [\GMTprog{mgd77/mgd77sniffer.c}]: Did not reset the E77 structure between cruises.
	\item [\GMTprog{misc/gmtstitch.c}]: Did not read standard input if no files were given.  Now honors \Opt{V} properly.
	\item [\GMTprog{x2sys/x2sys.c}]: Wrong array argument passed for correction aux values.
	\item [\GMTprog{x2sys/x2sys\_cross.c}]: Removed the \Opt{F} option which was not honored anyway.
	\item [\GMTprog{x2sys/x2sys\_init.c}]: Now properly copies the *.def file to the TAG dir.
	\item [\GMTprog{x2sys/x2sys\_datalist.c}]: Only ASCII output had corrections (\Opt{L}) applied.
	\item [\GMTprog{x2sys/x2sys\_put.c}]: Fixed \Opt{D} option (was falling in a endless loop).
\end{description}

Here is a list of the recent enhancement to various programs:

\begin{enumerate}
	\item \GMTprog{gmt\_init.c} has added support for enhanced \Opt{E} option for 3-D perspective
		views which allows the specification of a fixed point (needed for
		new Default setting {\bf NAN\_RECORDS} = skip$|$pass [skip].
		If ``pass'' we treat let the programs handle the NaNs; for some
		programs the NaNs in input record will act as indicators of
		data gaps for continuous lines.  If ``skip'' we report them
		as bad records.  In both cases the records are skipped.
		Allow negative integer interval (-n) for annotating log axis; this means annotate every n'th power of 10.
	\item \GMTprog{gmt\_nc.c} will properly handle netCDF that have LatLon = 0, 1: flip x and y.
	\item \GMTprog{gmt\_shore.c} Added support for the {\bf+p}{\it percent} modifier to limit features whose
		area is less {\it percent} of the corresponding full-resolution polygon.
	\item \GMTprog{gmt\_support.c} enables \GMTfunc{GMT\_intpol} to handle NaNs by treating them as segment
		boundaries.  Rely on Shewchuk's triangle function to get Voronoi output.
	\item \GMTprog{blockmedian.c} now returns the quantile(x), quantile(y) location when \Opt{T} is used.
		Added \Opt{Eb} to get box-and-whisker output (0. 25, 50, 75, and 100\% quantiles).
	\item \GMTprog{gmtconvert.c} now allows \Opt{S}$\sim$pattern which reports segments whose header does NOT contain pattern.
		Should pattern actually start with $\sim$ we escape it with $\backslash\sim$pattern.
	\item \GMTprog{gmtselect.c} can now handle dateTclock strings in \Opt{Z} when used with
		data whose 3rd column contains time.
	\item \GMTprog{gmtmath.c} added {\bf MOD} function (remainder after floored division,
		Knuth style). This is in contrast to {\bf FMOD} which gives the remainder after (horror) truncated division.
	\item \GMTprog{gmtselect.c} Same upgrade to \Opt{A} option as \GMTprog{pscoast}.
	\item \GMTprog{grdcut.c} has new option \Opt{Z} which is used to determine a rectangular subregion
		so that the rejected area have values entirely outside the given z-range.
	\item \GMTprog{grdfft.c} now also has a Butterworth band-pass filter.
	\item \GMTprog{grdinfo.c} will now use plain text (and not code) to report the file format used.
		Add option \Opt{L}0 to actually scan data to determine {\it zmin} and {\it zmax}.
	\item \GMTprog{grdlandmask.c} Same upgrade to \Opt{A} option as \GMTprog{pscoast}.
	\item \GMTprog{grdmath.c} added {\bf MOD} function (remainder after floored division).
	\item \GMTprog{ps2raster.c} takes \Opt{W+k} to create a simple KML file for Google Earth.  Several
		other modifiers help to populate the KML file.
	\item \GMTprog{psclip.c} has a new option \Opt{T} that turns on map region clipping without any
		input data files; it is a shorthand for \Opt{N} \filename{/dev/null}.
	\item \GMTprog{pscoast.c} has enhanced \Opt{C}[{\bf l}$|${\bf r}/]{it fill} offers to paint river-lakes separately from lakes.
		The \Opt{A} option can be used to exclude river-lakes or lakes for level 2.
		\Opt{W} now allows different pens for the 4 levels of shorelines.
	\item \GMTprog{pglegend.c} allows {\bf S} record not to have {\it text}. Until now, when left empty would
		use whatever {\it text} was set to in previous record.  The $>$ record no longer needed before T;
		T, L, S, H alignment harmonized; I, M, B spacing improved; \Opt{B} option added.
	\item \GMTprog{psxy.c} added \Opt{g} to break lines into segments based on gap criteria;
		added \Opt{T} to be a shorthand for reading no input, where we used \filename{/dev/null} before.
	\item \GMTprog{psxyz.c} added \Opt{g} to break lines into segments based on gap criteria.
	\item \GMTprog{triangulate.c} has new option \Opt{Q} to generate Voronoi polygon edges.
	\item \GMTprog{mgd77/mgd77convert.c} allows users to give file.ext on command line.
	\item \GMTprog{mgd77/mgd77list.c} can now take \Opt{DA} and \Opt{DB} which, in the presence of time = NaN,
		will not output such records [\Opt{Da}$|${\bf b} will].  Also clarified the ranges implied by \Opt{D} and \Opt{S}.
		Added \Opt{F}ytime which gives decimal absolute year for time output.
		Modifier \Opt{At} added which attempts to create fake cruise times
		based on header information and distance along track.
	\item \GMTprog{mgd77/mgd77manage.c} added \Opt{AE} to ignore the verification status and process e77 anyway.
	\item \GMTprog{mgd77/mgd77path.c} added \Opt{P-} to just list the IDs and not the full paths.
	\item \GMTprog{mgd77/mgd77track.c} added \Opt{Gt}$|${\bf d}{\it gap} to recognize gaps in tracks based on
		distance or time between successive points.
	\item \GMTprog{mgg/mgd77togmt.c} added new \Opt{T} and \Opt{W} options to store total field and account for the
		magnetometer tow distance. Also tries to get info from header file.
	\item \GMTprog{misc/gmtstitch.c} has enhanced \Opt{T} option to eliminate connections when the 2nd closest
		pair is too close.  Also added \Opt{C} option to simply separate the open from the closed polygons (no stitching).
		Added \Opt{L} option to write out segment-link information.
	\item \GMTprog{x2sys/x2sys\_list.c} can now accept list of weights for each track and output the
			composite weight for each crossover.
	\item \GMTprog{x2sys/x2sys\_solve.c} has option \Opt{W} means an extra column with crossover weight.
\end{enumerate}

% 4.4.0

\subsection{Overview of \gmt\ 4.4.0 [Feb-15, 2009]}

This is a significant update of the official distribution and hence has a mix of bug fixes
and program enhancements.  We have added a new program (\GMTprog{greenspline.c}) which
offers interpolation and gridding in 1--3 dimensions using Green's functions of various
splines.  Also, the {\bf misc} supplement has a new tool (\GMTprog{gmtdp.c}) which offers
line-reduction using the Douglas-Peucker algorithm we used for the various shoreline
resolutions.  The {\bf mex} supplement has a new Matlab/Octave function
(\GMTprog{imgread.m}) to directly read Sandwell/Smith *.img files.  The {\bf x2sys}
supplement has three new programs: \GMTprog{x2sys\_list.c} can extract a subset of crossovers
from the list produced by \GMTprog{x2sys\_cross.c}, \GMTprog{x2sys\_report.c} reports statistics
of crossovers, whereas \GMTprog{x2sys\_solve.c} will
determine systematic trends from a set of crossover errors.  These programs are intended
to replace the old {\bf x\_system} tools \GMTprog{x\_list.c}, \GMTprog{x\_report.c} and \GMTprog{x\_solve\_dc\_drift.c}.
We have also temporarily added \GMTfunc{GMT\_qsort} which is a 64-bit compliant version
of \GMTfunc{qsort}.  The latter is broken under OS X 64-bit and is
thus substituted on that platform only for 64-bit compilations until Apple fixes the problem.
Finally \GMTprog{ps2raster.c} can now be used to create geotiff images if \progname{gdal} is installed on your system.
Here is the list of bug corrections:
\begin{description}
	\item [\GMTprog{gmt\_customio.c}]: Fixed sub-region access in Surfer format. This bug would 
		manifest itself mainly when doing a \GMTprog{grdcut} with a N-S sub-region.
	\item [\GMTprog{gmt\_init.c}]: Modified special checks for FreeBSD by also considering \_AMD64\_.
	\Opt{JXh} was misinterpreted whereas \Opt{JXv} was OK.
	\item [\GMTprog{gmt\_io.c}]: Did not properly apply {\bf PLOT\_DEGREE\_FORMAT}=ddd.x for decimal degrees.
	\item [\GMTprog{gmt\_map.c}]: Determining where parallels and meridians intersected the map
		boundary was susceptible to roundoff for very small regions.
		Added improved clipping for geographic polygons using
		the Sutherland and Hodgman algorithm when there are no map
		jumps in longitude.  Fixes problem with tiny strips of
		``land'' along map perimeter for some projections.
	\item [\GMTprog{gmt\_math.h}]: Check for macro definitions for system math functions.
	\item [\GMTprog{gmt\_plot.c}]: Wrongly checked for map jumps for non-periodic map boundaries.
		Bug in \GMTfunc{GMT\_fill\_polygon} that affected polygon outline.
		3D text box was computed incorrectly.  Could exceeded array size in \GMTfunc{GMT\_epsinfo}.
	\item [\GMTprog{gmt\_proj.c}]: Fixed bug in Lambert conformal conic projection for southern hemisphere.
	\item [\GMTprog{gmt\_support.c}]: Function \GMTfunc{GMT\_get\_arc} did not check for division by zero.
			The \Opt{Gx}{\it file:radius}[unit] option in \GMTprog{grdcontour.c} passed the entire
			argument as the file name. Function \GMTfunc{GMT\_polygon\_is\_open} did not test for empty polygons (n = 0).
			Avoid interpolating hue (converted from RGB) over more than 180 degrees.
			Changed \GMTfunc{GMT\_rgb\_to\_hsv} to integer logic to avoid errors on
			some compilers. As a result: much shorter code as well.
	\item [\GMTprog{gmt\_vector.c}]: Function \GMTfunc{GMT\_resample\_path} would add 360 to points along meridians.
	\item [\GMTprog{pslib.c}]: \GMTfunc{ps\_polygon} can only split line when rgb[0] == -1 not $<$ 0
		since -3 now means to use a fill pattern.  Redefined \PS code for circle which needed a stroke (S) first, otherwise
		a line would be drawn from the previous symbol.  Updated \filename{PSL\_prologue.ps} version.
		Image placement now in integers. Ensures that placement is consistent with e.g. box drawn with the same coordinates.
		Does not produce colormap with number of pixels and colors is the same.
	\item [\GMTprog{gmtmath.c}]: The {\bf D2DT2} operator whose boundary condition yields 0 should yield NaN
		if one or more of the nearby nodes are NaN.
	\item [\GMTprog{grdblend.c}]: A side-effect of the 2007-02-01 fix was that when the file
		is re-opened the row range is reset.  Now the possible
		offset is computed during initialization but applied when
		the file is finally opened for reading.
		Better treatment of longitude periodicity if \Opt{fg} is selected.
		E.g., if \Opt{Rg} is used and a grid is -30/30 in longitude the
		output grid will consider 0-30 and 330-360 correctly
	\item [\GMTprog{grdfilter.c}]: \Opt{D}5 did not initialize {\it xscale} so filter search box was
		set to region width which typically is much larger.  The bug
		did not affect the results but unnecessarily increased runtime.
		Complained if \Opt{R} was used and {\it xmin} was less than grid {\it xmin} for a full 360-range grid.
	\item [\GMTprog{grdimage.c}]: Failed to determine boundary of projected grid with enough precision.
	\item [\GMTprog{grdmath.c}]: Some 2nd-order derivatives whose boundary condition yields 0 should yield NaN
		if one or more of the nearby nodes are NaN.
	\item [\GMTprog{grdreformat.c}]: Since there is no longer a \filename{share/conf/gmt\_formats.conf} the usage message crashed.
		Did not initialize grid header structure and could get netCDF error ``Named variable does not exist in file''.  This
		could also occur in \GMTprog{grd2cpt.c}, \GMTprog{grdedit.c}, \GMTprog{grdtrack.c}, \GMTprog{grdvector.c},
		\GMTprog{grdview.c}, and \GMTprog{grdvolume.c}.
	\item [\GMTprog{psbasemap.c}]: The syntax for the \Opt{L} option had to change since one could
		not easily use the :label: specification if the coordinates
		were given in dd:mm[:ss] format.  A new syntax has been
		implemented where one or more +?[args] strings are appended
		after the required parameters (see man page).
		Erroneously suggested that 3-D base was plotted at z=0, instead of at the bottom end of the z-axis.
	\item [\GMTprog{pscoast.c}]: The \Opt{Q} option incorrectly required \Opt{J}.
		Also, see revised \Opt{L} as for \GMTprog{psbasemap.c}.
	\item [\GMTprog{pslegend.c}]: Now use Unix \GMTfunc{remove} function to delete script after completion;
		this avoids a Windows problem.
	\item [\GMTprog{psmask.c}]: Fixed a bug for \Opt{D-}{\it file} which did not write multi-segment headers.
	\item [\GMTprog{psscale.c}]: Logarithmic scale did not function properly when scale bar was vertical.
		When \Opt{I} and \Opt{Li} was used we did not draw box outlines.
		Did not check if \Opt{D} was not given, and had wrong test for \Opt{E}.
		Added \Opt{Aa} and \Opt{Al} options to move only the annotations or label to the other side of the color bar.
		Now requires \Opt{Ac} to keep writing the vertical labels as columns.
	\item [\GMTprog{pstext.c}]: We incorrectly removed blank lines but those mark new
		paragraphs when in \Opt{M} mode.
	\item [\GMTprog{psxyz.c}]: Did not pick up y-size for column from input data file.
	\item [\GMTprog{xyz2grd.c}]: For \Opt{E} under Windows we used \GMTfunc{fscanf} with a pointer from GMT DLL
		which would fail for mysterious reasons.
	\item [\GMTprog{meca/psmeca.c}]: Fixed bugs that would give strange beach balls for some input.
	\item [\GMTprog{meca/pscoupe.c}]: Fixed bugs that would give strange beach balls for some input.
	\item [\GMTprog{misc/gmtstitch.c}]: Check to see if format was set was wrong.
	\item [\GMTprog{mgd77/mgd77.c}]: Index array error resulting in wrong IGRF start and stop years was fixed.
		Now applies recalculation of fields requested by E77 flags
		as part of reading netcdf mgd77+ files.  However, if the
		original anomaly was NaN then we leave it as is.
	\item [\GMTprog{mgd77/mgd77sniffer.c}]: Bitwise assignment error was deactivating other fields when
		depth field was missing from a cruise.  Another bitwise error
		was overwriting E77 nav flags when navigation was found on land
		Updated sample grid function to handle longitudes for img files.
	\item [\GMTprog{mgd77/mgd77track.c}]: Missing newline after last source line.
	\item [\GMTprog{spotter/backtracker.c}]: The \Opt{W} option always assumed the reverse rotation,
		\emph{i.e.} from hotspot to seamount.  Now obeys the \Opt{D} option.
	\item [\GMTprog{x2sys/x2sys\_get.c}]: Now handles \Opt{R} with longitude periodicity correctly.
	\item [\GMTprog{xgrid/xGridEdit.c}]: Needed \GMTfunc{GMT\_io\_init} to get all pieces needed to read grids.
\end{description}

Here is a list of the recent enhancement to various programs:

\begin{enumerate}
\item \GMTprog{gmt\_init.c} has added support for enhanced \Opt{E} option for 3-D perspective
	views which allows the specification of a fixed point (needed for
	creating animations).  Updated all programs to use the new option
	and added updated man page and synopsis to all programs.
	Now, \Opt{R} may take the name of an existing grid file. Then,
	the grid domain is used to set \Opt{R} as well as the grid
	increment (and registration) for those programs that have such options.
\item \GMTprog{gmt\_map.c} also has added support for enhanced \Opt{E} option for 3-D perspective views.
\item \GMTprog{gmtmath.c} has added new operators {\bf NOT} and {\bf INRANGE}.
\item \GMTprog{grd2cpt.c} can now accept multiple grid files at once.
\item \GMTprog{grdfilter.c} has new options \Opt{Np} to honor any NaNs found so output can be NaN,
	\Opt{Nr} to replace output node with NaN if input node is NaN, and
	\Opt{Ni} to ignore NaNs [Default].
\item \GMTprog{mapproject.c} has extended the \Opt{A} option by making the fixed point
	optional; if not given we compute azimuths between successive data points.
\item \GMTprog{minmax.c} has optional /{\it col} that may be added to \Opt{T}{\it dz} to select another column [third].
	Added \Opt{S} to leave space for error bars. Useful with \Opt{I} and subsequent \GMTprog{psxy} \Opt{E}.
\item \GMTprog{pscoast.c} has a new modifier {\bf +} to the \Opt{D} option, which determines the
	next lower resolution should the selected one not be available.  This enhancement also affects
	both \GMTprog{gmtselect.c} and \GMTprog{grdlandmask.c}.
\item \GMTprog{psimage.c} has new \Opt{Gt} option, with assignment of color to be made transparent.
\item \GMTprog{pslegend.c} lets {\bf N} (number of columns) also affect the printing of labels.
	Can now use rectangle among the symbols.
\item \GMTprog{psmask.c} now has modifiers {\bf +n}{\it n\_points} and {\bf +q} to the \Opt{D} option to limit the minimum number of
	points a polygon must have and, to suppress \PS\ output, respectively.
\item \GMTprog{pstext.c} has enhanced \Opt{Z}+ option expects z-level values in 3rd column.
\item \GMTprog{pslib.c} internals now measure paper size in double precision points instead
	of truncating to nearest integer.  To remain backwards
	compatible for \GMTprog{pslib.c} users we now initialize all plotting
	in GMT with \GMTfunc{ps\_plotinit\_hires} instead of \GMTfunc{ps\_plotinit}.
	Allow transparency when plotting 8-bit images (as well as 24-bit).
	We now use a new implementation of \GMTfunc{ps\_textdim} to ensure proper alignment
	of texts and the optional surrounding boxes.  Finally, wehave simplified the \PS\ code
	for symbols and removed some limitations on plotting by officially moving to \PS\
	language level 2.
\item \GMTprog{ps2raster.c} now will scan for the optional comment \verb+%%HiResBoundingBox+
	which takes precedence over the values in \verb+%%BoundingBox+.
	New format \Opt{TG} turns on transparency for PNG output, and \Opt{Tb} selects Microsoft BMP output.
	Formats {\bf b}, {\bf g}, {\bf j}, and {\bf t} accept modifier ``-'' to produce grayscale
	images.  Added \Opt{C}{\it gs-command} to pass one or more
	custom switches directly to \progname{ghostscript}, and \Opt{Q}[{\bf g}$|${\bf t}]{\it bits} to
	set the level of anti-aliasing for graphics and text, respectively.  We also added a new
	option \Opt{F} to force a specified output file name.  Finally, added \Opt{W} to help create world files
	and geotiff output.  To simplify boundary annotations for such plots (which must be inside the map region)
	we added the new choice {\it inside} for the {\bf BASEMAP\_TYPE} default parameter.
\item \GMTprog{psxy.c} has new option \Opt{I}{\it intens} to modulate fill color via a fixed illumination value.
\item \GMTprog{psxyz.c} has the same new option \Opt{I}{\it intens}.
\item \GMTprog{xyz2grd.c} has new format ({\bf A}) for \Opt{Z} which allows more than one floating
	point value per input record.  Cannot be used if the z-values are in dateTclock or ddd:mm:ss format.
\item \GMTprog{mgd77/mgd77track.c} has enhanced \Opt{A} option to place cruise ID equidistantly (distance or time) along the track.
\item \GMTprog{spotter/backtracker.c} has new option \Opt{e} to specify a single fixed total
	reconstruction rotation that will be applied to all input points.
\item \GMTprog{x2sys/x2sys.c} internals now has automatic swabbing of index files, if required.
	Can now handle netCDF 1-D COARDS files.
\item \GMTprog{x2sys/x2sys\_init.c} Now, the distance and speed unit settings (\Opt{C}, \Opt{N}) are set here
	and kept with the TAG for use in other {\bf x2sys} programs.
\item \GMTprog{x2sys/x2sys\_datalist.c} now has [experimental] support for using a correction
	table and can compute auxiliary data such as distance and azimuth.
\end{enumerate}

Finally, we have added three new examples to demonstrate plotting of *.img grids, mixing UTM grids and geographic projections,
and using \GMTprog{greenspline.c} for gridding on a spherical surface.

\subsection{Overview of \gmt\ 4.3.1 [May-15, 2008]}

This quick update only 2 weeks after the release of version 4.3.0 was prompted by the discovery of three
serious bugs; two of which were quite old but had caused no harm until tested under Fedora 9.
The third critical bug prevented the wholesale reading and writing of GRD98 format grids.  In addition
a few minor bugs were discovered; this is the list of all corrections:
\begin{description}
\item [\GMTprog{gmt\_io.c}]: \GMTfunc{GMT\_nc\_input} would not read all data columns when no variable names were given.
\item [\GMTprog{gmt\_mgg\_header2.c}]: Passed two of the arguments to {\it fread} in the wrong order. Prior to version 4.2.0
the return code (which indicated an error) was not checked yet the read did return the correct data.
With better error checking this latent bug now caused a refusal to read any GRD98 grid.
\item [\GMTprog{gmt\_support.c}]: Allow a little more slop in determining whether primary tick
is at same location as secondary tick.
\item [\GMTprog{gmtselect.c}]: Did not like a variable number of input columns.  Now OK if both input and output is ASCII
and there are at least 2 (3 with \Opt{Z}) input columns present.
\item [\GMTprog{grd2xyz.c}]: For option \Opt{E}, the test for {\it xinc} == {\it yinc} was susceptible to round-off.
\item [\GMTprog{project.c}]: Now explicitly initializes the pointers in the data structure to NULL since {\it realloc} does not
initialize new memory (yet almost all implementations of {\it realloc} appear to have done so anyway, masking the memory bug).
\item [\GMTprog{psxy.c}]: The \Opt{D} option erroneously gave an error despite being used properly.
\item [\GMTprog{psxyz.c}]: Similar problem as described for \GMTprog{project}.
\item [\GMTprog{xyz2grd.c}]: The \Opt{S} option incorrectly insisted that \Opt{G} must be used.
\end{description}

In addition, many of the supplements did not work properly under Windows due to internal problems with the DLL.  Finally,
one enhancement snuck in before the decision to issue this update was made:
\begin{enumerate}
\item \GMTprog{gmt\_init.c} was enhanced so that the media size {\bf Custom\_WxH} can use W and H in inch, cm, or m
by appending {\bf i}, {\bf c}, or {\bf m} to each dimension [Default remains points].
\end{enumerate}

\subsection{Overview of \gmt\ 4.3.0 [May-1, 2008]}

Changes are once again a mix of structural improvements, bug fixes, and a few enhancements.
The coastline files (now GSHHS 1.10) have seen minor modifications, the mex supplement now offers
support for \htmladdnormallinkfoot{\progname{Octave}}{http://www.octave.org}, all source code is now fully
64-bit compliant, we have added an isolation mode option (if \textbf{GMT\_TMPDIR} is defined, write
temporary and hidden files to that directory),
and the configure/make setup has been further improved (such as honoring CFLAGS and LDFLAGS set by user).
Colors may now be specified
as hexadecimal codes (e.g., \#ff0000 for red), and projections can be specified by name
(similar to \htmladdnormallinkfoot{\progname{Proj4}}{http://proj.maptools.org}).  Finally, binary table
data can now be COARDS-compliant netCDF files. As for documentation, we have now switched from
C shell to Bourne shell (although the \progname{csh} examples are still distributed).

The following lists specific enhancements or new program options:

% Enhancements:
\begin{enumerate}
\item \GMTprog{gmt\_grdio.c} is modified so the grid i/o supports the \textbf{GMT\_[DATA$|$IMG$|$GRID]DIR} environment settings.
\item \GMTprog{gmt\_init.c} was enhanced so \Opt{U} can now interpret a justification (e.g., \emph{just/dx/dy}
on the command line or by setting \textbf{UNIX\_TIME\_POS}) and we introduced a new default parameter \textbf{UNIX\_TIME\_FORMAT}
which controls the formatting of the timestamp.
\item \GMTprog{gmt\_io.c} now implements \Opt{b}[\textbf{i}$|$\textbf{o}]\textbf{c}[\emph{var1/...}] option to indicate input is netCDF.
\item \GMTprog{gmtmath} recognizes new constants \textbf{TMIN}, \textbf{TMAX}, \textbf{TINC}, and \textbf{N}.
\item \GMTprog{grdimage} uses \Opt{N} to not clip image at map boundary.
\item \GMTprog{grdview} now uses \Opt{Wf} to change the facade pen from its default value.
\item \GMTprog{grdmath} recognizes new constants \textbf{XMIN}, \textbf{XMAX}, \textbf{XINC}, \textbf{NX}, and similarly
\textbf{YMIN}, \textbf{YMAX}, \textbf{YINC}, \textbf{NY}.
\item \GMTprog{mapproject} \Opt{G+} will compute distances between coordinates in first 4 columns.
\item \GMTprog{ps2raster} has new option \Opt{D} to specify alternative output directory and \Opt{V} to report progress.
\item \GMTprog{psrose} has new option \Opt{F} to disable the plotting of the scale bar.
\item \GMTprog{psxyz} has new option \Opt{D} to match option set in \GMTprog{psxy}.
\item \GMTprog{mgd77/mgd77list}	added \Opt{Ga}$|$\textbf{b}\emph{rec} to limit output to a certain record range.
\item \GMTprog{spotter/hotspotter} added \Opt{S} to normalize output to percent of CVA maximum.
\item \GMTprog{spotter/grdspotter} is a new program, like \GMTprog{hotspotter}, but using gridded data as input.
\end{enumerate}

A long list of bugs has been squashed since the last release, the most important are listed below:

\begin{description}
\item [\GMTprog{gmt\_grdio.c}]:	Fixed 3 bugs in \GMTfunc{GMT\_decode\_grd\_h\_info} that caused problems parsing \Opt{D}
option. Explicitly exclude = sign from becoming separator.
\item [\GMTprog{gmt\_io.c}]: Now skips blank lines that has leading whitespace.
\item [\GMTprog{gmt\_init.c}]: \textbf{c} for seconds was not recognized as \textbf{TIME\_UNIT} (expected \textbf{s},
which is kept for backwards compatibility). \Opt{B} processing of labels used an internal string that was too short,
which could lead to label truncation.  Fixed ``Holiday-bug'' in \GMTfunc{GMT\_parse\_J\_option} introduced 2007-12-21.
\GMTfunc{GMT\_str\_tolower} could run out of bounds. Probably only affected 32-bit compilers.
\GMTfunc{GMT\_is\_a\_blank\_line} is now used wherever ascii input is processed.
\item [\GMTprog{gmt\_map.c}]: Fixed bug in radial clipping. The radial clipping would sometimes add arcs using the arc that
exceeds 180 degrees.  Added new rectangular clip function using Sutherland/Hodgman algorithm
in order to fix incorrect results in \GMTprog{grdlandmask}.  Minor bug in 4th term in conformal to geodetic lat.
Round-off could mess mapping of west/east to xmin/xmax.  Now has a safety valve for checking that this does not occur.
\item [\GMTprog{gmt\_plot.c}]: 3-D basemap axis did not use \textbf{LABEL\_OFFSET}.
\item [\GMTprog{gmt\_proj.c}]: Fixed bug in azimuthal equal area projection that had the
horizon shifted from where it ought to be.  Avoid error in \GMTfunc{GMT\_lamb\_sph} when lat is 90 degrees.
Clip path for general perspective projection was not closed. For \Opt{JS}: Would set slice to NaN if central meridian was not Greenwich.
For \Opt{JR}: Longitudes beyond 180 were set to 180.
\item [\GMTprog{gmt\_stat.c}]: Bug in \GMTfunc{GMT\_median} would sometime give subtle mistakes, most noticeable
when only a few values were passed to the function. Traced to the use
of \emph{size\_t} variables in expressions that could yield a negative value.
Fixed minor issues in \GMTfunc{GMT\_PvQv} function.
\item [\GMTprog{gmt\_support.c}]: Made \GMTfunc{GMT\_polygon\_is\_open} tolerant of round-off and if
polygon is not open set last to exactly equal first point.   \GMTfunc{GMT\_get\_annot\_label} did not
properly honor the \emph{ddd.xx} setting. Now implements annotation for Gnomonic maps.
In \GMTfunc{GMT\_contour}, would occasionally not check internal crossings for some interior contours.
\item [\GMTprog{pslib.c}]: Bug in \GMTfunc{ps\_shorten\_path} lead to SEGV when path resulted in a single point.
Fixed error in applying \GMTprog{pstext}'s \Opt{Dj}\emph{dx/dy} shift in paragraph mode (\Opt{M}).
Redefine rect symbol to be less prone to round-off.
Used internal \emph{point\_code} before it was initialized.  This
caused \textbf{PAGE\_COLOR} not to work (wrote $<$NUL$>$ rather than C).
\item [\GMTprog{gmtmath.c}]: Implemented Welford (1962) algorithm in \textbf{KURT}, \textbf{SKEW} and \textbf{STD} operators
for more precise one-pass computation of mean and sum of squares.
\item [\GMTprog{gmtselect.c}]: The \Opt{:o} option failed to reverse output order.
\item [\GMTprog{grd2xyz.c}]: Do not abort when \Opt{R} exceeds grid; simply output common region.
For gridline oriented grids: \Opt{E} returned xll and yll one cell too large. Now writing [xy]llcenter properly.
\item [\GMTprog{grdblend.c}]: Did not pick up node registration before calculating output grid size.
\item [\GMTprog{grdedit.c}]: Adjust z\_min and z\_max when changing add\_offset or scale\_factor.
\item [\GMTprog{grdgradient.c}]: With \Opt{D} and \Opt{S} the slopes were not set to NaN if data were NaN.
\item [\GMTprog{grdinfo.c}]: Implemented Welford (1962) algorithm for more precise one-pass
computation of mean and sum of squares.  zmin==zmax no longer forces \Opt{M} option.
\item [\GMTprog{grdmask.c}]: Tiny bug for determining which hemisphere (N/S) unlikely to have had any effect.
Needed to allow for some slop when comparing shrink to 0.0 since sometimes the result of \emph{acos} is 1e-14 or thereabouts.
\item [\GMTprog{grdmath.c}]: Implemented Welford (1962) algorithm in \textbf{KURT}, \textbf{SKEW} and \textbf{STD} operators
for more precise one-pass computation of mean and sum of squares.
\item [\GMTprog{grdview.c}]: The facade (\Opt{N}) outline was drawn with contour pen.
The \Opt{Qc} option failed to set the ``build image'' flag and produced
garbage surface tiles.  Also, \Opt{T}[{\bf s}] produced polygons that were
not checked for wrapping at a periodic map boundary.  Clarified that \Opt{T} cannot take \Opt{JZ}$|${\bf z}.
\item [\GMTprog{minmax.c}]: Could get confused when longitudes crossed dateline or Greenwich,
and \textbf{OUTPUT\_DEGREE\_FORMAT} could interfere with result.
\item [\GMTprog{pscontour.c}]: \Opt{T} option was susceptible to infinite loop if bad record was found.
\item [\GMTprog{pshistogram.c}]: The \Opt{R} option was processed separately and did not understand time coordinates.
Bug in \Opt{F} option failed to center bins.
\item [\GMTprog{psmask.c}]: The \Opt{D} option used the wrong output file name.
\item [\GMTprog{psscale.c}]: Inverted vertical scale, when using filled rectangles:
Colors remained in the original order. Inverted vertical or horizontal
scale, when using rectangles with gradients: Size of rectangles followed
original order, not inverted. In reverse mode, \Opt{Eb} was plotting
foreground triangle, \Opt{Ef} background triangle.
\item [\GMTprog{pstext.c}]: Parsing of \Opt{C} complained about \% sign.
\item [\GMTprog{psxy.c}]: If first symbol in list with size was not circle, it got rejected.
When sizes of \Opt{Sr} or \Opt{Sj} were read from list, they were always assumed to be in inches.
Drawing arrows with \Opt{SvS} and time-coordinates did not work as 2nd time coordinate did not get processed properly.
\item [\GMTprog{psxyz.c}]: If first symbol in list with size was not circle, it got rejected.
When sizes of \Opt{Sr} or \Opt{Sj} were read from list, they were always assumed to be in inches.
\item [\GMTprog{sample1d.c}]: Calendar time knots did not get properly interpreted with \Opt{N}.
\item [\GMTprog{mgg/mgd77togmt.c}]: Did not initialize the MGG\_SHAREDIR path.
\item [\GMTprog{mgd77/mgd77.c}]: Wrong header order written if \GMTprog{mgd77convert} ... \Opt{Tt} was used.
\item [\GMTprog{mgd77/mgd77info.c}]: Could get confused when longitudes crossed dateline or Greenwich,
and \textbf{OUTPUT\_DEGREE\_FORMAT} could interfere with result.
\item [\GMTprog{mgd77/mgd77sniffer.c}]: Numerous fixes and enhancements; see ChangeLog.
\item [\GMTprog{x2sys/x2sys.c}]: Error in determining which columns had been requested.
\item [\GMTprog{x2sys/x2sys\_binlist.c}]: Could create bad bins because of incorrect reallocation of memory.
\item [\GMTprog{x2sys/x2sys\_get.c}]: The \Opt{L} option did not honor any \Opt{F} or \Opt{N} settings.
\item [\GMTprog{x2sys/x2sys\_put.c}]: Wrong test when replacing older track info lead to data base loss.
\item [\GMTprog{x2sys/x2sys\_cross.c}]: Used wrong data column order and computed speed when there is no time.

\end{description}

\subsection{Overview of \gmt\ 4.2.1 [October-10, 2007]}

Changes in \GMT\ 4.2.1 once again address many structural issues as well as numerous bug fixes.
System-wide changes include a revamping of the entire configure/make setup for both regular
installations and CVS users, an improvement to how the BCR 2-D interpolations for images and grids
are done by adding B-spline and nearest neighbor as optional interpolants, introduction of
a new \PS\ Level 2 pattern machinery in \GMTprog{pslib.c}, an updated GSHHS coastline version (which
also includes Australia internal state
boundaries, fixes to the Yemeni and Lebanese borders, and more river lines), and general
improvements and corrections to the documentation, such as placing all man pages in section 1
(except pslib which goes in section 3). Starting with \GMT\ 4.2.1 we will also begin naming
the coastline-related archives by the GSHHS prefix and use the actual GSHHS version number (now
1.9).

Individual programs have also seen some new options or enhancements:
% Enhancements:
\begin{enumerate}
\item \GMTprog{gmtselect} has enhancement \Opt{Lp} to limit points beyond a line's endpoints.
\item \GMTprog{grdfilter} has new option \Opt{D}5 to allow direct filtering of Mercator grids (img).
\item \GMTprog{grdmask} has an enhanced \Opt{A} option; append \textbf{m} or \textbf{p} to design
a mask polygon by first following a meridian, then a parallel, or vice versa.
\item \GMTprog{gmtmath} has several new operators, such as \textbf{PLMg} (geophysical normalization
and suitable for high degree and order), \textbf{FACT, SKEW, KURT, PQUANT, EULER, PSI, PV, QV, COT,
COTD, ACOT, SEC, SECD, ASEC, CSC, CSCD}, and \textbf{ACSC}.
\item \GMTprog{grdmath} has the same new operator as \GMTprog{gmtmath}, plus \textbf{YLMg} and \textbf{CBAZ}.
\item \GMTprog{grdproject} now considers \Opt{R} an optional setting.
\item \GMTprog{mapproject} has an enhanced \Opt{G-} option where increments rather than 
cumulative distances are returned.  Also, for UTM projections with \Opt{C}, the \Opt{R}
option is now optional provided the UTM zone is properly specified.
\item \GMTprog{ps2raster} has now a new \Opt{P} option for forcing portrait orientation.
\item \GMTprog{pshistogram} has now a new \Opt{C} option for using a cpt file to paint the bars.
\item \GMTprog{pstext} will now accept the @\_, @: and @; escape sequences for underline,
font size change, and font color change regardless of mode.
\item \GMTprog{psrose} has a new option \Opt{L} to control the labels.
\item \GMTprog{psxy} has an enhanced \Opt{A} option; append \textbf{m} or \textbf{p} to draw a
line by first following a meridian, then a parallel, or vice versa. Can now plot a notched
box-and-whisker symbol, and we added \textbf{+n}\emph{dx/dy} to nudge placement of quoted line labels.
Encanced\Opt{E}.../[-$|$+]\emph{pen} where + means apply cpt color (\Opt{C}) to symbol and bar
- means apply to bar only (no fill).  Likewise, \Opt{W}[+$|$-]\emph{pen} controls
if \Opt{C} sets outline (-) or both fill and outline (+).
\item \GMTprog{psxyz} hass enhanced \Opt{W}[+$|$-]\emph{pen} that controls if \Opt{C} sets outline (-)
or both fill and outline (+).
\item \GMTprog{sample1d} now accepts \Opt{Fn} for no interpolation (returns nearest value).
\item Two additional color maps have been added: \textbf{panoply} mimics the default colormap in
the netCDF viewing program \progname{Panoply}; \textbf{cyclic} provides a full spectrum of 360 degrees
in hue.
\item \GMTprog{originator} (\emph{spotter} supplement) has new option \Opt{Q} to specify constant r/t for (x,y,z) data only.
\end{enumerate}

Below is a list of previous problems that we have identified and corrected in the current release:
\begin{description}
\item [\GMTprog{gmt\_agc\_io.c}]: Failed when nx and/or ny was multiple of 40 + 1.
\item [\GMTprog{gmt\_custom\_io.c}]: Surfer grid start at lower, not upper left.
\item [\GMTprog{gmt\_io.c}]: Combinations of \textbf{OUTPUT\_DEGREE\_FORMAT}=ddd:mm:ss.xxxF and \Opt{:}
would add W$|$E to lat and S$|$N to lon for formatted output.
Blank lines were not recognized under cygwin/SFU.
When no delimiters are used for input date format (e.g., yyyymmdd) then yyyy \emph{must be} 4 characters
and we must use \%4d.  Leading zeros are required if year $<$ 1000.
\item [\GMTprog{gmt\_init.c}]: For quoted lines, the :Lh modifier did not reset label if
a segment header had no label specified.  Also, label would include the leading \" in a multi-word label.
Now, UTM zones may be A,B,Y,Z or 1-60 with modifiers C-X (except I and O).
Parsing of psxy's \Opt{Sf} incorrectly scaled a count to inches.
Suffices \textbf{h$|$+$|$-} in \Opt{J} were mistaken for units.
\item [\GMTprog{gmt\_map.c}]: KM\_PER\_DEG was not reset in \GMTfunc{GMT\_set\_spherical}. This may have caused
errors in scaling when \textbf{ELLIPSOID} was not set to Sphere.  \GMTfunc{GMT\_distances} function did not work with correct pointer.
Great circle intersection did not select correct vector sign so
points 180 degrees from a line could pass as close in \GMTprog{gmtselect}.
Removed restriction that east and west limits can not be
both negative. This fixed the remaining Hexagone problem.
\item [\GMTprog{gmt\_nc.c}]: The attribute \texttt{actual\_range} was erroneously stored in grid units
in stead of actual units. The difference is only relevant when storing scaled integers. A backward
compatibility for grids written with previous versions is built in. Also the \GMT\ version number is added
to the global attributes and text attributes are truncated to their proper length.
\item [\GMTprog{gmt\_plot.c}]: Failed to activate ddd.mm.xxx format for maps.  Oblique tickmarks sometimes
were missing for latitudes.
\item [\GMTprog{gmt\_proj.c}]: \Opt{JS} inverse did not apply quadrant check.
\item [\GMTprog{gmt\_support.c}]: ddd:mm.xx (2 or more x) failed to format properly.  Needed to reverse z\_low
and z\_high values as well as rgb values when reversing color maps.
\item [\GMTprog{gmt\_vector.c}]: Function \GMTfunc{GMT\_fix\_up\_path}: Intermediate longitudes now wrapped based on segment,
not on map extent.``greenwich'' argument became superfluous and was
removed. Argument ``step'' was found to be in degrees, not in inches as some calling programs assumed.
\item [\GMTprog{filter1d.c}]: For \Opt{Ff}\emph{file}, set filter width to DBL\_MAX until filter is read.
\item [\GMTprog{grd2cpt.c}]: \Opt{E} flag did not work unless \Opt{T} was used.
\item [\GMTprog{grd2xyz.c}]: Did not switch to binary i/o mode when
\Opt{Z} specified binary output (Windows bug only).
\item [\GMTprog{grdblend.c}]: Now works with Windows DLL by using the GMT i/o functions.
\item [\GMTprog{grdcontour.c}]: \Opt{A}\emph{value} would turn off the expected default transparency.
\item [\GMTprog{grdcut.c}]: Domain check failed for geographic 360-degree grid with \Opt{fg}.
\item [\GMTprog{grdedit.c}]: Disallow \Opt{T} for Surfer grids since they don't support both
kinds of node registration. \Opt{N} did not take into account if \Opt{fg} was given.
\item [\GMTprog{grdfilter.c}]: \Opt{I}\emph{nx+/ny+} was not propagated to the output grid setup.
\item [\GMTprog{grdimage.c}]: Removed \Opt{T} option; no more polygon drawing (use \GMTprog{grdview}).
\Opt{S}\emph{max\_radius} changed to \Opt{S}[-]\textbf{b$|$c$|$l$|$n}[/\emph{threshold}] to
take advantage of new and improved projection function \GMTfunc{GMT\_grd\_project}.
\item [\GMTprog{grdlandmask.c}]: Failed to set rightmost, empty bin if 360-periodicity in effect;
also needed to set repeating right column to left column.
\item [\GMTprog{grdmask.c}]: For \Opt{S}..\textbf{k}, did not properly account for latitude effect on dx.
SEGV error when \GMTfunc{GMT\_fix\_up\_path} returned {\emph fewer} points
than originally allocated and the n\_alloc variable was not reduced accordingly.
\item [\GMTprog{grdmath.c}]: When M=0, set Imaginary component of \textbf{YLM} to 0 (was same as real).
\item [\GMTprog{grdproject.c}]: \Opt{S}\emph{max\_radius} changed to \Opt{S}[-]\textbf{b$|$c$|$l$|$n}[/\emph{threshold}] to
take advantage of new and improved projection function \GMTfunc{GMT\_grd\_project}.
\item [\GMTprog{grdreformat.c}]: Could not determine format of output file automatically since file
does not yet exist (must append file-type code).
\item [\GMTprog{grdsample.c}]: \Opt{Q}\emph{value} changed to \Opt{Q}[-]\textbf{b$|$c$|$l$|$n}[/\emph{threshold}] to
take advantage of new BCR code.
\item [\GMTprog{makecpt.c}]: Colormaps with non-equidistant intervals can now be reversed properly.
\item [\GMTprog{project.c}]: Wrong azimuth for \Opt{N} and \Opt{G} generating lines.
\item [\GMTprog{pslegend.c}]: Usage message did not explain the \Opt{L} option.  Added @ECHO OFF to avoid
commands being echoed into the \PS\ output under Windows.
The color change (C) macro messed up \Opt{Xa} and \Opt{Ya} absolute settings.
\item [\GMTprog{psbasemap.c}]: Check that \Opt{L} is used with geographic coordinates only.
\item [\GMTprog{psimage.c}]: The \Opt{I} option had become always active.
\item [\GMTprog{pslib.c}]: Now no text is written if font size equals 0.
\item [\GMTprog{psscale.c}]: Annotations did not work properly if \Opt{Q} and \Opt{B}1p were used together.
\item [\GMTprog{psxyz.c}]: Fixed bug in painting outline of text symbols.
\item [\GMTprog{xyz2grd.c}]: \Opt{E} did not process pixel grids properly.
\end{description}
A few bug-fixes applies to the supplements as well:
\begin{description}
\item [\GMTprog{gshhstograss.c}]: Removed use of \GMTfunc{getopt} so even the lamest systems can compile it (incuding
Windows).
\item [\GMTprog{img2mercgrd.c}]: Fixed AND vs OR logic in lat bounds check when \Opt{D} was set.
Used wrong origin when \Opt{C} was used.  Now relative to lon = lat = 0.
\item [DLL]: The \emph{meca} supplements now work with Windows DLL by using the GMT i/o functions.
\item [\GMTprog{utilmeca.c}]: Make sure that checks on floating point numbers work well, even
in case of small round off errors. Thanks to Peter Lombard.
\item [\GMTprog{mgd77manage.c}]: \Opt{Q}\emph{value} changed to \Opt{Q}[-]\textbf{b$|$c$|$l$|$n}[/\emph{threshold}] to
take advantage of new BCR code.  Added E77 status attribute to MGD77+ files.
\item [\GMTprog{mgd77sniffer.c}]: Same.  Adjusted anomaly recalculation code so that
cruises with m=1 and b=0 are reported to be same as expected.  Repaired 8 memory leaks. Fixed
two regression bugs, one in grid comparisons in which not all data were copied into the regression
arrays and the other in faa recomputation regression where eot was being applied twice.
Added code to check if regression is outside a specified percent (\Opt{P}).
Updated e77 messages and moved along-track grid offset errors to e77 header rather than having its own error class.
\item [\GMTprog{gmtdigitize.c}]: Must use separate x and y-scales if \Opt{Jx} is specified.
Wrong coordinates used to calculate rms misfit.
\item \GMTprog{originator.c} Now lists option \Opt{L} in both usage and man page.
\item \GMTprog{x2sys.c} \GMTfunc{x2sys\_set\_system} did not initialize structures properly.
\item \GMTprog{x2sys\_cross.c} Skip duplicate files with a warning. Distance calculations
were bogus (see \GMTprog{gmt\_map.c}), and wrong number of arguments passed to readfile function pointer.
\end{description}

Finally, as far as CVS users are concerned, the old "gurumake" system has gone. To compile from CVS, users need to use a GNU
compatible make program. A combination of GNUmakefile and makefile files make sure that those components not in the
tarballs are created from scratch. Type \progname{make} in the GMT directory to get a list of targets.

%-----------------------------------------

\subsection{Overview of \gmt\ 4.2.0 [April-1, 2007]}

Changes in \GMT\ 4.2.0 address many structural issues as well as many bug fixes.  We have consolidated
user initialization files in the ~/.gmt directory, continued to replace tiling with bitmaps,
and have performed a myriad of under-the-hood changes. One imporant and more visible
new feature is the fact that \GMTprog{grdimage} and \GMTprog{pscoast} now can use the general perspective
projection with arbitrary elevation (\Opt{JG} has been enhanced to handle the extra arguments required
-- see the new example 26 for details).
Also, the coastline files have been updated to use GSHHS version 1.5 which fixes minor inconsistencies
in the coastline database.  We have also corrected issues that made the Windows DLL explode in 4.1.4.
Finally, a few enhancements have been made to these programs:

\begin{enumerate}
\item NGDC's GRD98 format has been updated to handle both gridline and pixel node registrations.
\item We have relaxed the restriction on latitude for \Opt{JA}, \Opt{JS} for polar aspects; now more
than one hemisphere may be displayed.  Better warning/error messages.
\item \GMTprog{gmtconvert} has an enhanced \Opt{E} option; append \textbf{f} or \textbf{l}  to only get first or last record per segment.
\item \GMTprog{gmtmath} \Opt{T} can now have \textbf{+} appended to indicate number of points instead of increment.
\item \GMTprog{grdcontour} has a new option \Opt{F} to orient dumped contours.
Can now append :\emph{radius} to the \Opt{G} option in order to specify a minimum
spacing (measured in the x/y plane) between contour labels.
\item \GMTprog{grdinfo} has an enhanced \Opt{I} option.  With no arguments we return the grid's \Opt{I}\emph{dx/dy} string
whereas \Opt{I}- will return the grid's \Opt{R}\emph{w/e/s/n} string.
\item \GMTprog{grdmath} has new option \Opt{M} for using map units in gradients and new \textbf{D2DXY} operator.
Also added \textbf{SBAZ} for back-azimuths and now allow \textbf{ELLIPSOID} to control if great
circles or geodesics should be used (Sphere selects great circles)
\item \GMTprog{psrose} has new \Opt{D} option to center the sector bins (like \GMTprog{pshistogram} \Opt{C}).
\item \GMTprog{psxy} understand \Opt{W-} and \Opt{W+} in multisegment headers which will turn off outline or reset to default, respectively.
Similarly, \Opt{G-} and \Opt{G+} will turn off fill or reset to default (with \Opt{M}).
Also added new option \Opt{SB} for horizontal bar (\Opt{Sb} is vertical).
\item \GMTprog{psxyz} also has \Opt{SB} for horizontal bar (\Opt{Sb} is vertical).
\item \GMTprog{sample1d} now allows absolute time in \Opt{S} option.
\item \GMTprog{imgsrc/img2mercgrd} can take \Opt{C} to let the Mercator x/y use the global origin of img file.
\item Because of its popularity, ease of use, and importance to many user how otherwise would not know about its
existence, \GMTprog{ps2raster} is moved from the supplementary \progname{misc} directory to the main set of \GMT\
programs.
\end{enumerate}

Below is a list of previous problems that we have identified and corrected in the current release:

\begin{description}
\item [\GMTprog{gmt\_init.c}]: Fixed unit problem with\Opt{Jx}1:xxxxx.  Erroneously added degree symbol
to both coordinates in case of \Opt{JX}..d/.. (single d). Now properly adds only degree symbol on specified axis.
Did not change time-system when only \textbf{TIME\_UNIT} was specified.  Failed to properly parse a single PAR=ARG
(one word) argument given  to \GMTprog{gmtset}.
\item [\GMTprog{gmt\_io.c}]: Did not terminate a calendar string after copying it.
\item [\GMTprog{gmt\_plot.c}]: The logic to check for seconds annotations failed if inc $<$1 arc second.
Did not set the contour annotation font before writing labels.
\item [\GMTprog{gmt\_support.c}]: Parsing old-style pens did not set offset to 0 when no texture was given.
Fixed IFACT size in the old Brenner FORTRAN FFT -- bug undetected since GMT 1!
Contouring of grids with NaNs need to check both vertical AND horizontal interior gridcell boundaries
for possible crossings.  The label machinery for ddd:mm:ss.xx used the wrong parameter to check
for fractional seconds annotation (the .xxx part).
\item [\GMTprog{gmt\_time\_systems.h}]: J2000 epoch was 1.0 Jan 2000, instead of 1.5 Jan 2000.
\item [\GMTprog{filter1d}]: The \Opt{T} option can now parse datestrings for the min/max fields.
\item [\GMTprog{gmtmath}]: Fixed memory allocation bug for files with more than BUFSIZ records.
Now works correctly with multisegment headers.  Multisegment headers now written to the output file
and not always to stdout. Option \Opt{C} now works (used to deselect all columns).
Fixed \textbf{LSQFIT} (used wrong columns when some were skipped).
\item [\GMTprog{grdcontour}]: Interior contours were not smoothed unless NaNs were involved.  Also the
labeling of closed highs/lows were insensitive to pixel versus gridline grids and could get the wrong result.
\Opt{C} need to check for``.cpt'' at END of file name.  Fixed contour label angle specifications were always ignored.
\item [\GMTprog{grdfft}]: \Opt{D} and \Opt{I} options could have junk in the parameter arrays if given more than once.
\item [\GMTprog{grdimage}]: \Opt{JX} with a negative scale/length and \Opt{E}\emph{dpi} failed to flip the image.
\item [\GMTprog{grdinfo}]: Would not take both \Opt{L}1 and \Opt{L}2.
\item [\GMTprog{grdview}]: Plot no mesh when \Opt{T} is used.
\item [\GMTprog{mapproject}]: \Opt{L} option did not allocate enough output memory for extra columns.
\item [\GMTprog{pscoast}]: Did not list \Opt{Z} in synopsis/usage.
\item [\GMTprog{pscontour}]: For 3-D views, \Opt{E} projected contours (\Opt{W}) twice and mesh lines (\Opt{L}) not at all.
Fixed contour label angles were always ignored.
\item [\GMTprog{pslib.c}]: Only issue setdash \PS\ commands if texture has changed.  \GMTfunc{ps\_clipoff} needed to
reset memory of last pen width/color/pattern.  \GMTfunc{ps\_color\_tiles} used wrong node registration.
\item [\GMTprog{psrose}]: Failed to skip pie-slice filling when no fill was selected.  \Opt{C} lead to
SEGV as it tried to read from a non-existent file.
\item [\GMTprog{psxy}]: When used with \Opt{S} but no \Opt{W} or \Opt{G} given, only set default \Opt{W} if \Opt{M} not used.
Erroneously turned symbol outlines on if just \Opt{C} was given.  Incorrectly suggested that \Opt{Svs} needs 5 instead of 4 columns.
\Opt{Sf} option was parsed to require 3 instead of 2 coordinates.
\item [\GMTprog{psxyz}]: \Opt{Svs} could fail to plot by confusing y-coordinate and y-size.
Also need 6 rather than 5 input columns.  Bar width has only half of what was requested
\item [\GMTprog{splitxyz}]: Reported headings in radians instead of degrees.
\item [\GMTprog{trend2d}]: Failed to pass the new variable with column choices.
Also did not accept { \bf z} as an output choice.
\end{description}
A few bug-fixes applies to the supplements as well:
\begin{description}
\item [\GMTprog{gshhs.c}]: Had \&\& instead of \& in bit-arithmetic that reported level.
\item [\GMTprog{mgd77manage}]: Failed to enforce that a new column abbreviation must be in lower case.
\item [\GMTprog{x2sys\_cross}]: Failed to check for crossovers falling exacly on data nodes.
\end{description}

%-----------------------------------------
\subsection{Overview of \gmt\ 4.1.4 [Nov-1, 2006]}

Changes in \GMT\ 4.1.4 are again relatively minor and predominantly bug fixes.  One imporant
new feature is that \GMT\ can now automatically recognize the format of the grid file given
to a program.  The use of the ``=id'' mechanism is now only needed when writing an output file in
a grid format other than the netCDF default or when reading using custom scaline and translation
is required.  We have also added
a new user directory pointed to by \textbf{GMT\_USERDIR} (default directory is \filename{$\sim$/.gmt})
where items such as \filename{.gmtdefaults4} will be looked for.  Additionally, a few enhancements
have been made to overcome limitations in the previous versions:

\begin{enumerate}
\item \GMTprog{grd2cpt} has a new option \Opt{T} for the creation of tables symmetric about zero.
\item \GMTprog{grdblend} will accept negative weights which are taken to mean that the sense of tapering should be reversed.
\item \GMTprog{grdedit} has a new option \Opt{E} to transpose the entire grid.
\item \GMTprog{grdmath} has a new option \Opt{N} to turn off strict domain match checking when multiple grid files are involved.
\item \GMTprog{grdreformat} now supports the \Opt{f} option.
\item \GMTprog{nearneighbor} will now optionally accept a \emph{min\_sectors} argument appended to the \Opt{N} option.
\item \GMTprog{pshistogram}'s option \Opt{I} can now accept a modifier \textbf{O} to output all bin data even if $y = 0$.
\item \GMTprog{psscale} will now invert the color scale if a negative length is provided, and
\Opt{I} will now work with colormaps with non-constant interval and with gaps (\Opt{L}).
\item \GMTprog{psxy} and \GMTprog{psxyz} have a new option \Opt{Sj}$|$\textbf{J} that plots a rotatable
rectangle but otherwise behaves similarly to \Opt{Se}$|$\textbf{E}.
\item \GMTprog{ps2raster} has many improvements; added EPS output; high-quality PDF output.
Also removed -dDOINTERPOLATE option which caused inversion of colour map and had no benefits.
\end{enumerate}

Below is a list of previous problems (a few accidently introduced in \gmt\ 4.1.3)
that we have identified and corrected in the current release:

\begin{description}
\item [\GMTprog{gmt\_agc.c}]: AGC grids use 0 to represent NaNs -- this was not implemented yet.
\item [\GMTprog{gmt\_calclock.c}]: Proper rounding of time when converting to dates.
\item [\GMTprog{gmt\_support.c}]: Fixed bug in \Opt{I} when modifier \textbf{=} was used.
\item [\GMTprog{gmt\_init.c}]: Fixed bug not recognizing \textbf{PAGE\_ORIENTATION} as well as a bug that
prevented proper writing of \textbf{PAGE\_ORIENTATION} in defaults.  Added a check so \GMTprog{gmtset}
will not crash if VALUE is not given.  Finally, let \textbf{GMT\_HOMEDIR} default to C: under Windows
if \textbf{HOME} is not set.
\item [\GMTprog{gmt\_io.c}]: \GMTfunc{GMT\_scanf\_argtime} now returns RELTIME (not ABSTIME) when relative time is found.
\item [\GMTprog{gmt\_grdio.c}]: Set [xy]\_units also in \GMTfunc{GMT\_update\_grd\_info}.
Fixed time-scaling bug on input (was always seconds).  Make units check case-insensitive. Check for toggled lat/lon coordinates.
\item [\GMTprog{gmt\_nc.c}]: Made sure no garbage remains under Cygwin when using \GMTfunc{strncpy}.
Check if x- and y-coordinates have constant step sizes; issue warning if not.
\item [\GMTprog{gmt\_plot.c}]: Bugs related to annotations with \Opt{JPa} and its \textbf{z} modifier fixed.
Log gridlines did not work for 3-D view.  3-D axis label would sometimes get misplaced due to round-off.
3-D map scale did not project correctly.  Duplicate title could appear if \Opt{JX} was used and one axis was geographic (d).
Needed to add secondary font to list to be encoded.
\item [\GMTprog{pslib.c}]: Fixed memory management in LZW compression (memory leak).  Improved EPS conformance.
\item [\GMTprog{filter1d}]: Robust option used extreme rather than median to determine the outliers.
\item [\GMTprog{gmtconvert}]: Did not have \Opt{L} listed in synopsis.
\item [\GMTprog{grdblend}]: Now skip grids that are entirely outside the region of interest.
\item [\GMTprog{grdcontour}]: Crashed if \Opt{M} and \Opt{D} were used with no file name specified.
The \Opt{W}[+][c$|$a] option was susceptible to misinterpreting things like \Opt{W}cyan as contour pen with color yan.
\item [\GMTprog{grdcut}]: Require geographical instead of global in order to shift by 360 degrees.
\item [\GMTprog{grdfilter}]: Should not wrap over pole unless grid extends all the way to the pole.
\item [\GMTprog{grdinfo}]: When \Opt{C} was used there was no linefeed at the end.
\item [\GMTprog{grdsample}]: \Opt{T} did not ignore \Opt{R} (as per manual), resulting in changed cell size.
\Opt{F} did not use gridline node registration as default, rather that of the input grid.
When using pixel node registration, number of cells would be one too large.
\Opt{L} worked only in very limited case: going from x=[-180;180] to x=[0;360].
Now supports any periodicity in X and Y (as per manual). \Opt{F} again forces pixel node registration.
Default is same as input.  More consistency with manual.
\item [\GMTprog{grdtrack}]: The \Opt{Z} option failed to be set for some input configurations.
\item [\GMTprog{grdvector}]: Added \Opt{f} option.
\item [\GMTprog{grdview}]: The \Opt{W}[c$|$m] option was susceptible to misinterpreting things like \Opt{W}cyan as contour pen with color yan.
\item [\GMTprog{grdvolume}]: Three bugs squashed: gridcell oriented grids now get proper area and volume,
including edges; only one cell per NaN is excluded; when \Opt{C} and \Opt{L} are combined,
the volume is properly corrected for the baseline height.
\item [\GMTprog{pscoast}]: \Opt{N} and \Opt{I} reset pens to default settings after initially changing them.
Did not change output mode to binary (Windows only) if \Opt{M} and \Opt{b} were set.
Both \Opt{Gc} and \Opt{Sc} needed to check that no letter is following the \textbf{c} modifier.
\item [\GMTprog{pscontour}]: The \Opt{D} dump option wrote projected instead of original coordinates.
\item [\GMTprog{psimage}]: \Opt{G}\emph{colorname} (e.g., \Opt{G}black) will now be interpreted as foreground color, e.g. \Opt{Gf}black.
\item [\GMTprog{pslegend}]: Did not replace octagons with polygon form when pattern was requested.
Did not consider if absolute coordinates were given in \Opt{X} and \Opt{Y}. Passed the wrong character code
when \textbf{M} was chosen with a plain scale modifier.
\item [\GMTprog{psscale}]: A vertical bar with a label placed along it was mis-justified.
\item [\GMTprog{pstext}]: Default for \Opt{G} is now \textbf{BASEMAP\_FRAME\_RGB} as for other map annotations.
The box option \Opt{W}[\emph{fill}][o$|$O$|$c$|$C][\emph{pen}]] is now \Opt{W}[\emph{fill},][o$|$O$|$c$|$C][\emph{pen}]], \emph{i.e.}, we now use
a comma to separate the fill and pen (done since fill may be a name containing o$|$c); parsing is backwards compatible.
\item [\GMTprog{psxyz}]: \Opt{C} for symbols did not pick up color fill.
\item [\GMTprog{trend2d}]: Processing of \Opt{F} happened after checking.
\item [\GMTprog{xyz2grd}]: Had \Opt{Az} as default rather than no \Opt{A}.  Fixed bad header parsing when \Opt{E} was selected.
\end{description}
A few bug-fixes applies to the supplements as well:
\begin{description}
\item [\GMTprog{grdraster}]: Only do 360-degree wrapping if working on a geographic grid.
\item [\GMTprog{mgd77list}]: Did not process time when \Opt{Am}2$|$4 was set and time was not requested as output.
Also, did not process time when \Opt{Am}2$|$4 was set and time was not requested as output.
\item [\GMTprog{x2sys.c}]: Did not look in current dir for *.def files.
\end{description}

%-----------------------------------------
\subsection{Overview of \gmt\ 4.1.3 [June-1, 2006]}

Changes in \GMT\ 4.1.3 are relatively minor and predominantly bug fixes.  However, a few enhancements
have been made to overcome limitations in the previous versions:

\begin{enumerate}
\item Added the Hughes 1980 ellipsoid for projection support for DMSP SSM/I grid products.
\item \GMTprog{grdfft} has an extended \Opt{F} option to allow for either Gaussian- or
cosine-tapered filtering.
\item \GMTprog{psscale} now has a \Opt{Q} option so that logarithmic color scales and annotations
can be handled properly.
\item \GMTprog{makecpt} and \GMTprog{grd2cpt} have a new \Opt{M} option to allow the background, foreground, and
NaN-colors to be assigned using the \GMT\ defaults instead of the settings in the master CPT file. 
\item \GMTprog{mgd77list} in the \progname{mgd77} supplement has new option \Opt{Q} to specify limits on
speed and azimuths for output records.
\end{enumerate}

Below is a list of previous problems (some accidentily introduced in \gmt\ 4.1.2)
that we have identified and corrected in the current release:

\begin{description}
\item [\GMTprog{gmt\_grdio.c}]: Bug in \GMTfunc{GMT\_grd\_shift} for gridline-registered grids; this function is used in
\GMTprog{grdedit} to rotate grids of 360-degree longitudinal extent. Also added better testing for subsets of global (0-360) grids.
\item [\GMTprog{gmt\_init.c}]: \GMTfunc{GMT\_PS\_init} was called after --PAR=val had been decoded, resetting
the \PS-related parameters to their default settings.
\item [\GMTprog{gmt\_support.c}]: \GMTfunc{GMT\_set\_xy\_domain} padded region for pixel instead of gridline node registration,
which could cause SEGV in \GMTprog{xyz2grd} if (\emph{x,y}) was less than half the grid-spacing outside region.
\item [\GMTprog{blockmean}]: The \Opt{C} option got reversed in 4.1.2 - now fixed.
\item [\GMTprog{blockmedian}]: The \Opt{C} option got reversed in 4.1.2 - now fixed.
\item [\GMTprog{grdcontour}]: The \Opt{C} option with a non-cpt file failed to read due to lack of proper if-test.
\item [\GMTprog{grdedit}]: The \Opt{S} option was backwards and tested \emph{w-e}=360; should be \emph{e-w}=360.
\item [\GMTprog{grdimage}]: Fixed bug introduced by \GMTfunc{GMT\_get\_inc} in 4.1.2. Internal projected
grid never took node\_offset from input grid.
\item [\GMTprog{grdmask}]: Polygons with zig-zag shape would sometimes cause a node exactly
on a polygon vertex to be considered inside. Radius was reset to 0 after \Opt{S}\emph{radius} was assigned.
\item [\GMTprog{grdvector}]: The \Opt{A} option was not properly initiated.
\item [\GMTprog{psbasemap}]: The \Opt{L} option did not properly parse the optional :label:<just> part.
\item [\GMTprog{pslegend}]: If the \textbf{M} (for map scale) was used, the \Opt{R} and \Opt{J} options would be reset.
Also prevented the undoing of \Opt{X} and \Opt{Y} at the end of the program.
\end{description}

%-----------------------------------------

\subsection{Overview of \gmt\ 4.1.2 [May-15, 2006]}

On the surface, changes in \GMT\ 4.1.2 are relatively minor.  Most of the work has involved
realignment of code and parsing of arguments to simplify the upcoming port to \GMT\ 5;
a brief listing of more visible changes include

\begin{enumerate}
\item Coastline files have been updated to use GSHHS version 1.4 which fixes minor inconsistencies
in the coastline database.
\item All coastline files are now stored in a new subdirectory \filename{coast} under the
\filename{share} directory, and the tar archives for coastlines now have their own version numbers
as they do not change as frequently as the source code.  Current coastline version number is 4.1.
\item The archives have been reorganized so that \filename{GMT\_share.*} contains all files needed
at runtime whereas the standard coastline files are in the new \filename{GMT\_coast.*} archive.
The \filename{GMT\_progs.*} archive has been renamed \filename{GMT\_src.*}.
\item CPT files can now have \emph{z}-values that are date-time strings.
\item Optionally append \textbf{z} to the \Opt{Jp} projection to annotate depths (\emph{i.e.}, ``north-y'') rather than radius.
\item Two new tools added to the \progname{misc} supplement for digitizing lines (\GMTprog{gmtdigitize}) and
to stitch digitized lines into continuous lines or polygons (\GMTprog{gmtstitch}).
\item Extended \Opt{M} option to take optional modifiers \textbf{i} or \textbf{o} for input or output.
\item Added support for custom grd format AGC from Atlantic Geoscience Center, assigned the code \textbf{af} [21].
\end{enumerate}

A few programs or options have received minor updates and new features, such as

\begin{description}
\item [\GMTprog{blockmean}]: Added \Opt{E} for reporting standard deviation, min, and max values per block.
\item [\GMTprog{blockmedian}]: Added \Opt{E} for reporting L1 scale, min, and max values per block.
Also added \Opt{T} to specify a particular quartile [Default \emph{q} = 0.5 = median].
\item [\GMTprog{blockmode}]: Added \Opt{E} for reporting LMS scale, min, and max values per block.
\item [\progname{configure}]: Added explicit options to bypass the installation of supplements
that require Matlab (--disable-mex) and X11 (--disable-xgrid).
\item [\GMTprog{gmtconvert}]: Added \Opt{D} option to write segments to individual output files.
\item [\GMTprog{gmtdefaults}]: Support for new default \textbf{PS\_VERBOSE} which controls the
writing of comments to \PS\ files.  \textbf{COLOR\_MODEL} can now accept a prefix ``+'' which
forces color interpolation in the selected system (RGB or HSV only).  Default remains RGB.
\textbf{PS\_COLOR} has been extended to accept HSV as well (only applies to
polygon, symbol, pen, and text colors, not images.).  New parameter \textbf{POLAR\_CAP} which
controls the number of gridlines that converge on the poles for azimuthal and some other projections.
Added new default \textbf{HISTORY} [TRUE] which controls whether or not we maintain a common command option
history via .gmtcommands4 files.
\item [\GMTprog{gmtmath}]: Added option \Opt{M} to indicate the program can now handle multisegment files.
Added \textbf{CPOISS} for cumulative Poisson distribution.
\item [\GMTprog{grdmath}]: Added \textbf{CPOISS} for cumulative Poisson distribution.
\item [\GMTprog{minmax}]: \Opt{D} made obsolete by improved range checking for longitudes (but available for
backwards compatibility).
\item [\GMTprog{psscale}]: Enhanced \Opt{I} option for asymmetrical intensity ranges from \emph{low} to \emph{high}.
\item [\GMTprog{psxy}]: Added \Opt{SW} for wedges defined by azimuths rather than directions.  Polygons of large
longitudinal extent now clip correctly.
\item [\GMTprog{splitxyz}]: New option \Opt{Q} to specify the output columns and their order.
\end{description}

Below is a list of previous problems
that we have identified and corrected in the current release:

\begin{description}
\item [\GMTprog{gmt\_plot.c}]: The 3-D perspective plotting of text was not scaled correctly.
\item [\GMTprog{gmt\_support.c}]: Parsing of \Opt{L} option used in \GMTprogi{psbasemap} and \GMTprogi{pscoast}
failed to get correct unit when ddd:mm:ss syntax was used for the position. Corner boundary conditions for grids (needed
by \GMTprog{grdtrack}, \GMTprog{grdsample}, \GMTprog{grdview}, and \GMTprog{grdgradient}) had the wrong sign.
\item [\GMTprog{gmt2rgb}]: Did not check name template properly, and did not initialize region.
\item [\GMTprog{gmtselect}]: Option \Opt{F} insisted on using spherical testing for Cartesian \emph{x,y} data.
\item [\GMTprog{grd2xyz}]: The \Opt{E} option had the \emph{y}-direction reversed.
\item [\GMTprog{grdfilter}]: Needed the \Opt{f} option to process \Opt{R}ddd:mm syntax.
\item [\GMTprog{grdimage}]: Would hang in \emph{stdin} if \Opt{C} not given when one grid is plotted.
\item [\GMTprog{grdmask}]: Did not explicitly close polygons before using them.  Test for polar caps applied to the opposite pole.
\item [\GMTprog{grdmath}]: Command \textbf{INSIDE} for Cartesian data had bug (passed \emph{y} where \emph{x} was expected).
\item [\GMTprog{grdsample}]: Failed when \Opt{I} was specified.
\item [\GMTprog{grdview}]: Bug in plotting north facade (\Opt{N}).  Also tried to free unallocated memory if \Opt{G} was used.
\item [\GMTprog{project}]: Cartesian projections gave incorrect results for \emph{p,w,r,s}.
Removed 0--360 restriction on azimuth.  Option \Opt{G} was susceptible to round-off and thus
sometimes reissued the final point.
\item [\GMTprog{psxy}]: \Opt{SV} and \Opt{SE} for \Opt{JX} did not convert azimuths to directions.
The \Opt{Sq} option would get confused when distances between successive labels were smaller than the line's point spacing.
\item [\GMTprog{mgd77/mgd77manage}]: Did not properly close the file after ingesting E77 information.
\item [\GMTprog{pslib.c}]: \GMTfunc{ps\_load\_raster} did not use open mode \textbf{rb} and hence failed under Windows.
\item [\GMTprog{xyz2grd}]: The \Opt{E} option had the \emph{y}-direction reversed.
\end{description}
A few bug-fixes applies to the supplements as well:
\begin{description}
\item [\GMTprog{x2sys\_get}]: \Opt{N} did not work properly (now fixed and tested).
\end{description}

%-----------------------------------------

\subsection{Overview of \gmt\ 4.1.1 [Mar-1, 2006]}

Changes in \GMT\ 4.1.1 are mostly minor; a brief listing include

\begin{enumerate}
\item \GMTprog{gmt\_nc.c}: Introduced handling of 4-D COARDS compliant grids (See Chapter 4 for details).
\item \GMTprog{mgd77/mngd77sniffer}: New tool for along-track quality control checking of MGD77 files.
\item \GMTprog{spotter/grdrotater}: New tool that rotates grids given a specified finite rotation.
\item Jonathan Shewchuk's triangulation routines are now stored with the rest of the source in the GMT\_progs.tar$|$zip archives.
(However, because his copyright is not GPL, installing it is still an option).
\end{enumerate}

A few programs or options have received minor updates and new features, such as

\begin{description}
\item [\GMTprog{grdedit}]: Added option \Opt{T} to toggle between gridline and pixel node registrations (header only).
\item [\GMTprog{grdgradient}]: Implemented variation on Lambertian illumination.
\item [\GMTprog{grdmask}]: Now takes \Opt{S}\emph{radius}[\textbf{c$|$m$|$k$|$K}] as is done in \GMTprog{nearneighbor}.
\item [\GMTprog{gmtmath}]: If file is STDIN we read data from \emph{stdin} and put the contents on the stack.
Also added \Opt{F} to select which columns to use for output [all].
\item [\GMTprog{grdtrack}]: Can now sample Sandwell/Smith IMG grids directly.
\item [\GMTprog{psmask}]: -Now takes \Opt{S}\emph{radius}[\textbf{c$|$m$|$k$|$K}] as is done in \GMTprog{nearneighbor}.
Can now plot tiles regardless of projection and use patterns.
\item [\GMTprog{pstext}]: \Opt{D}[...]\textbf{v}\emph{pen} can now be used with or without \Opt{M}.
\item [\GMTprog{psxyz}]: \Opt{S}\textbf{O}$|$\textbf{U} imitate \Opt{S}\textbf{o}$|$\textbf{u} but without the 3-D color shading.
\item [\GMTprog{mgd77.c}]: Added mechanism to search directories for files (\emph{mgd77} supplement).
\item [\GMTprog{mgd77list}]: Activated \Opt{X} option and associated machinery for applying data corrections
(\emph{mgd77} supplement).
\end{description}

Inevitably, when new features are added, new bugs come along with them.  Below is a list of problems
that we have identified and corrected in the current release:.

\begin{description}
\item [\progname{configure.in}]: Extracting VERSION from \GMTprog{gmt\_version.h}, not \GMTprog{gmt.h}.
\item [\GMTprog{gmt\_init.c}]: BASEMAP\_FRAME\_RGB overrode any changes to grid pens etc.  Now only
does so if prefixed by '+'.
\item [\GMTprog{gmt\_calclock.c}]: Did not allow \Opt{B}0 for time-axis.
\item [\GMTprog{gmt\_map.c}]: \Opt{JX}...\textbf{d} now plots with WESN or degrees:minutes as per PLOT\_DEGREE\_FORMAT.
Map clip paths for \Opt{JE}\emph{lon}/\PM 90 were no good.  Under certain circumstances, \GMTfunc{GMT\_non\_zero\_winding} might be passed
a polygon that was not closed, resulting in an error.  \Opt{JQ} would give garbage if central lon was way outside \Opt{R}.
\item [\GMTprog{gmt\_plot.c}]: \Opt{JX}...\textbf{d} now plots with WESN or degrees:minutes as per PLOT\_DEGREE\_FORMAT.
\item [\GMTprog{gmt\_grdio.c}]: Changed logic to avoid false ``scale==0'' warning on Windows.
\GMTfunc{GMT\_open\_grd} (used in \GMTprog{grdblend}) reset scale to NaN.
Initialize header information at start of \GMTfunc{GMT\_read\_grd\_info}.
\item [\GMTprog{gmt\_support.c}]: Initialize [xyz]\_unit with more appropriate values.
Got wrong conversion for dx in meters to degrees.
\item [\GMTprog{gmt\_grd.h}]: Improved definition of \GMTfunc{GMT\_x\_to\_i} macro should reduce bugs
\item [\GMTprog{pslib.c}]: \GMTfunc{ps\_polygon}: if outline == -9 just fill and no clip.
Fixed two bugs concerning the /MaskColor operator.
\item [\GMTprog{ISO-8859-9.ps}]: Added /dotlessi per Onur Tan.
\item [\GMTprog{blockm*}]: Now correctly deals with periodic longitude data.
\item [\GMTprog{grdcontour}]: Fixed several issues at grid limits and inappropriate scaling of grid dimensions..
\item [\GMTprog{grdfilter}]: Used -1 as index flag instead of INT\_MIN.
\item [\GMTprog{grdimage}]: Fixed several issues at grid limits and inappropriate scaling of grid dimensions.
\item [\GMTprog{grdmask}]: Only let you change the value for outside nodes.
\item [\GMTprog{grdmath.man}]: Did not list \Opt{f} option.  Operators \textbf{LT, LE, EQ, GE, GT} returned TRUE if NaNs were involved
Now NaN is returned if any of the two operands is a NaN.
\item [\GMTprog{grdreformat}]: Update grd.command before writing grid
\item [\GMTprog{grdvector}]: Did not place vectors correctly for pixel-pregistered grids.
\item [\GMTprog{grdview}]: Skipped nodes outside boundary but they might be needed to draw a tile.
\item [\GMTprog{pscoast}]: With \Opt{JE} and \Opt{G}\emph{r/g/b}, the painting of the antipodal bin would incorrectly
turn off clipping, messing up the rest of the plot.  Now pass -9 to \GMTfunc{GMT\_fill} which means just fill and no end of clipping.
\item [\GMTprog{xyz2grd}]: For geographic grids with 360\DS\ range and gridline node registration,
the west and east bin did not get replicated properly.
Now considers data inside the first and last tiles which might stick outside w/e/s/n.
\end{description}
A few bug-fixes applies to the supplements as well:
\begin{description}
\item [\GMTprog{x2sys\_cross}]: Several problems fixed.
\end{description}

\subsection{Overview of \gmt\ 4.1 [Jan-7, 2006]}

Most changes in \GMT\ 4.1 are improvements ``under the hood''.  The most significant of these are

\begin{enumerate}
\item Addition of ability to both read and write netCDF files that are COARDS compliant.  This means
that \GMT, for the first time, is able to read netCDF files created by applications other than itself,
and that other applications capable of reading COARDS-compliant netCDF grids can directly import data
from \GMT.  We have added the new parameter \textbf{GRID\_FORMAT} to the  \GMT\ defaults with ``nf'' as default.
Users who, against our recommendation, prefer to maintain the old non-COARDS compliant format as their
default grid format can instead select ``cf''. Support for extracting 2-D slices from 3-D netCDF grids has
also been added.
\item An overhaul of how the \textbf{pslib} library encodes \PS\ images, resulting in vastly smaller files when
certain conditions are met, and general shrinking overall by enabling RLE or LZW compression.  We
have also added hooks for setting three new \PS\ parameters via \GMTprog{gmtdefaults} settings:
\textbf{PS\_LINE\_CAP}, \textbf{PS\_LINE\_JOIN}, and \textbf{PS\_MITER\_LIMIT}. See \GMTprog{gmtdefaults} for details.
\item Improved alignment of strings ending in ``1'' in the \PS\ output.
\item Adjustments to how native \GMT\ grid headers are read and written in order to be fully 64-bit safe.
\GMT\ now runs in full 64-bit mode on platforms that supports it (e.g., Mac OS X G5).
\item Making \GMT\ tread-safe by replacing \emph{strtok} with our own \emph{GMT\_strtok} function.
\item Implemented full inverse Winkel map projection based on a new algorithm by Ipbuker, 2002,
\emph{Cartography \& Geographical Information Science, 29}, 37-42.
\item Extended the options that is used to specify grid spacing (usually \Opt{I}\emph{xinc/yinc}) to allow for
specifying \emph{nx/ny} instead (by appending +).  Also, append ! to adjust the range so it fits exactly the
given increment [by default the range is kept fixed and sloppy increments are adjusted accordingly].
Append \textbf{e}$|$\textbf{k}$|$\textbf{i}$|$\textbf{n} for increments in meter, km, miles
or nautical miles, respectively.  These increments are converted to degrees
longitude (at the middle latitude) and degrees latitude.
\item The polar $r, \theta$ projection \Opt{Jp} now takes an optional suffix \textbf{r} that reverses the
radial coordinates (useful when $r$ is elevation as used by sky plots.)
\item The \progname{misc} supplement has two new items: \GMTprog{ps2raster} uses \progname{ghostscript} to
fascilitate the rasterization of \PS\ files, while \GMTprog{nc2xy} allows extraction of data columns from
COARDS-compliant netCDF files.
\item The \progname{mgd77} supplement has two new items: \GMTprog{mgd77convert} translates between different
MGD77 formats (including a new netCDF-based format), while \GMTprog{mgd77manage} assists in the management
of trackline data sets.
\item We now have improved PDF layout and navigation (thanks to Misha Tchernychev).
\item The HTML versions of all manual pages are now generated with \progname{groff}, and has active links
for \GMT\ Default parameters as they are references in the documentation.
\end{enumerate}

Many programs or options have received minor updates and new features, such as

\begin{description}
\item [\Opt{b}]: Ability to specify byte-swapping for native binary input and output tables by using upper
case \textbf{S}$|$\textbf{D}.  This is useful if you have binary tables created on a little-endian machine (e.g.,
Linux PC) and need to read them on a big-endian machine (e.g., most RISC-chip machines from Sun, HP, Apple).
\item [\GMTprog{filter1d}]: Allow NaNs in all but the ``independent data'' column.
\item [\GMTprog{grdcontour}]: Label option \textbf{+ap}[\textbf{u}$|$\textbf{d}] for always having labels be readable up or down hills.
\item [\GMTprog{gmtconvert}]: New \Opt{N} option suppresses output records when all fields are NaNs.
\item [\GMTprog{gmtmath}]: Added \textbf{TN} function
for evaluating Chebyshev polynomials; new constant \textbf{Tn} was added to easily select normalized \textbf{T}
(gives coordinates from -1 to + 1 suitable for evaluating Legendre and Chebyshev polynomials).
Finally, we added \textbf{CORRCOEFF} for calculation of correlation coefficients, and \Opt{I} to reverse
the output by printing the last row first.
\item [\GMTprog{grd2cpt}]: New option \Opt{D} sets the back- and foreground colors to the colors at the limits of the cpt file.
\item [\GMTprog{grd2xyz}]: Added \Opt{E} for ESRI interchange ASCII grid dump.
\item [\GMTprog{grdfilter}]: Geographic boundary conditions are now in effect if \Opt{D4} is selected.
\item [\GMTprog{grdgradient}]: Added option \Opt{E} for Lambertian or Peuckeer illumination.
\item [\GMTprog{grdmath}]: Allow \Opt{bi} to be used with input files for commands \textbf{PDIST}, \textbf{LDIST},
and \textbf{INSIDE}.  When spherical calculations are selected we now use the \textbf{ELLIPSOID} setting to
determine if distance calculations should be along geodesics or great circles.  Also added \textbf{TN} function
for evaluating Chebyshev polynomials; new constants \textbf{Xn} and \textbf{Yn} was added to easily select
normalized \textbf{X} and \textbf{Y}.  Finally, we added \textbf{CORRCOEFF} for calculation of correlation coefficients.
\item [\GMTprog{grdraster}]: Optionally select a data set by giving a text pattern instead of data ID number.
This makes it easier to specify a certain data set (\emph{i.e.}, ``ETOPO2'') than having to remember its arbitrary numerical
ID.  Also, native grids with \GMT\ headers can also be placed in the database by appending \textbf{H}\emph{nbytes} to the
corresponding \filename{grdraster.info} entry, where \emph{nbytes} is the size of the header that should be skipped
(use 892 for GMT headers).
\item [\GMTprog{makecpt}]: New option \Opt{D} sets the back- and foreground colors to the colors at the limits of the cpt file.
\item [\GMTprog{mapproject}]: \Opt{L} now outputs both the minimum distance and the coordinates
of the nearest point on the line.
\item [\GMTprog{pscoast}]: Added \Opt{Z} for 3-D map z-level (as in \GMTprog{psbasemap} and others).
\item [\GMTprog{pshistogram}]: New option \Opt{T}\emph{col} lets user select any column to be used, starting
with 0 (first).  The old \Opt{2} option is retired (but remains accessible for backwards compatibility).  
\item [\GMTprog{psimage}]: Now support inclusion of EPS images.
\item [\GMTprog{pslegend}]: Added layout option \textbf{B} for inserting color bars via \GMTprog{psscale}.
\item [\GMTprog{psscale}]: Now supports an optional \textbf{;}\emph{label} at end of each line in cpt files.
If present this label will replace the default annotations when option \Opt{L} is used.
\item [\GMTprog{psxyz}]: Added \Opt{Q} to disable sorting of points based on distance.
\item [\GMTprog{sample1d}]: Allow NaNs in all but the ``independent data'' column.
\item [\GMTprog{xyz2grd}]: Added \Opt{E} for ESRI interchange ASCII grid digest.
\end{description}

Inevitably, when new features are added, new bugs come along with them.  Below is a list of problems
that we have identified and corrected in the current release:

\begin{description}
\item [\progname{install\_gmt}]: No longer test netcdf installation since that can fail even when install was
successful [e.g., under Mac OS X Tiger].
\item [\GMTprog{gmt.h}]: \GMTfunc{GMT\_swab4} used {\tt unsigned long} instead of {\tt unsigned int} which could cause
64-bit problems.
\item [\GMTprog{gmt\_time\_system.h}]: Fixed MJD offsets by subtracting 10 days.
\item [\GMTprog{gmt\_calclock.c}]: time to hr,min,sec was vulnerable to round-off when optimized.  Also, \emph{hh:mm} data
(without trailing \emph{:ss}) would loose the minutes (\emph{hh:mm:ss} was OK).
\item [\GMTprog{gmt\_grdio.c}]: Bug in scale/offset for \GMTprog{grdblend}'s row-by-row i/o.
\item [\GMTprog{gmt\_init.c}]: Would eat number with leading plus sign without checking if it actually was
a +\filename{gmtdefaults} file instruction; thus \GMTprog{gmtmath} could not see numbers such as +13.5.
Command line argument --\textbf{BASEMAP\_FRAME\_RGB}=\emph{color} was not passed through to tick-, grid- and
annotation-properties.  \GMTfunc{GMT\_end} now frees memory used for hashing.  Did not use custom ellipsoid to set
DEG2M parameter so we got large errors for planets with significantly different radii.
\item [\GMTprog{gmt\_io.c}]: Bug in reading \emph{yyyy}[/]\emph{jjj} data fixed.  \GMTfunc{GMT\_lines\_init}
had trouble if 2000 segments had no data at all.  It also allocated 2000 points for each segment but never
deallocated the unused portions, thus running up memory fast.  \GMTfunc{GMT\_write\_segmentheader} wrote nothing
if input was binary and output is ASCII.  Fixed a few memory leaks.
\item [\GMTprog{gmt\_map.c}]: Azimuth to angle calculation for linear projections now properly handle different
scales in x and y. The calculation was also vulnerable to bad wrap-around, giving strange directions for
vectors in \GMTprog{psxy}. Geodesic distance calculation could get wrong quadrant.  
\item [\GMTprog{gmt\_plot.c}]: 360\DS\ polar basemaps could lack outline.  Direction for map roses were inaccurate.
Circle and $\theta$-$r$ boundaries did not allocate enough memory for arrays.  Would plot both -180 and +180 annotations
for periodic maps.
\item [\GMTprog{gmt\_shore.c}]: Must explicitly close polygons since inside/outside test in other programs expects it.
\item [\GMTprog{gmt\_support.c}]: Trouble extracting subregions of grid with \emph{east} = 0.  Cartesian \textbf{LDIST} failed
when mininum distance was requested (only done via \GMTprog{grdmath}).  Color names got truncated to 16 characters.
Improved workings of \GMTfunc{GMT\_sample\_cpt} in support of \GMTprog{makecpt}.  Fixed more memory leaks.
Bad LF/CR removal for \filename{coastline.conf} dir.
\item [\GMTprog{filter1d}]: \Opt{Ff} with even number of coefficients sometimes skip a coefficient.
\item [\GMTprog{gmtconvert}]: Missed first multisegment output header if input file was ASCII.
\item [\GMTprog{gmtmath}]: No longer have to say \Opt{Ca} if there is only one input column.  Did not understand
\emph{date}\textbf{T}\emph{clock} as command line data.
\item [\GMTprog{gmtselect}]: If \Opt{M} is on and a portion of a segment is skipped, we must
reissue the multisegment header when segment resumes.  Now handles both Cartesian
and spherical polygons correctly.
\item [\GMTprog{grd2xyz}]: Sloppy \Opt{R} resulted in bad x,y values and sometimes allocation error.
\item [\GMTprog{grdfilter}]: Convolution filters now use correct area normalization.
\item [\GMTprog{grdgradient}]: If \Opt{M} is used with grids that include poles, ignore the poles
when normalizing the slopes.
\item [\GMTprog{grdimage}]: Cannot use \Opt{R} to extract subset when \Opt{J} is oblique.  Reverse log-axes did not work.
\item [\GMTprog{grdmask}]: Now handles both Cartesian and spherical correctly.
\item [\GMTprog{grdmath}]: Wrong sign in \textbf{D2DY2}, and bogus value at \emph{y = ymin}.  Now handles both Cartesian
and spherical polygons correctly.  Constants given on command line can now be absolute time, geographic coordinates, or
regular floating-point numbers.
\item [\GMTprog{grdtrack}]: Would fail to skip first two columns for ASCII input if dd:mm:ss format was used.
\item [\GMTprog{grdview}]: Cannot use \Opt{R} to extract subset when \Opt{J} is oblique.
\item [\GMTprog{grdvolume}]: \Opt{C}\emph{low/high/delta} did not check for \emph{low} < \emph{high}, etc.
\item [\GMTprog{pscoast}]: Recursive painting could get tricked when boundaries were curved.
\item [\GMTprog{pslegend}]: Did not pass +\filename{gmtdefaults} and --\textbf{PAR}=\emph{val} onto system calls.
\item [\GMTprog{psscale}]: Vertical annotations w/custom \textbf{D\_FORMAT} were not aligned. Now uses more optimal means
to display the color bar, leading to smaller \PS\ files.  \Opt{E} did not flip sides when a negative width was used.
\item [\GMTprog{psxy}]: \Opt{Sp} is now a true point, but can also take an optional size.  Pentagon symbol had wrong
normalization scale.  If a fixed symbol size was given in \Opt{S}, with the symbol type supplied from file,
we would not scale symbols correctly if upper case symbols were given.
\item [\GMTprog{psxyz}]: Wrong index used in assigning color from cpt and in updating vector lengths.  If a fixed symbol
size was given in \Opt{S}, with the symbol type supplied from file,
we would not scale symbols correctly if upper case symbols were given
\item [\GMTprog{spectrum1d}]: Bugs in error expressions for admittance, gain, and phase have been corrected.
\item [\emph{x2sys} \& \emph{mgd77} supplements]: Made DOS-format (CR/LF) tolerant.  Both supplements are now undergoing rapid
development.
\end{description}

\subsection{Overview of \gmt\ 4.0 [Oct-10, 2004]}

\GMT\ 4 represents a major overhaul of the package, hence the major version number increment.  There are four
categories of changes that have been implemented:
\begin{description}
\item [Time-series support.]  \GMT\ can now read and write time-series data where
the time coordinates are of the form \emph{date}\textbf{T}\emph{clock}\footnote{Use standard
\UNIX\ tools such as \progname{awk} or \progname{perl} to reformat files should
your \emph{date} and \emph{clock} components reside in separate columns.}.  The formats
used for \emph{date} and \emph{clock} are under the user's control.  Both Gregorian
and ISO calendars are supported.  Frame annotation for time-series are now supported
via the \Opt{B} option; there are many new modifiers reflecting the vast number of
ways one may want to annotate time axes, including support for primary and secondary
annotation levels and the day- and month-names in numerous languages (send us the information
we need if your language is not supported).  The capability to handle time (in \Opt{R},
\Opt{J}, \Opt{B}, i/o, and plotting) required considerable changes ``under the hood'',
including the introduction of numerous new \GMTprog{gmtdefaults} parameters to make
the time series support as ``generic'' as we need it to be.
\item [New Tools.]  Three new tools have been added:
\begin{enumerate}
\item \GMTprog{gmt2rgb}: Makes red, green, and blue component grid files from an image (to be
used with new options for false color imaging or image draping by \GMTprog{grdimage} or \GMTprog{grdview}).
\item \GMTprog{grdblend}: Blends several partially over-lapping grid files into one combined grid.  Output
grid is written one row at the time so truly enormous grids can be created.
\item \GMTprog{pslegend}: Designs and plots elaborate legends on maps.
\end{enumerate}
\item [New Program Options.]  Many programs have received additional options or
features that enhances their usefulness:
\begin{itemize}
\item \GMTprog{blockmean}:	New option \Opt{Sw} will return weight sum while \Opt{Sz} returns
the data sums (\emph{i.e.}, it duplicates the previous \Opt{S} option).
\item \GMTprog{filter1d}:	New filters \Opt{Fl$|$L$|$u$|$U} that return extreme (min, max) values.
\item \GMTprog{gmtconvert}:	Added new options \Opt{F}, \Opt{A},  and \Opt{I} that simulate
\UNIX\ \progname{cut}, \progname{paste}, and \progname{tail} \Opt{r} (or \progname{tac}) capabilities.
Option \Opt{E} reports first and last point per segment only, \Opt{L} lists the segment headers only,
while \Opt{S} lists records from segments whose header matches a given text pattern.
\item \GMTprog{gmtmath}:	Added new operators for solving least squares problems (\textbf{COL, LSQFIT}),
finding function roots (\textbf{ROOTS}), and evaluating critical values (\textbf{CHICRIT, FCRIT, TCRIT, ZCRIT}).
We also added some general functions (\textbf{SINC, LOG2, LRAND}) and miscellaneous operations (\textbf{FLIPUD, NEQ}).
The \Opt{S} option may now take a modifier to select first or last record only.
\item \GMTprog{gmtselect}:	New option  \Opt{Z} to pass or skip based on input $z$-range.
\item \GMTprog{grd2cpt}:	New options  \Opt{Q} for logarithmic scales, \Opt{E} for equidistant color
intervals, \Opt{R} for selecting a grid sub-region, and \Opt{N} to suppress output of B, F, N colors\footnote{Used
to color the background, foreground, and Not-a-Number areas.}.
\item \GMTprog{grd2xyz}:	New option \Opt{W} to write a constant weight factor as a 4th output column,
and ability to process several grid files at the same time.
\item \GMTprog{grdcontour}:	Expanded the \Opt{G} option to handle 5 algorithms (4 new) for the placement
of contour labels. 
\item \GMTprog{grdedit}:	New option \Opt{N} to replace selected node values given \emph{x, y, z} data
in table form (options \Opt{H}, \Opt{b}, \Opt{f}, and \Opt{:} added for file support).
\item \GMTprog{grdfilter}:	New geospatial filters \Opt{Fl$|$L$|$u$|$U} that return extreme (min, max) values. 
\item \GMTprog{grdimage}:	New option for colormasking (\Opt{Q}; \PS\ Level 3 only), \PS\ image 
interpolation (\Opt{E}\emph{-dpi}), and false RGB color image (when given three grids), as well as a modifier to \Opt{T}
to draw tile outlines.
\item \GMTprog{grdinfo}:	New option to create argument for \GMTprog{makecpt} (\Opt{T}) and to round-off
region boundary coordinates (\Opt{I}). 
\item \GMTprog{grdmath}:	Added new operators for critical values (\textbf{CHICRIT, FCRIT, TCRIT, ZCRIT}),
geospatial analysis (\textbf{LDIST,  PDIST, INSIDE}) and for calculating azimuths (\textbf{CAS, SAZ}).  We have
also added some general functions (\textbf{SINC, LOG2, LRAND}) and a few grid operations (\textbf{FLIPLR, FLIPUD, ROTX, ROTY, NEQ,
INRANGE}).  We may now create multiple output grids from a single command.
\item \GMTprog{grdproject}: Option to supply false easting/northing or other offsets from the origin(\Opt{C}).
\item \GMTprog{grdreformat}: Option to suppress header in raw output (\Opt{N}).
\item \GMTprog{grdsample}:	Option to push the bilinear interpolation closer to nodes that are NaN (\Opt{Q}).
\item \GMTprog{grdtrack}:	Options to retrieve nearest node value (\Opt{N}, no interpolation) and to push
the bilinear interpolation closer to nodes that are NaN (\Opt{Q}).
\item \GMTprog{grdview}:	Colormasking (\Opt{Qc}, PS Level 3 only), draping of images via red, green,
and blue component grids (\Opt{G}).  Also,  drapegrids can have higher resolution than the relief grid, and we
added a modifier to \Opt{T} to draw tile outlines.
\item \GMTprog{makecpt}:	New options \Opt{Q} for logarithmic scales and \Opt{N} to suppress output
of B, F, N colors.
\item \GMTprog{mapproject}:	New options for datum conversions (\Opt{T}, \Opt{E}, and \Opt{Q}), azimuth and
back-azimuth (\Opt{A}), distance to point (\Opt{G}) and line  (\Opt{L})calculations, and optional false easting/northing (\Opt{C}).
\item \GMTprog{minmax}:		Added \Opt{T}\emph{dz} option to produce \Opt{T} string for \GMTprog{makecpt},
\Opt{E} for returning extreme records, and the \Opt{I} option was extended to handle any number of columns when \Opt{C} is used.
\item \GMTprog{psbasemap}:	Extended \Opt{L} to allow alternate label and justification, and added \Opt{T}
for directional rose ornament or magnetic compass directions.
\item \GMTprog{pscoast}:	Extended \Opt{L} to allow alternate label and justification, and added \Opt{T}
for directional rose ornament or magnetic compass directions.
\item \GMTprog{pscontour}:	Expanded the \Opt{G} option to handle 5 algorithms (4 new) for the placement
of contour labels. 
\item \GMTprog{psimage}:	\PS\ image interpolation (\Opt{W}\emph{-xlength}), and justification option
in \Opt{C}.
\item \GMTprog{psscale}:	Options to annotate on opposite side (\Opt{A}) and to plot back or foreground
triangle only (\Opt{E}[\textbf{b$|$f}] ).  Also, draw discrete color-key table with centered annotations by appending an optional
\emph{gap} to the \Opt{L} option. 
\item \GMTprog{pstext}: 	New option \Opt{A} should azimuths rather than angles be given,
\item \GMTprog{psxy}: 	Line color control (via \Opt{C}), symbol position offset (with \Opt{D}), custom symbols access 
(with \Opt{Sk}; use any of the 35 (Appendix~\ref{app:N}) that come with \GMT\ or design your own), many new symbols (horizontal and vertical dashes,
pentagon, octagon, rectangle, double-headed and centered vectors), and annotated (``quoted'') lines with \Opt{Sq}.
\item \GMTprog{psxyz}: 	Same, plus a vertical dash symbol.
\item \GMTprog{xyz2grd}: 	Added \Opt{Au$|$l} for upper/lower value at each node.
\end{itemize}
\item [General enhancements.]  These affect most of the programs:
\begin{itemize}
\item The coastline data have been updated to GSHHS version 1.3.  About 50 or so polygons had lingering
crossovers and some had duplicate points or failed to close; these have now been fixed. Major
errors in the Puget Sound coastline have also been corrected.
\item New shorthand to repeat the most recently used projection (\Opt{J}).
\item Options for phase-shifting the stride and supplying a prefix for frame annotations (\Opt{B}).
\item Override \GMT\ defaults directly on the command line with any number of {--}{--}\emph{PAR=value} options.
\item Now choose from 63 ellipsoids and 223 datums, or use your own values.
\item Numerous new \GMT\ defaults parameters, mostly in support of time-series functionality.
\item Shorthand for global regions (\Opt{Rg} for \Opt{R}0/360/-90/90 and \Opt{Rd} for \Opt{R}-180/180/-90/90).
\item Full support for either RGB, HSV, or CMYK in pen/fill command-line options or in cpt files.
\item Support for English color names (e.g., red, lightbrown).
\item Choice of unit when specifying pen thickness (cm, inch, point).
\item Easier pen specification mechanism, with predefined names for certain pen thicknesses.
\item Centering of plots on current page with \Opt{Xc}, \Opt{Yc}.
\item More control over input/output table formats (\Opt{f}, \Opt{:}[\textbf{i$|$o}]).
\item Ability to read and write NOAA/NGDC GRD98 grid format.
\item Ability to add additional fonts.
\item Custom paper media size (useful for posters and large maps).
\item All text are now justified by the \PS\ interpreter, as is the clipping of contours and ``quoted lines''
to make space for annotation labels.
\item Better support for various international character encodings.
\item New Appendices M (color tables), N (custom symbols), O (contours and ``quoted lines''), and P
(using both \GMT\ 3 and 4).
\item New hidden files \filename{.gmtdefaults4} and \filename{.gmtcommands4} to ensure peaceful coexistence with \GMT\ 3-series.
\item Data files in directories pointed to by the three environmental parameters \textbf{\$GMT\_DATADIR}, \textbf{\$GMT\_GRIDDIR},
and \textbf{\$GMT\_IMGDIR} can be specified without their full path names when used as input files.
\item We have added five new examples for a total of 25.
\item Bourne shell utility \progname{gmtswitch} simplifies switching between installed \GMT\ versions.
\end{itemize}
\end{description}

