
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>1. Introduction &#8212; GMT 5.4.6_c5d65a4_2019.11.05 documentation</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>


    <link rel="stylesheet" href="_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/searchtools.js"></script>
    <script type="text/javascript" src="_static/rtd-sidebar.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GMT_API" href="api.html" />
    <link rel="prev" title="GMT_Tutorial" href="tutorial.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="api.html" title="GMT_API"
             accesskey="N">next</a> </li>
        <li class="right" >
          <a href="tutorial.html" title="GMT_Tutorial"
             accesskey="P">previous</a> </li>
  <li><a href="/projects/gmt/wiki/Documentation">Project Home</a>  &#187;</li>
  
        <li class="nav-item nav-item-0"><a href="index.html">GMT 5.4.6_c5d65a4_2019.11.05 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="tutorial.html" accesskey="U">GMT_Tutorial</a> &#187;</li>
<li class="right">
<form class="search" accept-charset="UTF-8" action="search.html" method="get">
  <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label for="q">
    <a class="search" href="search.html" accesskey="s" original-title="">Search:</a>
  </label>
  <input accesskey="f" class="small" id="q" name="q" size="20" type="text">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form></li>
   

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p><strong>The Generic Mapping Tools</strong></p>
<p><strong>A Map-Making Tutorial</strong></p>
<p><strong>Pål (Paul) Wessel</strong></p>
<p><strong>SOEST, University of Hawai’i at Manoa</strong></p>
<p><strong>Walter H. F. Smith</strong></p>
<p><strong>Laboratory for Satellite Altimetry, NOAA/NESDIS/STAR</strong></p>
<p><strong>Remko Scharroo</strong></p>
<p><strong>EUMETSAT, Darmstadt, Germany</strong></p>
<p><strong>Joaquim F. Luis</strong></p>
<p><strong>Universidade do Algarve, Faro, Portugal</strong></p>
<p><strong>Florian Wobbe</strong></p>
<p><strong>Alfred Wegener Institute, Germany</strong></p>
<div class="section" id="introduction">
<h1>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this tutorial is to introduce new users to GMT,
outline the GMT environment, and enable you to make several
forms of graphics without having to know too much about UNIX
and UNIX tools.  We will not be able to cover all aspects of
GMT nor will we necessarily cover the selected topics in
sufficient detail.  Nevertheless, it is hoped that the exposure
will prompt the users to improve their GMT and UNIX skills
after completion of this short tutorial.</p>
<div class="section" id="gmt-overview-history-philosophy-and-usage">
<h2>1.1. GMT overview: History, philosophy, and usage<a class="headerlink" href="#gmt-overview-history-philosophy-and-usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="historical-highlights">
<h3>1.1.1. Historical highlights<a class="headerlink" href="#historical-highlights" title="Permalink to this headline">¶</a></h3>
<p>The GMT system was initiated in late 1987 at Lamont-Doherty
Earth Observatory, Columbia University by graduate students Paul
Wessel and Walter H. F. Smith.  Version 1 was officially introduced
to Lamont scientists in July 1988.  GMT 1 migrated by word of mouth
(and tape) to other institutions in the United States, UK, Japan, and
France and attracted a small following.  Paul took a Post-doctoral
position at SOEST in December 1989 and continued the GMT development.
Version 2.0 was released with an article in EOS, October 1991, and
quickly spread worldwide.
Version 3.0 in 1993 which was released with another article in EOS
on August 15, 1995.  A major upgrade to GMT 4.0 took place in Oct 2004.
Finally, in 2013 we released the new GMT 5 series and we have updated this tutorial
to reflect the changes in style and syntax.  However, GMT 5 is generally
backwards compatible with GMT 4 syntax.
GMT is used by tens of thousands of users worldwide in a broad range of disciplines.</p>
</div>
<div class="section" id="philosophy">
<h3>1.1.2. Philosophy<a class="headerlink" href="#philosophy" title="Permalink to this headline">¶</a></h3>
<p>GMT follows the UNIX philosophy in which complex tasks are broken
down into smaller and more manageable components.  Individual GMT
modules are small, easy to maintain, and can be used as any other
UNIX tool.  GMT is written in the ANSI C programming language
(very portable), is POSIX compliant, and is independent of
hardware constraints (e.g., memory).  GMT was deliberately written
for command-line usage, not a windows environment, in order to
maximize flexibility.  We standardized early on to use <em>PostScript</em> output
instead of other graphics formats.  Apart from the built-in support for
coastlines, GMT completely decouples data retrieval from the main
GMT modules.  GMT uses architecture-independent file formats.</p>
</div>
<div class="section" id="gmt-installation-considerations">
<h3>1.1.3. GMT installation considerations<a class="headerlink" href="#gmt-installation-considerations" title="Permalink to this headline">¶</a></h3>
<p>See the GMT wiki for how to install GMT.  In addition, we recommend
access to a <em>PostScript</em> previewer (e.g., gv (or ghostview or plain ghostscript)),
and any flavor of the UNIX operating system (UNIX, Linux, OS X, Cygwin, MinGW, etc.).
We do not recommend using the DOS command window under Windows.</p>
</div>
</div>
</div>
<div class="section" id="session-one">
<h1>2. Session One<a class="headerlink" href="#session-one" title="Permalink to this headline">¶</a></h1>
<div class="section" id="tutorial-setup">
<h2>2.1. Tutorial setup<a class="headerlink" href="#tutorial-setup" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">We assume that GMT has been properly and fully
installed and that the GMT executables are in your executable path
described on the GMT wiki.  You should be able to type gmt in your
terminal and it will display the GMT splash screen with version number
and the top-level options.  If not then you need to work on your user
environment, adding the path to the gmt executable to your search path.</p>
</li>
<li><p class="first">All GMT man pages, documentation, and gallery example scripts
are available from the GMT documentation web page.  It is
assumed these pages have been installed locally at your site;
if not they are always available from the main GMT site.</p>
</li>
<li><p class="first">We recommend you create a sub-directory called <em>tutorial</em>,
cd into that directory, and copy all the tutorial files directly
there. Depending on your installation the tutorial files are likely
in a directory like /usr/share/doc/gmt/tutorial.</p>
</li>
<li><p class="first">As we discuss GMT principles it may be a good idea to
consult the GMT Technical Reference and Cookbook for more
detailed explanations.</p>
</li>
<li><p class="first">The tutorial data sets are distributed via the GMT cache server.
You will therefore find that all those files have &#64; prepended to
their names.  This will ensure the file is copied from the server
before being used, hence you do not need to download any of the
data manually.  The downside is that you need an Internet
connection to run the examples by cut and paste.</p>
</li>
<li><p class="first">For all but the simplest GMT jobs it is recommended that
you place all the GMT (and UNIX) commands in a shell script
file and make it executable.  To ensure that UNIX recognizes
your script as a shell script it is a good habit always to start
the script with the line #!/bin/bash or #!/bin/csh, depending on the shell you prefer to use.
All the examples in this tutorial assumes you are running the Bourne Again shell, bash,
and you will need to modify some of the constructs, such as i/o redirection, to run
these examples under csh.
We strongly recommend bash over csh due the ability to define <em>functions</em>.</p>
</li>
<li><p class="first">Making a script executable is accomplished using the chmod
command, e.g., the script figure_1.sh is made executable
with “chmod +x figure_1.sh”.</p>
</li>
<li><p class="first">To view a <em>PostScript</em> file (e.g., map.ps) on a UNIX workstation
we use gv map.ps.  On some systems there
will be similar commands, like ghostview or gs and even open
under OS X (which first converts your <em>PostScript</em> to PDF).  In this text we will use
gv; please substitute the relevant <em>PostScript</em> previewer
on your system.  Very often it is more productive to convert these PS
files to PDF using the <a class="reference internal" href="psconvert.html"><span class="doc">psconvert</span></a> module.  Turning the file map.ps to map.pdf
is done with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt psconvert -Tf map.ps
</pre></div>
</div>
</li>
<li><p class="first">Please cd into the directory <em>tutorial</em>.  We are
now ready to start.</p>
</li>
</ol>
</div>
<div class="section" id="the-gmt-environment-what-happens-when-you-run-gmt">
<h2>2.2. The GMT environment: What happens when you run GMT ?<a class="headerlink" href="#the-gmt-environment-what-happens-when-you-run-gmt" title="Permalink to this headline">¶</a></h2>
<p>To get a good grasp on GMT one must understand what is going on “under
the hood”.  The <a class="reference internal" href="#gmt-environ"><span class="std std-ref">GMT Run-Time Environment</span></a> illustrates the relationships
you need to be aware of at run-time.</p>
<div class="figure align-center" id="id1">
<span id="gmt-environ"></span><a class="reference internal image-reference" href="_images/GMT_Environment.png"><img alt="_images/GMT_Environment.png" src="_images/GMT_Environment.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">The GMT run-time environment.  The will initiate with a set of system defaults that
you can override with having your own gmt.conf file in the current directory, specifying
GMT parameters via the <em>--PAR=value</em> technique, and supply module options.  Some GMT modules
will read hidden data (like coastlines) but most will explicitly need to be given user data.</span></p>
</div>
<div class="section" id="input-data">
<h3>2.2.1. Input data<a class="headerlink" href="#input-data" title="Permalink to this headline">¶</a></h3>
<p>A GMT module may or may not take input files.  Three different
types of input are recognized (more details can be found in Appendix
B in the Technical Reference):</p>
<ol class="arabic">
<li><p class="first">Data tables.
These are rectangular tables with a fixed number of columns and
unlimited number of rows.  We distinguish between two groups:</p>
<blockquote>
<div><ul class="simple">
<li>ASCII (Preferred unless files are huge)</li>
<li>Binary (to speed up input/output)</li>
</ul>
</div></blockquote>
<p>Such tables may have segment headers and can therefore hold any number of
subsets such as individual line segments or polygons.</p>
</li>
<li><p class="first">Gridded dated sets.
These are data matrices (evenly spaced in two coordinates) that come
in two flavors:</p>
<blockquote>
<div><ul class="simple">
<li>Grid-line registration</li>
<li>Pixel registration</li>
</ul>
</div></blockquote>
<p>You may choose among several file formats (even define your own format),
but the GMT default is the architecture-independent netCDF format.</p>
</li>
<li><p class="first">Color palette table (For imaging, color plots, and contour maps).
We will discuss these later.</p>
</li>
</ol>
</div>
<div class="section" id="job-control">
<h3>2.2.2. Job Control<a class="headerlink" href="#job-control" title="Permalink to this headline">¶</a></h3>
<p>GMT modules may get operational parameters from several places:</p>
<ol class="arabic simple">
<li>Supplied command line options/switches or module defaults.</li>
<li>Short-hand notation to select previously used option arguments
(stored in gmt.history).</li>
<li>Implicitly using GMT defaults for a variety of parameters
(stored in <a class="reference internal" href="gmt.conf.html"><span class="doc">gmt.conf</span></a>).</li>
<li>May use hidden support data like coastlines or <em>PostScript</em> patterns.</li>
</ol>
</div>
<div class="section" id="output-data">
<h3>2.2.3. Output data<a class="headerlink" href="#output-data" title="Permalink to this headline">¶</a></h3>
<p>There are 6 general categories of output produced by GMT:</p>
<ol class="arabic simple">
<li><em>PostScript</em> plot commands.</li>
<li>Data Table(s).</li>
<li>Gridded data set(s).</li>
<li>Statistics &amp; Summaries.</li>
<li>Warnings and Errors, written to <em>stderr</em>.</li>
<li>Exit status (0 means success, otherwise failure).</li>
</ol>
<p>Note: GMT automatically creates and updates a history of past
GMT command options for the common switches.  This history
file is called gmt.history and one will be created in
every directory from which GMT modules are executed.  Many
initial problems with GMT usage result from not fully appreciating
the relationships shown in Figure <a class="reference internal" href="#gmt-environ"><span class="std std-ref">GMT Environment</span></a> .</p>
</div>
</div>
<div class="section" id="the-unix-environment-entry-level-knowledge">
<h2>2.3. The UNIX Environment: Entry Level Knowledge<a class="headerlink" href="#the-unix-environment-entry-level-knowledge" title="Permalink to this headline">¶</a></h2>
<div class="section" id="redirection">
<h3>2.3.1. Redirection<a class="headerlink" href="#redirection" title="Permalink to this headline">¶</a></h3>
<p>Most GMT modules read their input from the terminal (called
<em>stdin</em>) or from files, and write their output to the
terminal (called <em>stdout</em>).  To use files instead one can
use redirection:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt module input-file &gt; output-file         <span class="c1"># Read a file and redirect output</span>
gmt module &lt; input-file &gt; output-file       <span class="c1"># Redirect input and output</span>
gmt module input-file &gt;&gt; output-file        <span class="c1"># Append output to existing file</span>
</pre></div>
</div>
</div></blockquote>
<p>In this example, and in all those to follow, it is assumed that you do not have the shell
variable <strong>noclobber</strong> set. If you do, it prevents accidental overwriting of existing files.
That may be a noble cause, but it is extremely annoying. So please, <strong>unset noclobber</strong>.</p>
</div>
<div class="section" id="piping">
<h3>2.3.2. Piping (|)<a class="headerlink" href="#piping" title="Permalink to this headline">¶</a></h3>
<p>Sometimes we want to use the output from one module as input
to another module.  This is achieved with <em>pipes</em>:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Someprogram <span class="p">|</span> gmt module1 <span class="p">|</span> gmt module1 &gt; OutputFile <span class="o">(</span>or <span class="p">|</span> lp<span class="o">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="standard-error-stderr">
<h3>2.3.3. Standard error (<em>stderr</em>)<a class="headerlink" href="#standard-error-stderr" title="Permalink to this headline">¶</a></h3>
<p>Most programs and GMT modules will on occasion write error messages.
These are typically written to a separate data stream called
<em>stderr</em> and can be redirected separately from the standard
output (which goes to <em>stdout</em>).  To send the error messages to the same location
as standard output we use</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>program &gt; errors.log <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<p>When we want to save both program output and error messages to
separate files we use the following syntax:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt module &gt; output.txt <span class="m">2</span>&gt; errors.log
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="file-name-expansion-or-wild-cards">
<h3>2.3.4. File name expansion or “wild cards”<a class="headerlink" href="#file-name-expansion-or-wild-cards" title="Permalink to this headline">¶</a></h3>
<p>UNIX provides several ways to select groups of files based
on name patterns:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>*</td>
<td>Matches anything</td>
</tr>
<tr class="row-odd"><td>?</td>
<td>Matches any single character</td>
</tr>
<tr class="row-even"><td><em>list</em></td>
<td>Matches characters in the list</td>
</tr>
<tr class="row-odd"><td><em>range</em></td>
<td>Matches characters in the given range</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>You can save much time by getting into the habit of selecting
“good” filenames that make it easy to select subsets of all
files using the UNIX wild card notation.</p>
<p>Examples:</p>
<ol class="arabic simple">
<li>gmt module data_*.txt operates on all files starting with
“data_” and ending in “.txt”.</li>
<li>gmt module line_?.txt works on all files starting with
“line_” followed by any single character and ending in “.txt”.</li>
<li>gmt module section_1[0-9]0.part_[12] only processes data
from sections 100 through 190, only using every 10th profile, and
gets both part 1 and 2.</li>
</ol>
</div>
</div>
<div class="section" id="laboratory-exercises">
<h2>2.4. Laboratory Exercises<a class="headerlink" href="#laboratory-exercises" title="Permalink to this headline">¶</a></h2>
<p>We will begin our adventure by making some simple plot axes and
coastline basemaps.  We will do this in order to introduce the
all-important common options <strong>-B</strong>, <strong>-J</strong>, and <strong>-R</strong> and to familiarize
ourselves with a few selected GMT projections.  The GMT modules
we will utilize are <a class="reference internal" href="psbasemap.html"><span class="doc">psbasemap</span></a> and <a class="reference internal" href="pscoast.html"><span class="doc">pscoast</span></a>.  Please
consult their manual pages for reference.</p>
<div class="section" id="linear-projection">
<h3>2.4.1. Linear projection<a class="headerlink" href="#linear-projection" title="Permalink to this headline">¶</a></h3>
<p>We start by making the basemap frame for a linear <em>x-y</em> plot.
We want it to go from 10 to 70 in <em>x</em> and
from -3 to 8 in <em>y</em>, with automatic annotation intervals.  Finally,
we let the canvas be painted light red and have dimensions of
4 by 3 inches.  Here’s how we do it:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt psbasemap -R10/70/-3/8 -JX4i/3i -Ba -B+glightred+t<span class="s2">&quot;My first plot&quot;</span> -P &gt; GMT_tut_1.ps
</pre></div>
</div>
</div></blockquote>
<p>You can view the result with gv GMT_tut_1.ps and it should look like <a class="reference internal" href="#gmt-tut-1"><span class="std std-ref">our example 1 below</span></a>.
Examine the <a class="reference internal" href="psbasemap.html"><span class="doc">psbasemap</span></a> documentation so you understand what each option means.</p>
<div class="figure align-center" id="id2">
<span id="gmt-tut-1"></span><a class="reference internal image-reference" href="_images/GMT_tut_1.png"><img alt="_images/GMT_tut_1.png" src="_images/GMT_tut_1.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 1.</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Try change the <strong>-JX</strong> values.</li>
<li>Try change the <strong>-B</strong> values.</li>
<li>Omit the <strong>-P</strong>.</li>
<li>Change title and canvas color.</li>
</ol>
</div>
<div class="section" id="logarithmic-projection">
<h3>2.4.2. Logarithmic projection<a class="headerlink" href="#logarithmic-projection" title="Permalink to this headline">¶</a></h3>
<p>We next will show how to do a basemap for a log--log plot.  We have
no data set yet but we will
imagine that the raw <em>x</em> data range from 3 to 9613 and that <em>y</em>
ranges from 3.2 10^20 to 6.8 10^24.  One possibility is</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt psbasemap -R1/10000/1e20/1e25 -JX9il/6il -Bxa2+l<span class="s2">&quot;Wavelength (m)&quot;</span> -Bya1pf3+l<span class="s2">&quot;Power (W)&quot;</span> -BWS &gt; GMT_tut_2.ps
</pre></div>
</div>
</div></blockquote>
<p>Make sure your plot looks like <a class="reference internal" href="#gmt-tut-2"><span class="std std-ref">our example 2 below</span></a></p>
<div class="figure align-center" id="id3">
<span id="gmt-tut-2"></span><a class="reference internal image-reference" href="_images/GMT_tut_2.png"><img alt="_images/GMT_tut_2.png" src="_images/GMT_tut_2.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 2.</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Do not append <strong>l</strong> to the axes lengths.</li>
<li>Leave the <strong>p</strong> modifier out of the <strong>-B</strong> string.</li>
<li>Add <strong>g</strong>3 to each side of the slash in <strong>-B</strong>.</li>
</ol>
</div>
<div class="section" id="mercator-projection">
<h3>2.4.3. Mercator projection<a class="headerlink" href="#mercator-projection" title="Permalink to this headline">¶</a></h3>
<p>Despite the problems of extreme horizontal exaggeration at high
latitudes, the conformal Mercator projection (<strong>-JM</strong>) remains
the stalwart of location maps used by scientists.  It is one
of several cylindrical projections offered by GMT; here we
will only have time to focus on one such projection.  The
complete syntax is simply</p>
<p><strong>-JM</strong><em>width</em></p>
<p>To make coastline maps we use <a class="reference internal" href="pscoast.html"><span class="doc">pscoast</span></a> which automatically will
access the GMT coastline, river and border data base derived from the GSHHG
database [See <em>Wessel and Smith</em>, 1996].  In addition
to the common switches we may need to use some of several pscoast-specific options:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-A</strong></td>
<td>Exclude small features or those of high hierarchical levels (see Appendix K)</td>
</tr>
<tr class="row-odd"><td><strong>-D</strong></td>
<td>Select data resolution (<strong>b</strong>ull, <strong>h</strong>igh, <strong>i</strong>ntermediate, <strong>l</strong>ow, or <strong>c</strong>rude)</td>
</tr>
<tr class="row-even"><td><strong>-G</strong></td>
<td>Set color of dry areas (default does not paint)</td>
</tr>
<tr class="row-odd"><td><strong>-I</strong></td>
<td>Draw rivers (chose features from one or more hierarchical categories)</td>
</tr>
<tr class="row-even"><td><strong>-L</strong></td>
<td>Plot map scale (length scale can be km, miles, or nautical miles)</td>
</tr>
<tr class="row-odd"><td><strong>-N</strong></td>
<td>Draw political borders (including US state borders)</td>
</tr>
<tr class="row-even"><td><strong>-S</strong></td>
<td>Set color for wet areas (default does not paint)</td>
</tr>
<tr class="row-odd"><td><strong>-W</strong></td>
<td>Draw coastlines and set pen thickness</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Main options when making coastline plots or overlays.</p>
<p>One of <strong>-W</strong>, <strong>-G</strong>, <strong>-S</strong> must be selected.  Our first coastline
example is from Latin America:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt pscoast -R-90/-70/0/20 -JM6i -P -Ba -Gchocolate &gt; GMT_tut_3.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-3"><span class="std std-ref">our example 3 below</span></a></p>
<div class="figure align-center" id="id4">
<span id="gmt-tut-3"></span><a class="reference internal image-reference" href="_images/GMT_tut_3.png"><img alt="_images/GMT_tut_3.png" src="_images/GMT_tut_3.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 3.</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Add the <strong>-V</strong> option.</li>
<li>Try <strong>-R</strong>270/290/0/20 instead.  What happens to the annotations?</li>
<li>Edit your gmt.conf file, change <a class="reference internal" href="gmt.conf.html#format-geo-map"><span class="std std-ref">FORMAT_GEO_MAP</span></a>
to another setting (see the <a class="reference internal" href="gmt.conf.html"><span class="doc">gmt.conf</span></a> documentation), and plot again.</li>
<li>Pick another region and change land color.</li>
<li>Pick a region that includes the north or south poles.</li>
<li>Try <strong>-W</strong>0.25<strong>p</strong> instead of (or in addition to) <strong>-G</strong>.</li>
</ol>
</div>
<div class="section" id="albers-projection">
<h3>2.4.4. Albers projection<a class="headerlink" href="#albers-projection" title="Permalink to this headline">¶</a></h3>
<p>The Albers projection (<strong>-JB</strong>) is an equal-area conical projection;
its conformal cousin is the Lambert conic projection (<strong>-JL</strong>).
Their usages are almost identical so we will only use the Albers here.
The general syntax is</p>
<blockquote>
<div><strong>-JB</strong><em>lon_0/lat_0/lat_1/lat_2/width</em></div></blockquote>
<p>where (<em>lon_0, lat_0</em>) is the map (projection) center and <em>lat_1, lat_2</em>
are the two standard parallels where the cone intersects the Earth’s surface.
We try the following command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt pscoast -R-130/-70/24/52 -JB-100/35/33/45/6i -Ba -B+t<span class="s2">&quot;Conic Projection&quot;</span> -N1/thickest -N2/thinnest -A500 -Ggray -Wthinnest -P &gt; GMT_tut_4.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-4"><span class="std std-ref">our example 4 below</span></a></p>
<div class="figure align-center" id="id5">
<span id="gmt-tut-4"></span><a class="reference internal image-reference" href="_images/GMT_tut_4.png"><img alt="_images/GMT_tut_4.png" src="_images/GMT_tut_4.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 4.</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Change the parameter <a class="reference internal" href="gmt.conf.html#map-grid-cross-size-primary"><span class="std std-ref">MAP_GRID_CROSS_SIZE_PRIMARY</span></a> to make grid crosses instead of gridlines.</li>
<li>Change <strong>-R</strong> to a rectangular box specification instead of
minimum and maximum values.</li>
</ol>
</div>
<div class="section" id="orthographic-projection">
<h3>2.4.5. Orthographic projection<a class="headerlink" href="#orthographic-projection" title="Permalink to this headline">¶</a></h3>
<p>The azimuthal orthographic projection (<strong>-JG</strong>) is one of several
projections with similar syntax and behavior; the one we have
chosen mimics viewing the Earth from space at an infinite distance;
it is neither conformal nor equal-area.
The syntax for this projection is</p>
<p><strong>-JG</strong><em>lon_0/lat_0/width</em></p>
<p>where (<em>lon_0, lat_0</em>) is the center of the map (projection).
As an example we will try</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt pscoast -Rg -JG280/30/6i -Bag -Dc -A5000 -Gwhite -SDarkTurquoise -P &gt; GMT_tut_5.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-5"><span class="std std-ref">our example 5 below</span></a></p>
<div class="figure align-center" id="id6">
<span id="gmt-tut-5"></span><a class="reference internal image-reference" href="_images/GMT_tut_5.png"><img alt="_images/GMT_tut_5.png" src="_images/GMT_tut_5.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 5</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Use the rectangular option in <strong>-R</strong> to make a rectangular map
showing the US only.</li>
</ol>
</div>
<div class="section" id="eckert-iv-and-vi-projection">
<h3>2.4.6. Eckert IV and VI projection<a class="headerlink" href="#eckert-iv-and-vi-projection" title="Permalink to this headline">¶</a></h3>
<p>We conclude the survey of map projections with the Eckert IV and VI projections
(<strong>-JK</strong>), two of several projections used for global thematic maps; They
are both equal-area projections whose syntax is</p>
<p><strong>-JK</strong>[<strong>f</strong>|<strong>s</strong>]<em>lon_0/width</em></p>
<p>where <strong>b</strong> gives Eckert IV (4) and <strong>s</strong> (Default) gives Eckert VI (6).
The <em>lon_0</em> is the central meridian (which takes precedence over
the mid-value implied by the <strong>-R</strong> setting).  A simple Eckert VI world map
is thus generated by</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt pscoast -Rg -JKs180/9i -Bag -Dc -A5000 -Gchocolate -SDarkTurquoise -Wthinnest &gt; GMT_tut_6.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-6"><span class="std std-ref">our example 6 below</span></a></p>
<div class="figure align-center" id="id7">
<span id="gmt-tut-6"></span><a class="reference internal image-reference" href="_images/GMT_tut_6.png"><img alt="_images/GMT_tut_6.png" src="_images/GMT_tut_6.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 6</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Center the map on Greenwich.</li>
<li>Add a map scale with <strong>-L</strong>.</li>
</ol>
</div>
</div>
</div>
<div class="section" id="session-two">
<h1>3. Session Two<a class="headerlink" href="#session-two" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general-information">
<h2>3.1. General Information<a class="headerlink" href="#general-information" title="Permalink to this headline">¶</a></h2>
<p>There are 18 GMT modules that directly create (or add overlays to)
plots; the remaining 45 are mostly concerned with data
processing.  This session will focus on the task of plotting
lines, symbols, and text on maps.  We will build on the skills
we acquired while familiarizing ourselves with the various
GMT map projections as well as how to select a data domain
and boundary annotations.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Program</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><strong>BASEMAPS</strong></td>
</tr>
<tr class="row-odd"><td>psbasemap</td>
<td>Create an empty basemap frame with optional scale</td>
</tr>
<tr class="row-even"><td>pscoast</td>
<td>Plot coastlines, filled continents, rivers, and political borders</td>
</tr>
<tr class="row-odd"><td>pslegend</td>
<td>Create legend overlay</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><strong>POINTS AND LINES</strong></td>
</tr>
<tr class="row-odd"><td>pswiggle</td>
<td>Draw spatial time-series along their (<em>x,y</em>)-tracks</td>
</tr>
<tr class="row-even"><td>psxy</td>
<td>Plot symbols, polygons, and lines in 2-D</td>
</tr>
<tr class="row-odd"><td>psxyz</td>
<td>Plot symbols, polygons, and lines in 3-D</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><strong>HISTOGRAMS</strong></td>
</tr>
<tr class="row-odd"><td>pshistogram</td>
<td>Plot a rectangular histogram</td>
</tr>
<tr class="row-even"><td>psrose</td>
<td>Plot a polar histogram(sector/rose diagram)</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><strong>CONTOURS</strong></td>
</tr>
<tr class="row-even"><td>grdcontour</td>
<td>Contouring of 2-D gridded data sets</td>
</tr>
<tr class="row-odd"><td>pscontour</td>
<td>Direct contouring/imaging of (<em>x,y,z</em>) data by optimal triangulation</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><strong>SURFACES</strong></td>
</tr>
<tr class="row-odd"><td>grdimage</td>
<td>Produce color images from 2-D gridded data</td>
</tr>
<tr class="row-even"><td>grdvector</td>
<td>Plot vector fields from 2-D gridded data</td>
</tr>
<tr class="row-odd"><td>grdview</td>
<td>3-D perspective imaging of 2-D gridded data</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><strong>UTILITIES</strong></td>
</tr>
<tr class="row-odd"><td>psclip</td>
<td>Use polygon files to initiate custom clipping paths</td>
</tr>
<tr class="row-even"><td>psimage</td>
<td>Plot Sun raster files</td>
</tr>
<tr class="row-odd"><td>psmask</td>
<td>Create clipping paths or generate overlay to mask</td>
</tr>
<tr class="row-even"><td>psscale</td>
<td>Plot gray scale or color scale bar</td>
</tr>
<tr class="row-odd"><td>pstext</td>
<td>Plot text strings on maps</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Plotting lines and symbols, <a class="reference internal" href="psxy.html"><span class="doc">psxy</span></a> is one of the most frequently
used modules in GMT.  In addition to the common command line switches
it has numerous specific options, and expects different file formats
depending on what action has been selected.  These circumstances make
<a class="reference internal" href="psxy.html"><span class="doc">psxy</span></a> harder to master than most GMT tools.  The table below
shows a abbreviated list of the options:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-A</strong></td>
<td>Suppress line interpolation along great circles</td>
</tr>
<tr class="row-odd"><td><strong>-C</strong><em>cpt</em></td>
<td>Let symbol color be determined from <em>z</em>-values and the <em>cpt</em> file</td>
</tr>
<tr class="row-even"><td><strong>-E</strong>[<strong>x</strong>|<strong>X</strong>][<strong>y</strong>|<strong>Y</strong>][<strong>+w</strong><em>cap</em>][<strong>+p</strong><em>pen</em>]</td>
<td>Draw selected error bars with specified attributes</td>
</tr>
<tr class="row-odd"><td><strong>-G</strong><em>fill</em></td>
<td>Set color for symbol or fill for polygons</td>
</tr>
<tr class="row-even"><td><strong>-L</strong>[<em>options</em>]</td>
<td>Explicitly close polygons or create polygon (see <a class="reference internal" href="psxy.html"><span class="doc">psxy</span></a>)</td>
</tr>
<tr class="row-odd"><td><strong>-N</strong>[<strong>c</strong>|<strong>r</strong>]</td>
<td>Do Not clip symbols at map borders</td>
</tr>
<tr class="row-even"><td><strong>-S</strong>[<em>symbol</em>][<em>size</em>]</td>
<td>Select one of several symbols</td>
</tr>
<tr class="row-odd"><td><strong>-W</strong><em>pen</em></td>
<td>Set <em>pen</em> for line or symbol outline</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The symbols can either be transparent (using <strong>-W</strong> only, not <strong>-G</strong>)
or solid (<strong>-G</strong>, with optional outline using <strong>-W</strong>).  The <strong>-S</strong>
option takes the code for the desired symbol and optional size information.
If no symbol is given it is expected to be given in the last column of each record in the input
file.  The <em>size</em> is optional since individual sizes for
symbols may also be provided by the input data.  The main symbols available to
us are shown in the table below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Symbol</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-S-</strong><em>size</em></td>
<td>horizontal dash; <em>size</em> is length of dash</td>
</tr>
<tr class="row-odd"><td><strong>-Sa</strong><em>size</em></td>
<td>st<strong>a</strong>r; <em>size</em> is radius of circumscribing circle</td>
</tr>
<tr class="row-even"><td><strong>-Sb</strong><em>size</em>[/<em>base</em>][<strong>u</strong>]</td>
<td><strong>b</strong>ar; <em>size</em> is bar width, append <strong>u</strong> if <em>size</em> is in <em>x</em>-units</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Bar extends from <em>base</em> [0] to the <em>y</em>-value</td>
</tr>
<tr class="row-even"><td><strong>-Sc</strong><em>size</em></td>
<td><strong>c</strong>ircle; <em>size</em> is the diameter</td>
</tr>
<tr class="row-odd"><td><strong>-Sd</strong><em>size</em></td>
<td><strong>d</strong>iamond; <em>size</em> is its side</td>
</tr>
<tr class="row-even"><td><strong>-Se</strong></td>
<td><strong>e</strong>llipse; <em>direction</em> (CCW from horizontal), <em>major</em>, and <em>minor</em> axes</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>are read from the input file</td>
</tr>
<tr class="row-even"><td><strong>-SE</strong></td>
<td><strong>e</strong>llipse; <em>azimuth</em> (CW from vertical), <em>major</em>, and <em>minor</em> axes in kilometers</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>are read from the input file</td>
</tr>
<tr class="row-even"><td><strong>-Sg</strong><em>size</em></td>
<td>octa<strong>g</strong>on; <em>size</em> is its side</td>
</tr>
<tr class="row-odd"><td><strong>-Sh</strong><em>size</em></td>
<td><strong>h</strong>exagon; <em>size</em> is its side</td>
</tr>
<tr class="row-even"><td><strong>-Si</strong><em>size</em></td>
<td><strong>i</strong>nverted triangle; <em>size</em> is its side</td>
</tr>
<tr class="row-odd"><td><strong>-Sk</strong><em>symbol</em>/<em>size</em></td>
<td><strong>k</strong>ustom symbol; <em>size</em> is its side</td>
</tr>
<tr class="row-even"><td><strong>-Sl</strong><em>size</em><strong>+t</strong><em>string</em></td>
<td><strong>l</strong>etter; <em>size</em> is fontsize. The <em>string</em> can be a letter or a text string</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Append <strong>+f</strong><em>font</em> to set font and <strong>+j</strong><em>just</em> for justification</td>
</tr>
<tr class="row-even"><td><strong>-Sn</strong><em>size</em></td>
<td>pe<strong>n</strong>tagon; <em>size</em> is its side</td>
</tr>
<tr class="row-odd"><td><strong>-Sp</strong></td>
<td><strong>p</strong>oint; no size needed (1 pixel at current resolution is used)</td>
</tr>
<tr class="row-even"><td><strong>-Sr</strong><em>size</em></td>
<td><strong>r</strong>ect, <em>width</em> and <em>height</em> are read from input file</td>
</tr>
<tr class="row-odd"><td><strong>-Ss</strong><em>size</em></td>
<td><strong>s</strong>quare, <em>size</em> is its side</td>
</tr>
<tr class="row-even"><td><strong>-St</strong><em>size</em></td>
<td><strong>t</strong>riangle; <em>size</em> is its side</td>
</tr>
<tr class="row-odd"><td><strong>-Sv</strong><em>params</em></td>
<td><strong>v</strong>ector; <em>direction</em> (CCW from horizontal) and <em>length</em> are read from input data</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>Append parameters of the vector; see <a class="reference internal" href="psxy.html"><span class="doc">psxy</span></a> for syntax.</td>
</tr>
<tr class="row-odd"><td><strong>-SV</strong><em>params</em></td>
<td><strong>v</strong>ector, except <em>azimuth</em> (degrees east of north) is expected instead of <em>direction</em></td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>The angle on the map is calculated based on the chosen map projection</td>
</tr>
<tr class="row-odd"><td><strong>-Sw</strong>[<em>size</em>]</td>
<td>pie <strong>w</strong>edge; <em>start</em> and <em>stop</em> directions (CCW from horizontal) are read from</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>input data</td>
</tr>
<tr class="row-odd"><td><strong>-Sx</strong><em>size</em></td>
<td>cross; <em>size</em> is length of crossing lines</td>
</tr>
<tr class="row-even"><td><strong>-Sy</strong><em>size</em></td>
<td>vertical dash; <em>size</em> is length of dash</td>
</tr>
</tbody>
</table>
<p>The symbol option in <a class="reference internal" href="psxy.html"><span class="doc">psxy</span></a>.  Lower case symbols (<strong>a, c, d, g, h, i, n, s, t, x</strong>)
will fit inside a circle of given diameter.  Upper case symbols (<strong>A, C, D, G, H, I, N, S, T, X</strong>)
will have area equal to that of a circle of given diameter.</p>
<p>Because some symbols require more input data than others, and because the
size of symbols as well as their color can be determined from the input data,
the format of data can be confusing.  The general format for the input data
is (optional items are in brackets []):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>x y <span class="o">[</span> z <span class="o">]</span> <span class="o">[</span> size <span class="o">]</span> <span class="o">[</span> sigma_x <span class="o">]</span> <span class="o">[</span> sigma_y <span class="o">]</span> <span class="o">[</span> symbol <span class="o">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Thus, the only required input columns are the first two which must contain the
longitude and latitude (or <em>x</em> and <em>y</em>.  The remaining items
apply when one (or more) of the following conditions are met:</p>
<ol class="arabic simple">
<li>If you want the color of each symbol to be determined individually,
supply a CPT with the <strong>-C</strong> option and let the 3rd data column
contain the <em>z</em>-values to be used with the CPT.</li>
<li>If you want the size of each symbol to be determined individually,
append the size in a separate column.</li>
<li>To draw error bars, use the <strong>-E</strong> option and give one or two
additional data columns with the <em>dx</em> and <em>dy</em> values; the form of
<strong>-E</strong> determines if one (<strong>-Ex</strong> or <strong>-Ey</strong>) or two (<strong>-Exy</strong>)
columns are needed.  If upper case flags <strong>X</strong> or <strong>Y</strong> are given then
we will instead draw a “box-and-whisker” symbol and the <em>sigma_x</em> (or
<em>sigma_y</em>) must represent 4 columns containing the minimum, the 25 and 75%
quartiles, and the maximum value.  The given <em>x</em> (or <em>y</em>) coordinate is taken as the 50%
quantile (median).</li>
<li>If you draw vectors with <strong>-Sv</strong> (or <strong>-SV</strong>) then <em>size</em> is
actually two columns containing the <em>direction</em> (or <em>azimuth</em>)
and <em>length</em> of each vector.</li>
<li>If you draw ellipses (<strong>-Se</strong>) then <em>size</em> is actually three
columns containing the <em>direction</em> and the <em>major</em> and <em>minor</em>
axes in plot units (with <strong>-SE</strong> we expect <em>azimuth</em> instead and axes
lengths in km).</li>
</ol>
<p>Before we try some examples we need to review two key switches; they
specify pen attributes and symbol or polygon fill.  Please consult
the <a class="reference internal" href="GMT_Docs.html#gmt-general-features"><span class="std std-ref">General Features</span></a> section the
GMT Technical Reference and Cookbook before experimenting
with the examples below.</p>
<p>Examples:</p>
<p>We will start off using the file tut_data.txt in your directory.
Using the GMT utility <a class="reference internal" href="gmtinfo.html"><span class="doc">gmtinfo</span></a> we find the extent of the
data region:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt info @tut_data.txt
</pre></div>
</div>
</div></blockquote>
<p>which returns</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tut_data.txt: <span class="nv">N</span> <span class="o">=</span> <span class="m">7</span>   &lt;<span class="m">1</span>/5&gt;   &lt;<span class="m">1</span>/5&gt;
</pre></div>
</div>
</div></blockquote>
<p>telling us that the file tut_data.txt has 7 records and gives the
minimum and maximum values for the first two columns.  Given our
knowledge of how to set up linear projections with <strong>-R</strong> and <strong>-JX</strong>,
try the following:</p>
<ol class="arabic simple">
<li>Plot the data as transparent circles of size 0.3 inches.</li>
<li>Plot the data as solid white circles instead.</li>
<li>Plot the data using 0.5” stars, making them red with a thick (width = 1.5p),
dashed pen.</li>
</ol>
<p>To simply plot the data as a line we choose no symbol and specify a pen thickness instead:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt psxy @tut_data.txt -R0/6/0/6 -Jx1i -P -Baf -Wthinner &gt; GMT_tut_7.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-7"><span class="std std-ref">our example 7 below</span></a></p>
<div class="figure align-center" id="id8">
<span id="gmt-tut-7"></span><a class="reference internal image-reference" href="_images/GMT_tut_7.png"><img alt="_images/GMT_tut_7.png" src="_images/GMT_tut_7.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 7</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Plot the data as a green-blue polygon instead.</li>
<li>Try using a predefined pattern.</li>
</ol>
<p>A common question is : “How can I plot symbols connected by a line
with psxy?”.  The surprising answer is that we must call <a class="reference internal" href="psxy.html"><span class="doc">psxy</span></a> twice.
While this sounds cumbersome there is a reason for this:  Basically,
polygons need to be kept in memory since they may need to be clipped,
hence computer memory places a limit on how large polygons we may plot.
Symbols, on the other hand, can be plotted one at the time so there
is no limit to how many symbols one may plot.  Therefore, to connect
symbols with a line we must use the overlay approach:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt psxy @tut_data.txt -R0/6/0/6 -Jx1i -Baf -P -K -Wthinner &gt; GMT_tut_8.ps
gmt psxy tut_data.txt -R -J -O -W -Si0.2i &gt;&gt; GMT_tut_8.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-8"><span class="std std-ref">our example 8 below</span></a>. The
two-step procedure also makes it easy to plot the line over the symbols
instead of symbols over the line, as here.</p>
<div class="figure align-center" id="id9">
<span id="gmt-tut-8"></span><a class="reference internal image-reference" href="_images/GMT_tut_8.png"><img alt="_images/GMT_tut_8.png" src="_images/GMT_tut_8.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 8</span></p>
</div>
<p>Our final <a class="reference internal" href="psxy.html"><span class="doc">psxy</span></a> example involves a more complicated scenario
in which we want to plot the epicenters of several earthquakes over
the background of a coastline basemap.  We want the symbols to have a
size that reflects the magnitude of the earthquakes, and that their
color should reflect the depth of the hypocenter.  The first few
lines in the tut_quakes.ngdc looks like this:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Historical Tsunami Earthquakes from the NGDC Database
Year  Mo  Da  Lat+N  Long+E  Dep  Mag
<span class="m">1987</span>  <span class="m">01</span>  <span class="m">04</span>  <span class="m">49</span>.77  <span class="m">149</span>.29  <span class="m">489</span>  <span class="m">4</span>.1
<span class="m">1987</span>  <span class="m">01</span>  <span class="m">09</span>  <span class="m">39</span>.90  <span class="m">141</span>.68  <span class="m">067</span>  <span class="m">6</span>.8
</pre></div>
</div>
</div></blockquote>
<p>Thus the file has three header records (including the blank line),
but we are only interested in columns 5, 4, 6, and 7.  In addition to
extract those columns we must also scale the magnitudes into symbols
sizes in inches.  Given their range it looks like multiplying the
magnitude by 0.1 will work well for symbol sizes in cm.  Reformatting this file to comply
with the <a class="reference internal" href="psxy.html"><span class="doc">psxy</span></a> input format can be done in a number of ways,
including manual editing, using MATLAB, a spreadsheet program, or UNIX
tools.  Here, we simply use the common column selection option <strong>-i</strong>
and its <a class="reference internal" href="gmt.html#icols-full"><span class="std std-ref">scaling/offset capabilities</span></a>.
To skip the first 3 header records
and then select the 4th, 3rd, 5th, and
6th column and scale the last column by 0.1, we would use</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-i4,3,5,6s0.1 -h3
</pre></div>
</div>
</div></blockquote>
<p>(Remember that 0 is the first column).  We will follow conventional color schemes for seismicity and assign red
to shallow quakes (depth 0-100 km), green to intermediate quakes
(100-300 km), and blue to deep earthquakes (depth &gt; 300 km).  The
quakes.cpt file establishes the relationship between depth
and color:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># color palette for seismicity</span>
<span class="c1">#z0  color   z1 color</span>
<span class="m">0</span>    red    <span class="m">100</span> red
<span class="m">100</span>  green  <span class="m">300</span> green
<span class="m">300</span>  blue  <span class="m">1000</span> blue
</pre></div>
</div>
</div></blockquote>
<p>Apart from comment lines (starting with #), each record in the CPT
governs the color of a symbol whose <em>z</em> value falls in the range between
<em>z_0</em> and <em>z_1</em>.  If the colors for the lower and upper levels differ
then an intermediate color will be linearly interpolated given the <em>z</em>
value.  Here, we have chosen constant color intervals.  You may wish
to consult the <a class="reference internal" href="GMT_Docs.html#cpt-section"><span class="std std-ref">Color palette tables</span></a> section in the Cookbook.
This color table was generated as part of the script (below).</p>
<p>We may now complete our example using the Mercator projection:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt makecpt -Cred,green,blue -T0,70,300,10000 &gt; quakes.cpt
gmt pscoast -R130/150/35/50 -JM6i -B5 -P -Ggray -K &gt; GMT_tut_9.ps
gmt psxy -R -J -O @tut_quakes.ngdc -Wfaint -i4,3,5,6s0.1 -h3 -Scc -Cquakes.cpt &gt;&gt; GMT_tut_9.ps
</pre></div>
</div>
</div></blockquote>
<p>where the <strong>c</strong> appended to the <strong>-Sc</strong> option ensures that symbols
sizes are interpreted to be in cm.  Your plot should look like <a class="reference internal" href="#gmt-tut-9"><span class="std std-ref">our example 9 below</span></a></p>
<div class="figure align-center" id="id10">
<span id="gmt-tut-9"></span><a class="reference internal image-reference" href="_images/GMT_tut_9.png"><img alt="_images/GMT_tut_9.png" src="_images/GMT_tut_9.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 9</span></p>
</div>
<div class="section" id="more-exercises">
<h3>3.1.1. More exercises<a class="headerlink" href="#more-exercises" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Select another symbol.</li>
<li>Let the deep earthquakes be cyan instead of blue.</li>
</ol>
</div>
</div>
<div class="section" id="plotting-text-strings">
<h2>3.2. Plotting text strings<a class="headerlink" href="#plotting-text-strings" title="Permalink to this headline">¶</a></h2>
<p>In many situations we need to annotate plots or maps with text strings;
in GMT this is done using <a class="reference internal" href="pstext.html"><span class="doc">pstext</span></a>.  Apart from the common
switches, there are 9 options that are particularly useful.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-C</strong><em>dx</em>/<em>dy</em></td>
<td>Spacing between text and the text box (see <strong>-W</strong>)</td>
</tr>
<tr class="row-odd"><td><strong>-D</strong><em>dx</em>/<em>dy</em></td>
<td>Offsets the projected location of the strings</td>
</tr>
<tr class="row-even"><td><strong>-F</strong><em>params</em></td>
<td>Set font, justify, angle values or source</td>
</tr>
<tr class="row-odd"><td><strong>-G</strong><em>fill</em></td>
<td>Fills the text bos using specified fill</td>
</tr>
<tr class="row-even"><td><strong>-L</strong></td>
<td>Lists the font ids and exits</td>
</tr>
<tr class="row-odd"><td><strong>-N</strong></td>
<td>Deactivates clipping at the borders</td>
</tr>
<tr class="row-even"><td><strong>-S</strong><em>pen</em></td>
<td>Selects outline font and sets pen attributes</td>
</tr>
<tr class="row-odd"><td><strong>-T</strong><em>form</em></td>
<td>Select text box shape</td>
</tr>
<tr class="row-even"><td><strong>-W</strong><em>pen</em></td>
<td>Draw the outline of text box</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The input data to <a class="reference internal" href="pstext.html"><span class="doc">pstext</span></a> is expected to contain the following
information:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span> x   y <span class="o">]</span>  <span class="o">[</span> font<span class="o">]</span>  <span class="o">[</span> angle <span class="o">]</span> <span class="o">[</span> justify <span class="o">]</span>   my text
</pre></div>
</div>
</div></blockquote>
<p>The <em>font</em> is the optional font to use, the <em>angle</em> is the
angle (measured counterclockwise) between the text’s baseline and the
horizontal, <em>justify</em> indicates which anchor point on the text-string should
correspond to the given <em>x, y</em> location, and <em>my text</em> is the text
string or sentence to plot.  See the Technical reference for
the relevant two-character codes used for justification.</p>
<p>The text string can be one or several words and may include octal codes for
special characters and escape-sequences used to select subscripts or symbol
fonts. The escape sequences that are recognized by GMT are given below:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Effect</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#64;~</td>
<td>Turns symbol font on or off</td>
</tr>
<tr class="row-odd"><td>&#64;+</td>
<td>Turns superscript on or off</td>
</tr>
<tr class="row-even"><td>&#64;-</td>
<td>Turns subscript on or off</td>
</tr>
<tr class="row-odd"><td>&#64;#</td>
<td>Turns small caps on or off</td>
</tr>
<tr class="row-even"><td>&#64;_</td>
<td>Turns underline on or off</td>
</tr>
<tr class="row-odd"><td>&#64;%<em>font</em>%</td>
<td>Switches to another font; &#64;%% resets to previous font</td>
</tr>
<tr class="row-even"><td>&#64;:<em>size</em>:</td>
<td>Switches to another font size; &#64;:: resets to previous size</td>
</tr>
<tr class="row-odd"><td>&#64;;<em>color</em>;</td>
<td>Switches to another font color; &#64;;; resets to previous color</td>
</tr>
<tr class="row-even"><td>&#64;!</td>
<td>Creates one composite character of the next two characters</td>
</tr>
<tr class="row-odd"><td>&#64;&#64;</td>
<td>Prints the &#64; sign itself</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note that these escape sequences (as well as octal codes) can be
used anywhere in GMT, including in arguments to the <strong>-B</strong> option.
A chart of octal codes can be found in Appendix F in the GMT
Technical Reference.  For accented European characters you must
set <a class="reference internal" href="gmt.conf.html#ps-char-encoding"><span class="std std-ref">PS_CHAR_ENCODING</span></a> to ISOLatin1 in your <a class="reference internal" href="gmt.conf.html"><span class="doc">gmt.conf</span></a> file.</p>
<p>We will demonstrate <a class="reference internal" href="pstext.html"><span class="doc">pstext</span></a> with the following script:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt pstext -R0/7/0/5 -Jx1i -P -Ba -F+f30p,Times-Roman,DarkOrange+jBL <span class="s">&lt;&lt; EOF &gt; GMT_tut_10.ps</span>
<span class="s">1  1  It&#39;s P@al, not Pal!</span>
<span class="s">1  2  Try @%33%ZapfChancery@%% today</span>
<span class="s">1  3  @~D@~g@-b@- = 2@~pr@~G@~D@~h.</span>
<span class="s">1  4  University of Hawaii at M@!a\225noa</span>
<span class="s">EOF</span>
</pre></div>
</div>
</div></blockquote>
<p>Here we have used the “here document” notation in UNIX: The &lt;&lt; EOF
will treat the following lines as the input file until it detects the
word EOF.   There is nothing magical about the word EOF; you can use any other
string like STOP, hellobaby, or IamDone.
Your plot should look like <a class="reference internal" href="#gmt-tut-10"><span class="std std-ref">our example 10 below</span></a></p>
<div class="figure align-center" id="id11">
<span id="gmt-tut-10"></span><a class="reference internal image-reference" href="_images/GMT_tut_10.png"><img alt="_images/GMT_tut_10.png" src="_images/GMT_tut_10.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 10</span></p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="29%" />
<col width="21%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Effect</th>
<th class="head">Code</th>
<th class="head">Effect</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#64;E</td>
<td>Æ</td>
<td>&#64;e</td>
<td>æ</td>
</tr>
<tr class="row-odd"><td>&#64;O</td>
<td>Ø</td>
<td>&#64;o</td>
<td>ø</td>
</tr>
<tr class="row-even"><td>&#64;A</td>
<td>Å</td>
<td>&#64;a</td>
<td>å</td>
</tr>
<tr class="row-odd"><td>&#64;C</td>
<td>Ç</td>
<td>&#64;c</td>
<td>ç</td>
</tr>
<tr class="row-even"><td>&#64;N</td>
<td>Ñ</td>
<td>&#64;n</td>
<td>ñ</td>
</tr>
<tr class="row-odd"><td>&#64;U</td>
<td>Ü</td>
<td>&#64;u</td>
<td>ü</td>
</tr>
<tr class="row-even"><td>&#64;s</td>
<td>ß</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>Exercises:</p>
<ol class="arabic simple">
<li>At <em>y = 5</em>, add the sentence <span class="math notranslate nohighlight">\(z^2 = x^2 + y^2\)</span>.</li>
<li>At <em>y = 6</em>, add the sentence “It is 32º today”.</li>
</ol>
</div>
</div>
<div class="section" id="session-three">
<h1>4. Session Three<a class="headerlink" href="#session-three" title="Permalink to this headline">¶</a></h1>
<div class="section" id="contouring-gridded-data-sets">
<h2>4.1. Contouring gridded data sets<a class="headerlink" href="#contouring-gridded-data-sets" title="Permalink to this headline">¶</a></h2>
<p>GMT comes with several utilities that can create gridded data
sets; we will discuss two such modules later this session.  First,
we will assume that we already have gridded data sets.
Among these data are ETOPO5, crustal ages, gravity and geoid,
and DEM for the continental US.  Here, we will use <a class="reference internal" href="grdcut.html"><span class="doc">grdcut</span></a>
to extract a GMT-ready grid that we will next use for contouring:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdcut earth_relief_05m.grd -R-66/-60/30/35 -Gtut_bathy.nc -V
</pre></div>
</div>
</div></blockquote>
<p>Here we use the file extension .nc instead of the generic .grd
to indicate that this is a netCDF file. It is good form, but not essential,
to use .nc for netCDF grids. Using that extension will help
other programs installed on your system to recognize these files and might
give it an identifiable icon in your file browser.
Learn about other programs that read netCDF files at the
netCDF website (<a class="reference external" href="http://www.unidata.ucar.edu/software/netcdf/">http://www.unidata.ucar.edu/software/netcdf/</a>)
You can also obtain tut_bathy.nc from the GMT cache server as we are doing below.
Feel free to open it in any other program and compare results with GMT.</p>
<p>We first use the GMT module <a class="reference internal" href="grdinfo.html"><span class="doc">grdinfo</span></a> to see what’s in this file:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdinfo @tut_bathy.nc
</pre></div>
</div>
</div></blockquote>
<p>The file contains bathymetry for the Bermuda region and has depth
values from -5475 to -89 meters.  We want to make a contour map of
this data; this is a job for <a class="reference internal" href="grdcontour.html"><span class="doc">grdcontour</span></a>.  As with previous
plot commands we need to set up the map projection with <strong>-J</strong>.
Here, however, we do not have to specify the region since that is by
default assumed to be the extent of the grid file.
To generate any plot we will in addition need to supply information
about which contours to draw.  Unfortunately, <a class="reference internal" href="grdcontour.html"><span class="doc">grdcontour</span></a>
is a complicated module with too many options.  We put a positive
spin on this situation by touting its flexibility.  Here are the most
useful options:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-A</strong><em>annot_int</em></td>
<td>Annotation interval and attributes</td>
</tr>
<tr class="row-odd"><td><strong>-C</strong><em>cont_int</em></td>
<td>Contour interval</td>
</tr>
<tr class="row-even"><td><strong>-G</strong><em>gap</em></td>
<td>Controls placement of contour annotations</td>
</tr>
<tr class="row-odd"><td><strong>-L</strong><em>low</em>/<em>high</em></td>
<td>Only draw contours within the <em>low</em> to <em>high</em> range</td>
</tr>
<tr class="row-even"><td><strong>-Q</strong><em>cut</em></td>
<td>Do not draw contours with fewer than <em>cut</em> points</td>
</tr>
<tr class="row-odd"><td><strong>-S</strong><em>smooth</em></td>
<td>Resample contours <em>smooth</em> times per grid cell increment</td>
</tr>
<tr class="row-even"><td><strong>-T</strong>[<strong>+|-</strong>][<strong>+d</strong><em>gap</em>[/<em>length</em>]][<strong>+l</strong>[<em>labels</em>]]</td>
<td>Draw tick-marks in downhill</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>direction for innermost closed contours.  Add tick spacing</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>and length, and characters to plot at the center of closed contours</td>
</tr>
<tr class="row-odd"><td><strong>-W</strong>[<strong>a</strong>|<strong>c</strong>]<em>pen</em></td>
<td>Set contour and annotation pens</td>
</tr>
<tr class="row-even"><td><strong>-Z</strong>[<strong>+s</strong> *factor*][<strong>+o</strong><em>offset</em>]</td>
<td>Subtract <em>offset</em> and multiply data by <em>factor</em> prior to processing</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>We will first make a plain contour map using 1 km as annotation
interval and 250 m as contour interval.  We choose a 7-inch-wide
Mercator plot and annotate the borders every 2º:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdcontour @tut_bathy.nc -JM7i -C250 -A1000 -P -Ba &gt; GMT_tut_11.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-11"><span class="std std-ref">our example 11 below</span></a></p>
<div class="figure align-center" id="id12">
<span id="gmt-tut-11"></span><a class="reference internal image-reference" href="_images/GMT_tut_11.png"><img alt="_images/GMT_tut_11.png" src="_images/GMT_tut_11.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 11</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Add smoothing with <strong>-S</strong>4.</li>
<li>Try tick all highs and lows with <strong>-T</strong>.</li>
<li>Skip small features with <strong>-Q</strong>10.</li>
<li>Override region using <strong>-R</strong>-70/-60/25/35.</li>
<li>Try another region that clips our data domain.</li>
<li>Scale data to km and use the km unit in the annotations.</li>
</ol>
</div>
<div class="section" id="gridding-of-arbitrarily-spaced-data">
<h2>4.2. Gridding of arbitrarily spaced data<a class="headerlink" href="#gridding-of-arbitrarily-spaced-data" title="Permalink to this headline">¶</a></h2>
<p>Except in the situation above when a grid file is available, we must
convert our data to the right format readable by GMT before we can
make contour plots and color-coded images.  We distinguish between
two scenarios:</p>
<ol class="arabic simple">
<li>The (<em>x, y, z</em>) data are available on a regular lattice grid.</li>
<li>The (<em>x, y, z</em>) data are distributed unevenly in the plane.</li>
</ol>
<p>The former situation may require a simple reformatting (using
<a class="reference internal" href="xyz2grd.html"><span class="doc">xyz2grd</span></a>), while the latter must be interpolated onto a
regular lattice; this process is known as gridding.
GMT supports three different approaches to gridding; here, we
will briefly discuss the two most common techniques.</p>
<p>All GMT gridding modules have in common the requirement that the
user must specify the grid domain and output filename:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-R</strong><em>xmin/xmax/ymin/ymax</em></td>
<td>The desired grid extent</td>
</tr>
<tr class="row-odd"><td><strong>-I</strong><em>xinc</em>[<em>yinc</em>]</td>
<td>The grid spacing (append <strong>m</strong> or <strong>s</strong> for minutes or seconds of arc)</td>
</tr>
<tr class="row-even"><td><strong>-G</strong><em>gridfile</em></td>
<td>The output grid filename</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="nearest-neighbor-gridding">
<h3>4.2.1. Nearest neighbor gridding<a class="headerlink" href="#nearest-neighbor-gridding" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="id13">
<span id="gmt-nearneighbor"></span><a class="reference internal image-reference" href="_images/GMT_nearneighbor.png"><img alt="_images/GMT_nearneighbor.png" src="_images/GMT_nearneighbor.png" style="width: 200px;" /></a>
<p class="caption"><span class="caption-text">Search geometry for nearneighbor.</span></p>
</div>
<p>The GMT module <a class="reference internal" href="nearneighbor.html"><span class="doc">nearneighbor</span></a> implements a simple
“nearest neighbor” averaging operation.  It is the preferred
way to grid data when the data density is high.  <a class="reference internal" href="nearneighbor.html"><span class="doc">nearneighbor</span></a>
is a local procedure which means it will only consider the control
data that is close to the desired output grid node.
Only data points inside a specified search radius will
be used, and we may also impose the condition that each of the <em>n</em>
sectors must have at least one data point in order to assign the nodal
value.  The nodal value is computed as a weighted average of the nearest
data point per sector inside the search radius, with each point weighted
according to its distance from the node.
The most important switches are listed below.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-S</strong><em>radius</em>[<strong>u</strong>]</td>
<td>Sets search radius.  Append <strong>u</strong> for radius in that unit [Default is <em>x</em>-units]</td>
</tr>
<tr class="row-odd"><td><strong>-E</strong><em>empty</em></td>
<td>Assign this value to unconstrained nodes [Default is NaN]</td>
</tr>
<tr class="row-even"><td><strong>-N</strong><em>sectors</em></td>
<td>Sector search, indicate number of sectors [Default is 4]</td>
</tr>
<tr class="row-odd"><td><strong>-W</strong></td>
<td>Read relative weights from the 4th column of input data</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>We will grid the data in the file tut_ship.xyz which contains
ship observations of bathymetry off Baja California.  You can find the
file in the sub-directory for example 15.
We desire to make a 5’ by 5’ grid.  Running gmt info on the file yields</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tut_ship.xyz: <span class="nv">N</span> <span class="o">=</span> <span class="m">82970</span>     &lt;<span class="m">245</span>/254.705&gt;   &lt;<span class="m">20</span>/29.99131&gt;   &lt;-7708/-9&gt;
</pre></div>
</div>
</div></blockquote>
<p>so we choose the region accordingly, and get a view of the contour map using</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt nearneighbor -R245/255/20/30 -I5m -S40k -Gship.nc -V @tut_ship.xyz
gmt grdcontour ship.nc -JM6i -P -Ba -C250 -A1000 &gt; GMT_tut_12.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-12"><span class="std std-ref">our example 12 below</span></a></p>
<div class="figure align-center" id="id14">
<span id="gmt-tut-12"></span><a class="reference internal image-reference" href="_images/GMT_tut_12.png"><img alt="_images/GMT_tut_12.png" src="_images/GMT_tut_12.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 12</span></p>
</div>
<p>Since the grid ship.nc is stored in netCDF format that is supported by a host of other modules,
you can try one of those as well on the same grid.</p>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Try using a 100 km search radius and a 10 minute grid spacing.</li>
</ol>
</div>
<div class="section" id="gridding-with-splines-in-tension">
<h3>4.2.2. Gridding with Splines in Tension<a class="headerlink" href="#gridding-with-splines-in-tension" title="Permalink to this headline">¶</a></h3>
<p>As an alternative, we may use a global procedure to grid our data.
This approach, implemented in the module <a class="reference internal" href="surface.html"><span class="doc">surface</span></a>, represents
an improvement over standard minimum curvature algorithms by allowing
users to introduce some tension into the surface.
Physically, we are trying to force a thin elastic plate to go through
all our data points; the values of this surface at the grid points
become the gridded data.  Mathematically, we want to find the function
<em>z(x, y)</em> that satisfies the following equation away from data constraints:</p>
<div class="math notranslate nohighlight">
\[(1-t)\nabla ^2 z -  t \nabla z = 0,\]</div>
<p>where <em>t</em> is the “tension” in the 0-1 range.  Basically, for
zero tension we obtain the minimum curvature solution, while as
tension goes toward unity we approach a harmonic solution (which is linear
in cross-section).  The theory behind all this is quite involved
and we do not have the time to explain it all here, please see
<em>Smith and Wessel</em> [1990] for details.  Some of the most important
switches for this module are indicated below.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-A</strong><em>aspect</em></td>
<td>Sets aspect ratio for anisotropic grids.</td>
</tr>
<tr class="row-odd"><td><strong>-C</strong><em>limit</em></td>
<td>Sets convergence limit.  Default is 1/1000 of data range.</td>
</tr>
<tr class="row-even"><td><strong>-T</strong><em>tension</em></td>
<td>Sets the tension [Default is 0]</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="preprocessing">
<h2>4.3. Preprocessing<a class="headerlink" href="#preprocessing" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="surface.html"><span class="doc">surface</span></a> module assumes that the data have been
preprocessed to eliminate aliasing, hence we must ensure that
this step is completed prior to gridding.  GMT comes with
three preprocessors, called <a class="reference internal" href="blockmean.html"><span class="doc">blockmean</span></a>, <a class="reference internal" href="blockmedian.html"><span class="doc">blockmedian</span></a>,
and <a class="reference internal" href="blockmode.html"><span class="doc">blockmode</span></a>.  The first averages values inside the
grid-spacing boxes, the second returns median values, wile the
latter returns modal values.  As a rule of thumb, we use means for
most smooth data (such as potential fields) and medians (or modes)
for rough, non-Gaussian data (such as topography).  In addition
to the required <strong>-R</strong> and <strong>-I</strong> switches, these preprocessors
all take the same options shown below:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-r</strong></td>
<td>Choose pixel node registration [Default is gridline]</td>
</tr>
<tr class="row-odd"><td><strong>-W</strong>[<strong>i</strong>|<strong>o</strong>]</td>
<td>Append <strong>i</strong> or <strong>o</strong> to read or write weights in the 4th column</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>With respect to our ship data we preprocess it using the median method:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt blockmedian -R245/255/20/30 -I5m -V @tut_ship.xyz &gt; ship_5m.xyz
</pre></div>
</div>
</div></blockquote>
<p>The output data can now be used with surface:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt surface ship_5m.xyz -R245/255/20/30 -I5m -Gship.nc -V
</pre></div>
</div>
</div></blockquote>
<p>If you rerun <a class="reference internal" href="grdcontour.html"><span class="doc">grdcontour</span></a> on the new grid file (try it!)
you will notice a big difference compared to the grid made by
<a class="reference internal" href="nearneighbor.html"><span class="doc">nearneighbor</span></a>: since surface is a global method
it will evaluate the solution at all nodes, even if there are no
data constraints.  There are numerous options available to us at
this point:</p>
<ol class="arabic simple">
<li>We can reset all nodes too far from a data constraint to the NaN value.</li>
<li>We can pour white paint over those regions where contours are unreliable.</li>
<li>We can plot the landmass which will cover most (but not all) of the unconstrained areas.</li>
<li>We can set up a clip path so that only the contours in the constrained region will show.</li>
</ol>
<p>Here we have only time to explore the latter approach.  The <a class="reference internal" href="psmask.html"><span class="doc">psmask</span></a>
module can read the same preprocessed data and set up a contour mask
based on the data distribution.  Once the clip path is activated we can
contour the final grid; we finally deactivate the clipping with a second
call to <a class="reference internal" href="psmask.html"><span class="doc">psmask</span></a>.  Here’s the recipe:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt psmask -R245/255/20/30 -I5m ship_5m.xyz -JM6i -Ba -P -K -V &gt; GMT_tut_13.ps
gmt grdcontour ship.nc -J -O -K -C250 -A1000 &gt;&gt; GMT_tut_13.ps
gmt psmask -C -O &gt;&gt; GMT_tut_13.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-13"><span class="std std-ref">our example 13 below</span></a></p>
<div class="figure align-center" id="id15">
<span id="gmt-tut-13"></span><a class="reference internal image-reference" href="_images/GMT_tut_13.png"><img alt="_images/GMT_tut_13.png" src="_images/GMT_tut_13.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 13</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Add the continents using any color you want.</li>
<li>Color the clip path light gray (use <strong>-G</strong> in the first <a class="reference internal" href="psmask.html"><span class="doc">psmask</span></a> call).</li>
</ol>
</div>
</div>
<div class="section" id="session-four">
<h1>5. Session Four<a class="headerlink" href="#session-four" title="Permalink to this headline">¶</a></h1>
<p>In our final session we will concentrate on color images and
perspective views of gridded data sets.  Before we start that
discussion we need to cover three important aspects of plotting
that must be understood.  These are</p>
<ol class="arabic simple">
<li>Color tables and pseudo-colors in GMT.</li>
<li>Artificial illumination and how it affects colors.</li>
<li>Multi-dimensional grids.</li>
</ol>
<div class="section" id="cpts">
<h2>5.1. CPTs<a class="headerlink" href="#cpts" title="Permalink to this headline">¶</a></h2>
<p>The CPT is discussed in detail in the GMT Technical Reference
and Cookbook.  Please review the format before experimenting
further.</p>
<p>CPTs can be created in any number of ways.  GMT provides
two mechanisms:</p>
<ol class="arabic simple">
<li>Create simple, linear color tables given a master color table
(several are built-in) and the desired <em>z</em>-values at color boundaries
(<a class="reference internal" href="makecpt.html"><span class="doc">makecpt</span></a>)</li>
<li>Create color tables based on a master CPT color table and the
histogram-equalized distribution of <em>z</em>-values in a gridded data file (<a class="reference internal" href="grd2cpt.html"><span class="doc">grd2cpt</span></a>)</li>
</ol>
<p>One can also make these files manually or with awk
or other tools.  Here we will limit our discussion to <a class="reference internal" href="makecpt.html"><span class="doc">makecpt</span></a>.
Its main argument is the name of the master color table (a list is
shown if you run the module with no arguments) and the equidistant
<em>z</em>-values to go with it.  The main options are given below.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-C</strong></td>
<td>Set the name of the master CPT to use</td>
</tr>
<tr class="row-odd"><td><strong>-I</strong></td>
<td>Reverse the sense of the color progression</td>
</tr>
<tr class="row-even"><td><strong>-V</strong></td>
<td>Run in verbose mode</td>
</tr>
<tr class="row-odd"><td><strong>-Z</strong></td>
<td>Make a continuous rather than discrete table</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>To make discrete and continuous color CPTs for data that ranges
from -20 to 60, with color changes at every 10, try these two variants:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt makecpt -Crainbow -T-20/60/10 &gt; disc.cpt
gmt makecpt -Crainbow -T-20/60/10 -Z &gt; cont.cpt
</pre></div>
</div>
</div></blockquote>
<p>We can plot these color tables with <a class="reference internal" href="psscale.html"><span class="doc">psscale</span></a>; the options
worth mentioning here are listed below.  The placement of the
color bar is particularly important and we refer you to the
<a class="reference internal" href="GMT_Docs.html#gmt-embellishments"><span class="std std-ref">Plot embellishments</span></a> section for all
the details.
In addition, the <strong>-B</strong> option can be used to set the title
and unit label (and optionally to set the annotation-, tick-,
and grid-line intervals for the color bars.)</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-C</strong><em>cpt</em></td>
<td>The required CPT</td>
</tr>
<tr class="row-odd"><td><strong>-Dx</strong><em>xpos/ypos</em><strong>+w</strong><em>length/width</em>[<strong>+h</strong>]</td>
<td>Sets the position and dimensions of scale bar.</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>Append <strong>+h</strong> to get horizontal bar</td>
</tr>
<tr class="row-odd"><td><strong>-I</strong><em>max_intensity</em></td>
<td>Add illumination effects</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Here is an example of four different ways of presenting the color bar:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt psbasemap -R0/6/0/9 -Jx1i -P -B0 -K -Xc &gt; GMT_tut_14.ps
gmt psscale -Dx1i/1i+w4i/0.5i+h -Cdisc.cpt -B+tdiscrete -O -K &gt;&gt; GMT_tut_14.ps
gmt psscale -Dx1i/3i+w4i/0.5i+h -Ccont.cpt -B+tcontinuous -O -K &gt;&gt; GMT_tut_14.ps
gmt psscale -Dx1i/5i+w4i/0.5i+h -Cdisc.cpt -B+tdiscrete -I0.5 -O -K &gt;&gt; GMT_tut_14.ps
gmt psscale -Dx1i/7i+w4i/0.5i+h -Ccont.cpt -B+tcontinuous -I0.5 -O &gt;&gt; GMT_tut_14.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-14"><span class="std std-ref">our example 14 below</span></a></p>
<div class="figure align-center" id="id16">
<span id="gmt-tut-14"></span><a class="reference internal image-reference" href="_images/GMT_tut_14.png"><img alt="_images/GMT_tut_14.png" src="_images/GMT_tut_14.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 14</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Redo the <a class="reference internal" href="makecpt.html"><span class="doc">makecpt</span></a> exercise using the master table
<em>hot</em> and redo the bar plot.</li>
<li>Try specifying <strong>-B</strong>10g5.</li>
</ol>
</div>
<div class="section" id="illumination-and-intensities">
<h2>5.2. Illumination and intensities<a class="headerlink" href="#illumination-and-intensities" title="Permalink to this headline">¶</a></h2>
<p>GMT allows for artificial illumination and shading.  What this
means is that we imagine an artificial sun placed at infinity in
some azimuth and elevation position illuminating our surface.
The parts of the surface that slope toward the sun should brighten
while those sides facing away should become darker; no shadows are
cast as a result of topographic undulations.</p>
<p>While it is clear that the actual slopes of the surface and the
orientation of the sun enter into these calculations, there is
clearly an arbitrary element when the surface is not topographic
relief but some other quantity.  For instance, what does the slope
toward the sun mean if we are plotting a grid of heat flow anomalies?
While there are many ways to accomplish what we want, GMT offers
a relatively simple way:  We may calculate the gradient of the surface
in the direction of the sun and normalize these values to fall in
the -1 to +1 range; +1 means maximum sun exposure and -1 means complete
shade. Although we will not show it here, it should be added that
GMT treats the intensities as a separate data set.  Thus, while
these values are often derived from the relief surface we want to
image they could be separately observed quantities such as back-scatter
information.</p>
<p>Colors in GMT are specified in the RGB system used for computer
screens; it mixes red, green, and blue light to achieve other colors.
The RGB system is a Cartesian coordinate system and produces a color cube.
For reasons better explained in Appendix I in the Reference book it is
difficult to darken and brighten a color based on its RGB values and an
alternative coordinate system is used instead; here we use the HSV system.
If you hold the color cube so that the black and white corners are along
a vertical axis, then the other 6 corners project onto the horizontal plane to
form a hexagon; the corners of this hexagon are the primary colors Red,
Yellow, Green, Cyan, Blue, and Magenta.
The CMY colors are the complimentary colors and are used when paints are
mixed to produce a new color (this is how printers operate; they also add
pure black (K) to avoid making gray from CMY).  In this coordinate system the
angle 0-360º is the hue (H); the Saturation and Value are harder to
explain.  Suffice it to say here that we intend to darken any pure color
(on the cube facets) by keeping H fixed and adding black and brighten it by adding white; for
interior points in the cube we will add or remove gray.
This operation is efficiently done in the HSV coordinate system; hence all
GMT shading operations involve translating from RGB to HSV, do the
illumination effect, and transform back the modified RGB values.</p>
</div>
<div class="section" id="color-images">
<h2>5.3. Color images<a class="headerlink" href="#color-images" title="Permalink to this headline">¶</a></h2>
<p>Once a CPT has been made it is relatively straightforward to generate
a color image of a gridded data.  Here, we will extract a subset of the
global 30” DEM called SRTM30+:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdcut earth_relief_30s.grd -R-108/-103/35/40 -Gtut_relief.nc
</pre></div>
</div>
</div></blockquote>
<p>Using <a class="reference internal" href="grdinfo.html"><span class="doc">grdinfo</span></a> we find that the data ranges from about 1000m to
about 4300m so we make a CPT accordingly:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt makecpt -Crainbow -T1000/5000/500 -Z &gt; topo.cpt
</pre></div>
</div>
</div></blockquote>
<p>Color images are made with <a class="reference internal" href="grdimage.html"><span class="doc">grdimage</span></a> which takes the usual
common command options (by default the <strong>-R</strong> is taken from the data set)
and a CPT; the main other options are:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-E</strong><em>dpi</em></td>
<td>Sets the desired resolution of the image [Default is data resolution]</td>
</tr>
<tr class="row-odd"><td><strong>-I</strong><em>intenfile</em></td>
<td>Use artificial illumination using intensities from <em>intensfile</em></td>
</tr>
<tr class="row-even"><td><strong>-M</strong></td>
<td>Force gray shade using the (television) YIQ conversion</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>We want to make a plain color map with a color bar superimposed above
the plot.  We try</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdimage @tut_relief.nc -JM6i -P -Ba -Ctopo.cpt -V -K &gt; GMT_tut_15.ps
gmt psscale -DjTC+w5i/0.25i+h+o0/-1i -Rtut_relief.nc -J -Ctopo.cpt -I0.4 -By+lm -O &gt;&gt; GMT_tut_15.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-15"><span class="std std-ref">our example 15 below</span></a></p>
<div class="figure align-center" id="id17">
<span id="gmt-tut-15"></span><a class="reference internal image-reference" href="_images/GMT_tut_15.png"><img alt="_images/GMT_tut_15.png" src="_images/GMT_tut_15.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 15</span></p>
</div>
<p>The plain color map lacks detail and fails to reveal the topographic
complexity of this Rocky Mountain region.  What it needs is artificial
illumination.  We want to simulate shading by a sun source in the east,
hence we derive the required intensities from the gradients of the
topography in the N90ºE direction using <a class="reference internal" href="grdgradient.html"><span class="doc">grdgradient</span></a>.  Other than the
required input and output filenames, the available options are</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-A</strong><em>azimuth</em></td>
<td>Azimuthal direction for gradients</td>
</tr>
<tr class="row-odd"><td><strong>-fg</strong></td>
<td>Indicates that this is a geographic grid</td>
</tr>
<tr class="row-even"><td><strong>-N</strong>[<strong>t</strong>|<strong>e</strong>][<strong>+s</strong><em>norm</em>][<strong>+o</strong><em>offset</em>]</td>
<td>Normalize gradients by <em>norm/offset</em> [= 1/0 by default].</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Insert <strong>t</strong> to normalize by the inverse tangent transformation.</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>Insert <strong>e</strong> to normalize by the cumulative Laplace distribution.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The <a class="reference internal" href="#gmt-atan"><span class="std std-ref">GMT inverse tangent transformation</span></a>  shows that raw slopes from bathymetry tend to be
far from normally distributed (left).  By using the inverse tangent
transformation we can ensure a more uniform distribution (right).
The inverse tangent transform simply takes the raw slope estimate
(the <em>x</em> value at the arrow) and returns the corresponding inverse
tangent value (normalized to fall in the plus/minus 1 range; horizontal
arrow pointing to the <em>y</em>-value).</p>
<div class="figure align-center" id="id18">
<span id="gmt-atan"></span><a class="reference internal image-reference" href="_images/GMT_atan.png"><img alt="_images/GMT_atan.png" src="_images/GMT_atan.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">How the inverse tangent operation works.  Raw slope values (left) are processed
via the inverse tangent operator, turning tan(x) into x and thus compressing
the data range.  The transformed slopes are more normally distributed (right).</span></p>
</div>
<p><strong>-Ne</strong> and <strong>-Nt</strong> yield well behaved gradients.  Personally,
we prefer to use the <strong>-Ne</strong> option; the value of
<em>norm</em> is subjective and you may experiment somewhat in the
0.5-5 range.  For our case we choose</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdgradient @tut_relief.nc -Ne0.8 -A100 -fg -Gus_i.nc
</pre></div>
</div>
</div></blockquote>
<p>Given the CPT and the two gridded data sets we can
create the shaded relief image:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdimage @tut_relief.nc -Ius_i.nc -JM6i -P -Ba -Ctopo.cpt -K &gt; GMT_tut_16.ps
gmt psscale -DjTC+w5i/0.25i+h+o0/-1i -Rtut_relief.nc -J -Ctopo.cpt -I0.4 -By+lm -O &gt;&gt; GMT_tut_16.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-16"><span class="std std-ref">our example 16 below</span></a></p>
<div class="figure align-center" id="id19">
<span id="gmt-tut-16"></span><a class="reference internal image-reference" href="_images/GMT_tut_16.png"><img alt="_images/GMT_tut_16.png" src="_images/GMT_tut_16.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 16</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Force a gray-shade image.</li>
<li>Rerun <a class="reference internal" href="grdgradient.html"><span class="doc">grdgradient</span></a> with <strong>-N</strong>1.</li>
</ol>
</div>
<div class="section" id="multi-dimensional-maps">
<h2>5.4. Multi-dimensional maps<a class="headerlink" href="#multi-dimensional-maps" title="Permalink to this headline">¶</a></h2>
<p>Climate data, like ocean temperatures or atmospheric pressure, are often provided as
multi-dimensional (3-D, 4-D or 5-D) grids in netCDF format. This section will demonstrate
that GMT is able to plot “horizontal”
slices (spanning latitude and longitude) of such grids without much effort.</p>
<p>As an example we will download the Seasonal Analysed Mean Temperature from the
World Ocean Atlas 1998 (<a class="reference external" href="http://www.cdc.noaa.gov/cdc/data.nodc.woa98.html">http://www.cdc.noaa.gov/cdc/data.nodc.woa98.html</a>).
The file in question is named
otemp.anal1deg.nc (<a class="reference external" href="ftp://ftp.cdc.noaa.gov/Datasets/nodc.woa98/temperat/seasonal/otemp.anal1deg.nc">ftp://ftp.cdc.noaa.gov/Datasets/nodc.woa98/temperat/seasonal/otemp.anal1deg.nc</a>).</p>
<p>You can look at the information pertained in this file using the program ncdump and
notice that the variable that we want to plot (otemp) is a four-dimensional variable of time,
level (i.e., depth), latitude and longitude.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ncdump -h otemp.anal1deg.nc
</pre></div>
</div>
</div></blockquote>
<p>We will need to make an appropriate color scale, running from -2ºC (freezing temperature of salt
water) to 30ºC (highest likely ocean temperature). We do this as follows:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt makecpt -Cno_green -T-2/30/2 &gt; otemp.cpt
</pre></div>
</div>
</div></blockquote>
<p>Let us focus on the temperatures in Summer (that is the third season, July through
September) at sea level (that is the first level). To plot these in a Mollweide projection we
use:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdimage -Rg -JW180/9i <span class="s2">&quot;@otemp.anal1deg.nc?otemp[2,0]&quot;</span> -Cotemp.cpt -Bag &gt; GMT_tut_17.ps
</pre></div>
</div>
</div></blockquote>
<p>The addition “?otemp[2,0]” indicates which variable to retrieve from the netCDF
file (otemp) and that we need the third time step and first level. The numbering of the
time steps and levels starts at zero, therefore “[2,0]”. Make sure to put the
whole file name within quotes since the characters ?, [ and ] have
special meaning in Unix.
Your plot should look like <a class="reference internal" href="#gmt-tut-17"><span class="std std-ref">our example 17 below</span></a></p>
<div class="figure align-center" id="id20">
<span id="gmt-tut-17"></span><a class="reference internal image-reference" href="_images/GMT_tut_17.png"><img alt="_images/GMT_tut_17.png" src="_images/GMT_tut_17.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 17</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Plot the temperatures for Spring at 5000 m depth. (Hint: use ncdump -v level to
figure out what level number that is).</li>
<li>Include a color scale at the bottom of the plot.</li>
</ol>
</div>
<div class="section" id="perspective-views">
<h2>5.5. Perspective views<a class="headerlink" href="#perspective-views" title="Permalink to this headline">¶</a></h2>
<p>Our final undertaking in this tutorial is to examine three-dimensional
perspective views.  The
GMT module that produces perspective views of gridded data files is
<a class="reference internal" href="grdview.html"><span class="doc">grdview</span></a>.  It can make two kinds of plots:</p>
<ol class="arabic simple">
<li>Mesh or wire-frame plot (with or without superimposed contours)</li>
<li>Color-coded surface (with optional shading, contours, or draping).</li>
</ol>
<p>Regardless of plot type, some arguments must be specified; these are</p>
<ol class="arabic simple">
<li><em>relief_file</em>; a gridded data set of the surface.</li>
<li><strong>-J</strong> for the desired map projection.</li>
<li><strong>-JZ</strong><em>height</em> for the vertical scaling.</li>
<li><strong>-p</strong><em>azimuth/elevation</em> for the vantage point.</li>
</ol>
<p>In addition, some options may be required:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>-C</strong><em>cpt</em></td>
<td>The <em>cpt</em> is required for color-coded surfaces and for contoured mesh plots</td>
</tr>
<tr class="row-odd"><td><strong>-G</strong><em>drape_file</em></td>
<td>Assign colors using <em>drape_file</em> instead of <em>relief_file</em></td>
</tr>
<tr class="row-even"><td><strong>-I</strong><em>intens_file</em></td>
<td>File with illumination intensities</td>
</tr>
<tr class="row-odd"><td><strong>-Qm</strong></td>
<td>Selects mesh plot</td>
</tr>
<tr class="row-even"><td><strong>-Qs</strong>[<strong>+m</strong>]</td>
<td>Surface plot using polygons; append <strong>+m</strong> to show mesh.  This option allows for <strong>-W</strong></td>
</tr>
<tr class="row-odd"><td><strong>-Qi</strong><em>dpi</em>[<strong>g</strong>]</td>
<td>Image by scan-line conversion.  Specify <em>dpi</em>; append <strong>g</strong> to force gray-shade image.  <strong>-B</strong> is disabled.</td>
</tr>
<tr class="row-even"><td><strong>-W</strong><em>pen</em></td>
<td>Draw contours on top of surface (except with <strong>-Qi</strong>)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="mesh-plot">
<h3>5.5.1. Mesh-plot<a class="headerlink" href="#mesh-plot" title="Permalink to this headline">¶</a></h3>
<p>Mesh plots work best on smaller data sets.  We again use the small
subset of the ETOPO5 data over Bermuda and make a quick-and-dirty
CPT:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grd2cpt @tut_bathy.nc -Cocean &gt; bermuda.cpt
</pre></div>
</div>
</div></blockquote>
<p>A simple mesh plot can therefore be obtained with</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdview @tut_bathy.nc -JM5i -P -JZ2i -p135/30 -Ba -Cbermuda.cpt &gt; GMT_tut_18.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-18"><span class="std std-ref">our example 18 below</span></a></p>
<div class="figure align-center" id="id21">
<span id="gmt-tut-18"></span><a class="reference internal image-reference" href="_images/GMT_tut_18.png"><img alt="_images/GMT_tut_18.png" src="_images/GMT_tut_18.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 18</span></p>
</div>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Select another vantage point and vertical height.</li>
</ol>
</div>
<div class="section" id="color-coded-view">
<h3>5.5.2. Color-coded view<a class="headerlink" href="#color-coded-view" title="Permalink to this headline">¶</a></h3>
<p>We will make a perspective, color-coded view of the US Rockies
from the southeast.  This is done using</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gmt grdview @tut_relief.nc -JM6i -p135/35 -Qi50 -Ius_i.nc -Ctopo.cpt -V -Ba -JZ0.5i &gt; GMT_tut_19.ps
</pre></div>
</div>
</div></blockquote>
<p>Your plot should look like <a class="reference internal" href="#gmt-tut-19"><span class="std std-ref">our example 19 below</span></a></p>
<div class="figure align-center" id="id22">
<span id="gmt-tut-19"></span><a class="reference internal image-reference" href="_images/GMT_tut_19.png"><img alt="_images/GMT_tut_19.png" src="_images/GMT_tut_19.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Result of GMT Tutorial example 19</span></p>
</div>
<p>This plot is pretty crude since we selected 50 dpi but it is fast
to render and allows us to try alternate values for vantage point
and scaling.  When we settle on the final values we select the
appropriate <em>dpi</em> for the final output device and let it rip.</p>
<p>Exercises:</p>
<ol class="arabic simple">
<li>Choose another vantage point and scaling.</li>
<li>Redo <a class="reference internal" href="grdgradient.html"><span class="doc">grdgradient</span></a> with another illumination direction and plot again.</li>
<li>Select a higher <em>dpi</em>, e.g., 200.</li>
</ol>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Introduction</a><ul>
<li><a class="reference internal" href="#gmt-overview-history-philosophy-and-usage">1.1. GMT overview: History, philosophy, and usage</a><ul>
<li><a class="reference internal" href="#historical-highlights">1.1.1. Historical highlights</a></li>
<li><a class="reference internal" href="#philosophy">1.1.2. Philosophy</a></li>
<li><a class="reference internal" href="#gmt-installation-considerations">1.1.3. GMT installation considerations</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#session-one">2. Session One</a><ul>
<li><a class="reference internal" href="#tutorial-setup">2.1. Tutorial setup</a></li>
<li><a class="reference internal" href="#the-gmt-environment-what-happens-when-you-run-gmt">2.2. The GMT environment: What happens when you run GMT ?</a><ul>
<li><a class="reference internal" href="#input-data">2.2.1. Input data</a></li>
<li><a class="reference internal" href="#job-control">2.2.2. Job Control</a></li>
<li><a class="reference internal" href="#output-data">2.2.3. Output data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-unix-environment-entry-level-knowledge">2.3. The UNIX Environment: Entry Level Knowledge</a><ul>
<li><a class="reference internal" href="#redirection">2.3.1. Redirection</a></li>
<li><a class="reference internal" href="#piping">2.3.2. Piping (|)</a></li>
<li><a class="reference internal" href="#standard-error-stderr">2.3.3. Standard error (<em>stderr</em>)</a></li>
<li><a class="reference internal" href="#file-name-expansion-or-wild-cards">2.3.4. File name expansion or “wild cards”</a></li>
</ul>
</li>
<li><a class="reference internal" href="#laboratory-exercises">2.4. Laboratory Exercises</a><ul>
<li><a class="reference internal" href="#linear-projection">2.4.1. Linear projection</a></li>
<li><a class="reference internal" href="#logarithmic-projection">2.4.2. Logarithmic projection</a></li>
<li><a class="reference internal" href="#mercator-projection">2.4.3. Mercator projection</a></li>
<li><a class="reference internal" href="#albers-projection">2.4.4. Albers projection</a></li>
<li><a class="reference internal" href="#orthographic-projection">2.4.5. Orthographic projection</a></li>
<li><a class="reference internal" href="#eckert-iv-and-vi-projection">2.4.6. Eckert IV and VI projection</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#session-two">3. Session Two</a><ul>
<li><a class="reference internal" href="#general-information">3.1. General Information</a><ul>
<li><a class="reference internal" href="#more-exercises">3.1.1. More exercises</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plotting-text-strings">3.2. Plotting text strings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#session-three">4. Session Three</a><ul>
<li><a class="reference internal" href="#contouring-gridded-data-sets">4.1. Contouring gridded data sets</a></li>
<li><a class="reference internal" href="#gridding-of-arbitrarily-spaced-data">4.2. Gridding of arbitrarily spaced data</a><ul>
<li><a class="reference internal" href="#nearest-neighbor-gridding">4.2.1. Nearest neighbor gridding</a></li>
<li><a class="reference internal" href="#gridding-with-splines-in-tension">4.2.2. Gridding with Splines in Tension</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preprocessing">4.3. Preprocessing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#session-four">5. Session Four</a><ul>
<li><a class="reference internal" href="#cpts">5.1. CPTs</a></li>
<li><a class="reference internal" href="#illumination-and-intensities">5.2. Illumination and intensities</a></li>
<li><a class="reference internal" href="#color-images">5.3. Color images</a></li>
<li><a class="reference internal" href="#multi-dimensional-maps">5.4. Multi-dimensional maps</a></li>
<li><a class="reference internal" href="#perspective-views">5.5. Perspective views</a><ul>
<li><a class="reference internal" href="#mesh-plot">5.5.1. Mesh-plot</a></li>
<li><a class="reference internal" href="#color-coded-view">5.5.2. Color-coded view</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">GMT_Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="api.html"
                        title="next chapter">GMT_API</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/GMT_Tutorial.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="api.html" title="GMT_API"
             >next</a> </li>
        <li class="right" >
          <a href="tutorial.html" title="GMT_Tutorial"
             >previous</a> </li>
  <li><a href="/projects/gmt/wiki/Documentation">Project Home</a>  &#187;</li>
  
        <li class="nav-item nav-item-0"><a href="index.html">GMT 5.4.6_c5d65a4_2019.11.05 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="tutorial.html" >GMT_Tutorial</a> &#187;</li>
<li class="right">
<form class="search" accept-charset="UTF-8" action="search.html" method="get">
  <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label for="q">
    <a class="search" href="search.html" accesskey="s" original-title="">Search:</a>
  </label>
  <input accesskey="f" class="small" id="q" name="q" size="20" type="text">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form></li>
   

      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2019, The GMT Team.
  Last updated on Jun 14, 2020.
  Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.5.
  <br />Theme based on <a href="http://readthedocs.org/">Read The Docs</a>

</div>


  </body>
</html>